
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>XML &#8212; Apuntes de Lenguajes de Marcas v1.3</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/translations.js"></script>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="Recuperación de información" href="tema6.html" />
    <link rel="prev" title="Javascript" href="tema4.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="xml">
<h1>XML<a class="headerlink" href="#xml" title="Enlace permanente a este encabezado">¶</a></h1>
<section id="introduccion">
<h2>Introducción<a class="headerlink" href="#introduccion" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Los lenguajes de marcas como HTML tienen una orientación muy clara: describir páginas web.</p>
<p>En un contexto distinto, muy a menudo ocurre que es muy difícil intercambiar datos entre programas.</p>
<p>XML es un conjunto de tecnologías orientadas a crear nuestros propios lenguajes de marcas. A estos lenguajes de marcas «propios» se les denomina «vocabularios».</p>
</section>
<section id="un-ejemplo-sencillo">
<h2>Un ejemplo sencillo<a class="headerlink" href="#un-ejemplo-sencillo" title="Enlace permanente a este encabezado">¶</a></h2>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;clientes&gt;</span>
    <span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>AcerSA<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;cif&gt;</span>5664332<span class="nt">&lt;/cif&gt;</span>
    <span class="nt">&lt;/cliente&gt;</span>
    <span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Mer SL<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;cif&gt;</span>5111444<span class="nt">&lt;/cif&gt;</span>
    <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/clientes&gt;</span>
</pre></div>
</div>
<p>Lo fundamental es que podemos crear nuestros propios «vocabularios» XML.</p>
</section>
<section id="construccion-de-xml">
<h2>Construcción de XML<a class="headerlink" href="#construccion-de-xml" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Para crear XML es importante recordar una serie de reglas:</p>
<ul class="simple">
<li><p>XML es «case-sensitive», es decir que no es lo mismo mayúsculas que minúsculas y que por tanto no es lo mismo <code class="docutils literal notranslate"><span class="pre">&lt;cliente&gt;</span></code>, que <code class="docutils literal notranslate"><span class="pre">&lt;Cliente&gt;</span></code> que <code class="docutils literal notranslate"><span class="pre">&lt;CLIENTE&gt;</span></code>.</p></li>
<li><p>Obligatorio: solo un elemento raíz.</p></li>
<li><p>En general, la costumbre es poner todo en minúsculas.</p></li>
<li><p>Solo se puede poner una etiqueta que empiece por letra o _. Es decir, esta etiqueta no funcionará en los programas <code class="docutils literal notranslate"><span class="pre">&lt;12Cliente&gt;</span></code>.</p></li>
<li><p>Aparte de eso, una etiqueta sí puede contener números, por lo que esta etiqueta sí es válida <code class="docutils literal notranslate"><span class="pre">&lt;Cliente12&gt;</span></code>.</p></li>
<li><p>Aunque no es obligatorio a menudo se suele poner en la primera línea un <strong>prólogo</strong> que indica la versión de XML que estamos usando y la codificación con la que nuestro editor almacena los archivos.</p></li>
</ul>
</section>
<section id="validez">
<h2>Validez<a class="headerlink" href="#validez" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Un documento XML puede «estar bien formado» o «ser válido». Se dice que un documento «está bien formado» cuando respeta las reglas XML básicas. Si alguien ha definido las reglas XML para un vocabulario, podremos además decir si el documento es válido o no, lo cual es mejor que simplemente estar bien formado.</p>
<p>Por ejemplo, los siguientes archivos ni siquiera están bien formados.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;clientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>AcerSA
                <span class="nt">&lt;CIF&gt;</span>5666333<span class="nt">&lt;/CIF&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/clientes&gt;</span>
</pre></div>
</div>
<p>En este caso la etiqueta <code class="docutils literal notranslate"><span class="pre">&lt;nombre&gt;</span></code> no está cerrada.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;clientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>AcerSA<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5666333<span class="nt">&lt;/CIF&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/clientes&gt;</span>
</pre></div>
</div>
<p>En este caso, se ha puesto <code class="docutils literal notranslate"><span class="pre">&lt;cif&gt;</span></code> cerrado con <code class="docutils literal notranslate"><span class="pre">&lt;/CIF&gt;</span></code> (mayúsculas).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;clientes&gt;
        &lt;cliente&gt;
                &lt;nombre!&gt;AcerSA&lt;/nombre!&gt;
                &lt;CIF&gt;5666333&lt;/CIF&gt;
        &lt;/cliente&gt;
&lt;/clientes&gt;
</pre></div>
</div>
<p>Se ha utilizado la admiración, que no es válida (de hecho, el coloreador de sintaxis automático descubre
que no es XML y el fichero se muestra de manera literal)</p>
<p>Atención a este ejemplo:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>AcerSA<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;CIF&gt;</span>5666333<span class="nt">&lt;/CIF&gt;</span>
<span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>ACME<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;CIF&gt;</span>455321<span class="nt">&lt;/CIF&gt;</span>
<span class="nt">&lt;/cliente&gt;</span>
</pre></div>
</div>
<p>En este caso, el problema es que hay más de un elemento raíz.</p>
<p>En general, podemos asumir que un documento puede estar en uno de estos estados que de peor a mejor podríamos indicar así:</p>
<ol class="arabic simple">
<li><p>Mal formado (lo peor)</p></li>
<li><p>Bien formado.</p></li>
<li><p>Válido: está bien formado y además nos han dado las reglas para determinar si algo está bien o mal y el documento XML cumple dichas reglas. Este es el mejor caso.</p></li>
</ol>
<p>Para determinar si un documento es válido o no, se puede usar el validador del W3C situado en <a class="reference external" href="http://validator.w3c.org">http://validator.w3c.org</a></p>
</section>
<section id="gramaticas">
<h2>Gramáticas<a class="headerlink" href="#gramaticas" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Pensemos en el siguiente problema, un programador crea aplicaciones con documentos que se almacenan así:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;clientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>AcerSA<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>455321<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>ACME<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>455321<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/clientes&gt;</span>
</pre></div>
</div>
<p>Sin embargo, otro programador de la misma empresa lo hace así:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;clientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>455321<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>AcerSA<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>455321<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>ACME<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/clientes&gt;</span>
</pre></div>
</div>
<p>Está claro, que ninguno de los dos puede leer los archivos del otro, sería crítico ponerse de acuerdo en lo que se puede hacer, lo que puede aparecer y en qué orden debe hacerlo. Esto se hará mediante las DTD.</p>
<p>DTD significa Declaración de Tipo de Documento, y es un mecanismo para expresar las reglas sobre lo que se va a permitir y lo que no en archivos XML.</p>
<p>Por ejemplo, supongamos el mismo ejemplo ejemplo anterior en el que queremos formalizar lo que puede aparecer en un fichero de clientes. Se debe tener en cuenta que en un DTD se pueden indicar reglas para lo siguiente:</p>
<ul class="simple">
<li><p>Se puede indicar si un elemento aparece o no de forma opcional (usando <code class="docutils literal notranslate"><span class="pre">?</span></code>)</p></li>
<li><p>Se puede indicar si un elemento debe aparecer de forma obligatoria.</p></li>
<li><p>Se puede indicar si algo aparecer una o muchas veces (usando <code class="docutils literal notranslate"><span class="pre">+</span></code>).</p></li>
<li><p>Se puede indicar si algo aparece cero o muchas veces (usando <code class="docutils literal notranslate"><span class="pre">*</span></code>).</p></li>
<li><p>Se puede indicar que un elemento ya no lleva nada dentro usando <code class="docutils literal notranslate"><span class="pre">&lt;!ELEMENT</span> <span class="pre">cantidad</span> <span class="pre">(#PCDATA)</span></code> .</p></li>
<li><p>Se puede indicar que un elemento cantidad lleva obligatoriamente un atributo divisa usando <code class="docutils literal notranslate"><span class="pre">&lt;!ATTLIST</span> <span class="pre">cantidad</span> <span class="pre">divisa</span> <span class="pre">CDATA</span> <span class="pre">#REQUIRED</span></code></p></li>
<li><p>Se puede indicar que un elemento cantidad podría llevar o no obligatoriamente un atributo moneda usando <code class="docutils literal notranslate"><span class="pre">&lt;!ATTLIST</span> <span class="pre">cantidad</span> <span class="pre">moneda</span> <span class="pre">CDATA</span> <span class="pre">#IMPLIED</span></code></p></li>
</ul>
<p>Supongamos que en nuestros ficheros deseamos indicar que el elemento raíz es <code class="docutils literal notranslate"><span class="pre">&lt;listaclientes&gt;</span></code>. Dentro de <code class="docutils literal notranslate"><span class="pre">&lt;listaclientes&gt;</span></code> deseamos permitir uno o más elementos <code class="docutils literal notranslate"><span class="pre">&lt;cliente&gt;</span></code>. Dentro de <code class="docutils literal notranslate"><span class="pre">&lt;cliente&gt;</span></code> todos deberán tener <code class="docutils literal notranslate"><span class="pre">&lt;cif&gt;</span></code> y <code class="docutils literal notranslate"><span class="pre">&lt;nombre&gt;</span></code> y en ese orden. Dentro de <code class="docutils literal notranslate"><span class="pre">&lt;cliente&gt;</span></code> puede aparecer o no un elemento <code class="docutils literal notranslate"><span class="pre">&lt;diasentrega&gt;</span></code> para indicar que ese cliente exige un máximo de plazos. Como no todo el mundo usa plazos el <code class="docutils literal notranslate"><span class="pre">&lt;diasentrega&gt;</span></code> es optativo.</p>
<p>Por ejemplo, este XML sí es válido:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mercasa<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>Este también lo es:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mercasa<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;diasentrega&gt;</span>30<span class="nt">&lt;/diasentrega&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>Este también:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mercasa<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;diasentrega&gt;</span>30<span class="nt">&lt;/diasentrega&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5121554<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Acer SL<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>Sin embargo, estos no lo son:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>Este archivo no tenía clientes (y era obligatorio al menos uno)</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;diasentrega&gt;</span>30<span class="nt">&lt;/diasentrega&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>Este archivo no tiene nombre de cliente.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mercasa<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5121554<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Acer SL<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>En este archivo no se respeta el orden cif, nombre.</p>
<section id="sintaxis-dtd">
<h3>Sintaxis DTD<a class="headerlink" href="#sintaxis-dtd" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Una DTD es como un CSS, puede ir en el mismo archivo XML o puede ir en uno separado. Para poder subirlos al validador, meteremos la DTD junto con el XML.</p>
<p>La primera línea de todo XML debe ser esta:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
</pre></div>
</div>
<p>Al final del XML pondremos los datos propiamente dichos</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mercasa<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5121554<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Acer SL<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>La DTD tiene esta estructura</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!DOCTYPE</span> <span class="nt">listaclientes</span> <span class="k">[</span>
                <span class="k">&lt;!ELEMENT</span> <span class="nt">listaclientes</span> <span class="o">(</span><span class="nt">cliente</span><span class="o">+)</span><span class="k">&gt;</span>
                <span class="k">&lt;!ELEMENT</span> <span class="nt">cliente</span> <span class="o">(</span><span class="nt">nombre</span><span class="o">,</span> <span class="nt">cif</span><span class="o">,</span> <span class="nt">diasentrega</span><span class="o">?)</span><span class="k">&gt;</span>
                <span class="k">&lt;!ELEMENT</span> <span class="nt">nombre</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
                <span class="k">&lt;!ELEMENT</span> <span class="nt">cif</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
                <span class="k">&lt;!ELEMENT</span> <span class="nt">diasentrega</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
                <span class="k">]</span>
        <span class="k">&gt;</span>
</pre></div>
</div>
<p>Esto significa lo siguiente:</p>
<ul class="simple">
<li><p>Se establece el tipo de documento <code class="docutils literal notranslate"><span class="pre">listaclientes</span></code> que consta de una serie de elementos (dentro del corchete)</p></li>
<li><p>Un elemento <code class="docutils literal notranslate"><span class="pre">listaclientes</span></code> consta de uno o más clientes. El signo <code class="docutils literal notranslate"><span class="pre">+</span></code> significa «uno o más».</p></li>
<li><p>Un cliente tiene un nombre y un cif. También puede tener un elemento <code class="docutils literal notranslate"><span class="pre">diasentrega</span></code> que puede o no aparecer (el signo <code class="docutils literal notranslate"><span class="pre">?</span></code> significa «0 o 1 veces»).</p></li>
<li><p>Un <code class="docutils literal notranslate"><span class="pre">nombre</span></code> no tiene más elementos dentro, solo caracteres (<code class="docutils literal notranslate"><span class="pre">#PCDATA</span></code>)</p></li>
<li><p>Un <code class="docutils literal notranslate"><span class="pre">CIF</span></code> solo consta de caracteres.</p></li>
<li><p>Un elemento <code class="docutils literal notranslate"><span class="pre">diasentrega</span></code> consta solo de caracteres.</p></li>
</ul>
<p>La solución completa sería así:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE listaclientes [</span>
<span class="cp">                &lt;!ELEMENT listaclientes (cliente+)&gt;</span>
                <span class="cp">&lt;!ELEMENT cliente (nombre, cif, diasentrega?)&gt;</span>
                <span class="cp">&lt;!ELEMENT nombre (#PCDATA)&gt;</span>
                <span class="cp">&lt;!ELEMENT cif (#PCDATA)&gt;</span>
                <span class="cp">&lt;!ELEMENT diasentrega (#PCDATA)&gt;</span>
        ]&gt;
<span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mercasa<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Acer SL<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5121554<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
</section>
<section id="combinaciones-de-cuantificadores-y-listas-de-opciones">
<h3>Combinaciones de cuantificadores y listas de opciones<a class="headerlink" href="#combinaciones-de-cuantificadores-y-listas-de-opciones" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Hay un problema cuando algunas reglas involucran estructuras complejas. Por ejemplo, sin pensamos en una descripción como : «Dentro de listaventas, primero habrá una secuencia de
elementos ventapc y despues ventamonitor» entonces este fichero <em>sí debería aceptarse</em></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaventas&gt;</span>
    <span class="nt">&lt;ventapc&gt;</span>100<span class="nt">&lt;/ventapc&gt;</span>
    <span class="nt">&lt;ventapc&gt;</span>300<span class="nt">&lt;/ventapc&gt;</span>
    <span class="nt">&lt;ventapc&gt;</span>400<span class="nt">&lt;/ventapc&gt;</span>
    <span class="nt">&lt;ventamonitor&gt;</span>200<span class="nt">&lt;/ventamonitor&gt;</span>
    <span class="nt">&lt;ventamonitor&gt;</span>400<span class="nt">&lt;/ventamonitor&gt;</span>
    <span class="nt">&lt;ventamonitor&gt;</span>500<span class="nt">&lt;/ventamonitor&gt;</span>
<span class="nt">&lt;/listaventas&gt;</span>
</pre></div>
</div>
<p>Y este fichero no debería aceptarse:</p>
<p>Pues bien, la regla sería esta: en ella se pone <strong>una secuencia SEGUIDA DE otra secuencia</strong></p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">listaventas</span> <span class="o">(</span><span class="nt">ventapc</span><span class="o">+,</span><span class="nt">ventamonitor</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">ventapc</span>      <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">ventamonitor</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>Supongamos esta otra descripción: «Dentro de listaventas, puede haber cualquier orden de elementos ventapc y ventamonitor, se pueden repetir las veces que hagan falta en cualquier orden e incluso intercalados». Es decir, esto se acepta</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">listaventas</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ventapc</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">ventapc</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ventapc</span><span class="p">&gt;</span>300<span class="p">&lt;/</span><span class="nt">ventapc</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ventapc</span><span class="p">&gt;</span>400<span class="p">&lt;/</span><span class="nt">ventapc</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ventamonitor</span><span class="p">&gt;</span>200<span class="p">&lt;/</span><span class="nt">ventamonitor</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ventamonitor</span><span class="p">&gt;</span>400<span class="p">&lt;/</span><span class="nt">ventamonitor</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ventamonitor</span><span class="p">&gt;</span>500<span class="p">&lt;/</span><span class="nt">ventamonitor</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">listaventas</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Pero esto también</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">listaventas</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ventapc</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">ventapc</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ventamonitor</span><span class="p">&gt;</span>200<span class="p">&lt;/</span><span class="nt">ventamonitor</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ventapc</span><span class="p">&gt;</span>300<span class="p">&lt;/</span><span class="nt">ventapc</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ventapc</span><span class="p">&gt;</span>400<span class="p">&lt;/</span><span class="nt">ventapc</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ventamonitor</span><span class="p">&gt;</span>400<span class="p">&lt;/</span><span class="nt">ventamonitor</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">listaventas</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Pues bien, la DTD sería la siguiente:</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">listaventas</span> <span class="o">(</span><span class="nt">ventapc</span><span class="o">|</span><span class="nt">ventamonitor</span><span class="o">)+</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">ventapc</span>      <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">ventamonitor</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>Compárese con el anterior</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;!ELEMENT listaventas (ventapc+, ventamonitor+)&gt;
&lt;!ELEMENT ventapc      (#PCDATA)&gt;
&lt;!ELEMENT ventamonitor (#PCDATA)&gt;
</pre></div>
</div>
<p>El anterior obliga a llevar un orden, pero en el ejercicio se aceptaba el «desorden».</p>
<p>Pregunta: <strong>¿Por qué esto está mal?</strong></p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">listaventas</span> <span class="o">(</span><span class="nt">ventapc</span><span class="o">,</span><span class="nt">ventamonitor</span><span class="o">)+</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">ventapc</span>      <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">ventamonitor</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>Está mal porque obliga a «escribir secuencias de parejas ventapc, ventamonitor como en el fichero siguiente».</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaventas&gt;</span>
    <span class="nt">&lt;ventapc&gt;</span>100<span class="nt">&lt;/ventapc&gt;</span>
    <span class="nt">&lt;ventamonitor&gt;</span>400<span class="nt">&lt;/ventamonitor&gt;</span>
    <span class="nt">&lt;ventapc&gt;</span>100<span class="nt">&lt;/ventapc&gt;</span>
    <span class="nt">&lt;ventamonitor&gt;</span>400<span class="nt">&lt;/ventamonitor&gt;</span>
    <span class="nt">&lt;ventapc&gt;</span>100<span class="nt">&lt;/ventapc&gt;</span>
    <span class="nt">&lt;ventamonitor&gt;</span>400<span class="nt">&lt;/ventamonitor&gt;</span>
<span class="nt">&lt;/listaventas&gt;</span>
</pre></div>
</div>
<p>Y esto NO ERA LO QUE SE PEDÍA.</p>
<p>Ahora se exige un fichero en el que pase una de estas dos cosas de acuerdo a esta descripción: «los elementos pueden aparecer en cualquier orden, pero en en fichero solo pueden aparecer ventas o compras».</p>
<p>O sea, que esto sí es válido</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">listaventas</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">ventapc</span><span class="o">&gt;</span><span class="mi">800</span><span class="o">&lt;/</span><span class="n">ventapc</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">ventamonitor</span><span class="o">&gt;</span><span class="mi">800</span><span class="o">&lt;/</span><span class="n">ventamonitor</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">listaventas</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Y esto otro también es válido:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">listaventas</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">comprapc</span><span class="o">&gt;</span><span class="mi">100</span><span class="o">&lt;/</span><span class="n">comprapc</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">compramonitor</span><span class="o">&gt;</span><span class="mi">3000</span><span class="o">&lt;/</span><span class="n">compramonitor</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">listaventas</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Pero esto no está permitido</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">listaventas</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">ventapc</span><span class="o">&gt;</span><span class="mi">100</span><span class="o">&lt;/</span><span class="n">ventapc</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">compramonitor</span><span class="o">&gt;</span><span class="mi">3000</span><span class="o">&lt;/</span><span class="n">compramonitor</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">listaventas</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Pues bien, la regla es esta:</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">listaventas</span>  <span class="o">(</span> <span class="o">(</span><span class="nt">ventapc</span> <span class="o">|</span><span class="nt">ventamonitor</span> <span class="o">)+</span> <span class="o">|</span>
                         <span class="o">(</span><span class="nt">comprapc</span><span class="o">|</span><span class="nt">compramonitor</span><span class="o">)+</span> <span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">ventapc</span>       <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">ventamonitor</span>  <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">comprapc</span>      <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">compramonitor</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
</section>
<section id="ejemplo-de-dtd-productos">
<h3>Ejemplo de DTD (productos)<a class="headerlink" href="#ejemplo-de-dtd-productos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se pide un conjunto de reglas en forma de DTD para definir qué se permitirá en los archivos XML de datos de una empresa de fabricación:</p>
<ul class="simple">
<li><p>La raíz es &lt;productos&gt;</p></li>
<li><p>Dentro de productos puede haber &lt;raton&gt; o &lt;teclado&gt; que pueden repetirse e ir en cualquier orden (RRTT, T, TR, TTRR)</p></li>
<li><p>Todo &lt;raton&gt; tiene siempre un &lt;codigo&gt; y puede o no tener una &lt;descripción&gt;.</p></li>
<li><p>Todo &lt;teclado&gt; tiene siempre un &lt;codigo&gt;, debe llevar siempre una &lt;descripcion&gt; y puede o no tener un &lt;peso&gt;</p></li>
</ul>
<p>Elaborar la DTD que formaliza estas reglas.</p>
<p>Analicemos algunas posibilidades para la raíz,por ejemplo esta:</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">productos</span> <span class="o">(</span><span class="nt">raton</span><span class="o">,</span><span class="nt">teclado</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>Esto está MAL. Exige que dentro de productos haya exactamente
un ratón y despues un teclado, y solo uno de cada.</p>
<p>Veamos otra:</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">productos</span> <span class="o">(</span><span class="nt">raton</span><span class="o">,</span> <span class="nt">teclado</span><span class="o">)+</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>También está MAL. Exige que haya raton y despues teclado. Es cierto que permite repetir elementos, pero esa repetición es de la pareja, es decir obligamos a que los ficheros sean así:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;raton&gt;</span>
<span class="nt">&lt;/raton&gt;</span>
<span class="nt">&lt;teclado&gt;</span>
<span class="nt">&lt;/teclado&gt;</span>
<span class="nt">&lt;raton&gt;</span>
<span class="nt">&lt;/raton&gt;</span>
<span class="nt">&lt;teclado&gt;</span>
<span class="nt">&lt;/teclado&gt;</span>
<span class="nt">&lt;raton&gt;</span>
<span class="nt">&lt;/raton&gt;</span>
<span class="nt">&lt;teclado&gt;</span>
<span class="nt">&lt;/teclado&gt;</span>
</pre></div>
</div>
<p>Echemos un vistazo a otra posible regla para la raíz:</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">productos</span> <span class="o">(</span><span class="nt">raton</span><span class="o">,</span> <span class="nt">teclado</span><span class="o">)*</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>Esto también está mal. Permite que no haya nada dentro de productos, pero ni siquiera nos hablan de eso.</p>
<p>Veamos otra:</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">productos</span> <span class="o">(</span><span class="nt">raton</span><span class="o">|</span><span class="nt">teclado</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>Esto también está mal porque nos ofrece que dentro de «productos» haya un ratón o un teclado. Es cierto que ofrece algo de flexibilidad, pero aún no es lo que queremos.</p>
<p>Otra regla raíz equivocada sería esta:</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">productos</span> <span class="o">(</span><span class="nt">raton</span><span class="o">+|</span><span class="nt">teclado</span><span class="o">+)</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>Esto también está mal. Permite que dentro de productos haya una sola de estas cosas</p>
<ul class="simple">
<li><p>O una secuencia de «raton»</p></li>
<li><p>O una secuencia de «teclado»</p></li>
</ul>
<p>¡Pero no permite secuencias con mezcla!</p>
<p>Veamos, ahora sí, una solución correcta</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">productos</span>   <span class="o">(</span><span class="nt">raton</span><span class="o">|</span><span class="nt">teclado</span><span class="o">)*</span> <span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">raton</span>       <span class="o">(</span><span class="nt">codigo</span><span class="o">,</span> <span class="nt">descripcion</span><span class="o">?)</span> <span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">codigo</span>      <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">descripcion</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">teclado</span>     <span class="o">(</span><span class="nt">codigo</span><span class="o">,</span><span class="nt">descripcion</span><span class="o">,</span><span class="nt">peso</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">peso</span>        <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>El siguiente fichero debe validarse correctamente:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;productos&gt;</span>
<span class="nt">&lt;/productos&gt;</span>
</pre></div>
</div>
<p>Y el siguiente también</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;productos&gt;</span>
    <span class="nt">&lt;teclado&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>T1<span class="nt">&lt;/codigo&gt;</span>
        <span class="nt">&lt;descripcion&gt;</span>Teclado inalamb.<span class="nt">&lt;/descripcion&gt;</span>
    <span class="nt">&lt;/teclado&gt;</span>
<span class="nt">&lt;/productos&gt;</span>
</pre></div>
</div>
<p>Y este también (a pesar del flagrante error en el peso)</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;productos&gt;</span>
    <span class="nt">&lt;raton&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>R1<span class="nt">&lt;/codigo&gt;</span>
    <span class="nt">&lt;/raton&gt;</span>
    <span class="nt">&lt;teclado&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>T1<span class="nt">&lt;/codigo&gt;</span>
        <span class="nt">&lt;descripcion&gt;</span>Teclado inalamb.<span class="nt">&lt;/descripcion&gt;</span>
        <span class="nt">&lt;peso&gt;</span>|@¬|@~||@~<span class="nt">&lt;/peso&gt;</span>
    <span class="nt">&lt;/teclado&gt;</span>
<span class="nt">&lt;/productos&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="ejercicio-i-dtd">
<h2>Ejercicio I (DTD)<a class="headerlink" href="#ejercicio-i-dtd" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Unos programadores necesitan un formato de fichero para que sus distintos programas intercambien información sobre ventas. El acuerdo al que han llegado es que su XML debería tener esta estructura:</p>
<ul>
<li><p>El elemento raíz será <code class="docutils literal notranslate"><span class="pre">&lt;listaventas&gt;</span></code></p></li>
<li><p>Toda <code class="docutils literal notranslate"><span class="pre">&lt;listaventas&gt;</span></code> tiene una o más ventas.</p></li>
<li><p>Toda <code class="docutils literal notranslate"><span class="pre">&lt;venta&gt;</span></code> tiene los siguientes datos:</p>
<blockquote>
<div><ul class="simple">
<li><p>Importe.</p></li>
<li><p>Comprador.</p></li>
<li><p>Vendedor.</p></li>
<li><p>Fecha (optativa).</p></li>
<li><p>Un codigo de factura.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE listaventas[</span>
<span class="cp">  &lt;!ELEMENT listaventas (venta+)&gt;</span>
  <span class="cp">&lt;!ELEMENT venta (importe, comprador, vendedor, fecha?, codigofactura)&gt;</span>
  <span class="cp">&lt;!ELEMENT importe (#PCDATA)&gt;</span>
  <span class="cp">&lt;!ELEMENT comprador (#PCDATA)&gt;</span>
  <span class="cp">&lt;!ELEMENT vendedor (#PCDATA)&gt;</span>
  <span class="cp">&lt;!ELEMENT fecha (#PCDATA)&gt;</span>
  <span class="cp">&lt;!ELEMENT codigofactura (#PCDATA)&gt;</span>

]&gt;

<span class="nt">&lt;listaventas&gt;</span>
  <span class="nt">&lt;venta&gt;</span>
        <span class="nt">&lt;importe&gt;</span>1500<span class="nt">&lt;/importe&gt;</span>
        <span class="nt">&lt;comprador&gt;</span>Wile E.Coyote<span class="nt">&lt;/comprador&gt;</span>
        <span class="nt">&lt;vendedor&gt;</span>ACME<span class="nt">&lt;/vendedor&gt;</span>
        <span class="nt">&lt;codigofactura&gt;</span>E17<span class="nt">&lt;/codigofactura&gt;</span>
  <span class="nt">&lt;/venta&gt;</span>
  <span class="nt">&lt;venta&gt;</span>
        <span class="nt">&lt;importe&gt;</span>750<span class="nt">&lt;/importe&gt;</span>
        <span class="nt">&lt;comprador&gt;</span>Elmer Fudd<span class="nt">&lt;/comprador&gt;</span>
        <span class="nt">&lt;vendedor&gt;</span>ACME<span class="nt">&lt;/vendedor&gt;</span>
        <span class="nt">&lt;fecha&gt;</span>27-2-2015<span class="nt">&lt;/fecha&gt;</span>
        <span class="nt">&lt;codigofactura&gt;</span>E18<span class="nt">&lt;/codigofactura&gt;</span>
  <span class="nt">&lt;/venta&gt;</span>
<span class="nt">&lt;/listaventas&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-ii-dtd">
<h2>Ejercicio II (DTD)<a class="headerlink" href="#ejercicio-ii-dtd" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Crear un XML de ejemplo y la DTD asociada para unos programadores que programan una aplicación de pedidos donde hay una lista de pedidos con 0 o más pedidos. Cada pedido tiene un número de serie, una cantidad y un peso que puede ser opcional.</p>
<section id="solucion">
<h3>Solución<a class="headerlink" href="#solucion" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Este ejemplo es un documento XML válido.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>

<span class="cp">&lt;!DOCTYPE listapedidos [</span>
<span class="cp">        &lt;!ELEMENT listapedidos (pedido*)&gt;</span>
        <span class="cp">&lt;!ELEMENT pedido (numeroserie, cantidad, peso?)&gt;</span>
        <span class="cp">&lt;!ELEMENT numeroserie (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT cantidad (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT peso (#PCDATA)&gt;</span>
]&gt;

<span class="nt">&lt;listapedidos&gt;</span>
<span class="nt">&lt;/listapedidos&gt;</span>
</pre></div>
</div>
<p>Este documento <strong>no es válido</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>

<span class="cp">&lt;!DOCTYPE listapedidos [</span>
<span class="cp">        &lt;!ELEMENT listapedidos (pedido*)&gt;</span>
        <span class="cp">&lt;!ELEMENT pedido (numeroserie, cantidad, peso?)&gt;</span>
        <span class="cp">&lt;!ELEMENT numeroserie (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT cantidad (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT peso (#PCDATA)&gt;</span>
]&gt;

<span class="nt">&lt;listapedidos&gt;</span>
        <span class="nt">&lt;pedido&gt;</span>
                <span class="nt">&lt;numeroserie&gt;</span>23332244<span class="nt">&lt;/numeroserie&gt;</span>
        <span class="nt">&lt;/pedido&gt;</span>
<span class="nt">&lt;/listapedidos&gt;</span>
</pre></div>
</div>
<p>Este documento <strong>sí es válido</strong>. Las DTD solo se ocupan de determinar qué elementos hay y en qué orden, pero no se ocupan de lo que hay dentro de los elementos.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>

<span class="cp">&lt;!DOCTYPE listapedidos [</span>
<span class="cp">        &lt;!ELEMENT listapedidos (pedido*)&gt;</span>
        <span class="cp">&lt;!ELEMENT pedido (numeroserie, cantidad, peso?)&gt;</span>
        <span class="cp">&lt;!ELEMENT numeroserie (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT cantidad (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT peso (#PCDATA)&gt;</span>
]&gt;

<span class="nt">&lt;listapedidos&gt;</span>
        <span class="nt">&lt;pedido&gt;</span>
                <span class="nt">&lt;numeroserie&gt;</span>23332244<span class="nt">&lt;/numeroserie&gt;</span>
                <span class="nt">&lt;cantidad&gt;</span>ññlñ<span class="nt">&lt;/cantidad&gt;</span>
        <span class="nt">&lt;/pedido&gt;</span>
<span class="nt">&lt;/listapedidos&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="ejercicio-iii">
<h2>Ejercicio III<a class="headerlink" href="#ejercicio-iii" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Se desea crear una gramática para ficheros de datos en los que se ha decidido contemplar lo siguiente:</p>
<ul class="simple">
<li><p>El fichero debe llevar una raíz <code class="docutils literal notranslate"><span class="pre">&lt;productos&gt;</span></code></p></li>
<li><p>Dentro debe haber uno o más elementos <code class="docutils literal notranslate"><span class="pre">&lt;producto&gt;</span></code></p></li>
<li><p>Dentro de productos debe haber alguno de estos <code class="docutils literal notranslate"><span class="pre">&lt;producto&gt;</span></code> , <code class="docutils literal notranslate"><span class="pre">&lt;raton&gt;</span></code> , <code class="docutils literal notranslate"><span class="pre">&lt;teclado&gt;</span></code> o <code class="docutils literal notranslate"><span class="pre">&lt;monitor&gt;</span></code></p></li>
<li><p>Todo ratón, teclado o monitor tiene siempre un código.</p></li>
<li><p>Todo ratón, teclado o monitor puede llevar un nombre.</p></li>
<li><p>Todo ratón, teclado o monitor puede llevar una descripción.</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;productos&gt;</span>
    <span class="nt">&lt;producto&gt;</span>
        <span class="nt">&lt;raton&gt;</span>
            <span class="nt">&lt;codigo&gt;</span>27A<span class="nt">&lt;/codigo&gt;</span>
        <span class="nt">&lt;/raton&gt;</span>
    <span class="nt">&lt;/producto&gt;</span>
    <span class="nt">&lt;producto&gt;</span>
        <span class="nt">&lt;teclado&gt;</span>
            <span class="nt">&lt;codigo&gt;</span>28D<span class="nt">&lt;/codigo&gt;</span>
            <span class="nt">&lt;descripcion&gt;</span>Teclado en Español<span class="nt">&lt;/descripcion&gt;</span>
        <span class="nt">&lt;/teclado&gt;</span>
    <span class="nt">&lt;/producto&gt;</span>
<span class="nt">&lt;/productos&gt;</span>
</pre></div>
</div>
<section id="solucion-al-ejercicio-iii">
<h3>Solución al ejercicio III<a class="headerlink" href="#solucion-al-ejercicio-iii" title="Enlace permanente a este encabezado">¶</a></h3>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">productos</span> <span class="o">(</span><span class="nt">producto</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">producto</span>  <span class="o">(</span><span class="nt">raton</span><span class="o">|</span><span class="nt">teclado</span><span class="o">|</span><span class="nt">monitor</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">raton</span>     <span class="o">(</span><span class="nt">codigo</span><span class="o">,</span> <span class="nt">nombre</span><span class="o">?,</span> <span class="nt">descripcion</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">teclado</span>   <span class="o">(</span><span class="nt">codigo</span><span class="o">,</span> <span class="nt">nombre</span><span class="o">?,</span> <span class="nt">descripcion</span><span class="o">?)</span><span class="k">&gt;</span>    <span class="k">&lt;!ELEMENT</span> <span class="nt">monitor</span>   <span class="o">(</span><span class="nt">codigo</span><span class="o">,</span> <span class="nt">nombre</span><span class="o">?,</span> <span class="nt">descripcion</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">codigo</span>    <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">nombre</span>    <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">descripcion</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="ejercicio-iv">
<h2>Ejercicio IV<a class="headerlink" href="#ejercicio-iv" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Unos programadores necesitan un formato de fichero para que sus distintos programas intercambien información sobre ventas. El acuerdo al que han llegado es que su XML debería tener esta estructura:</p>
<ul class="simple">
<li><p>El elemento raíz será &lt;listaventas&gt;</p></li>
<li><p>Toda &lt;listaventas&gt; tiene una o más &lt;venta&gt;.</p></li>
<li><dl class="simple">
<dt>Toda &lt;venta&gt; tiene los siguientes datos:</dt><dd><ul>
<li><p>Importe.</p></li>
<li><p>Comprador.</p></li>
<li><p>Vendedor.</p></li>
<li><p>Fecha (optativa).</p></li>
<li><p>Un codigo de factura.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<section id="solucion-al-ejercicio-iv">
<h3>Solución al ejercicio IV<a class="headerlink" href="#solucion-al-ejercicio-iv" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Por ahora no se dará la solución de este ejercicio. Inténtalo y si no puedes pide ayuda al profesor o escríbele un email para averiguar como resolverlo.</p>
</section>
</section>
<section id="ejercicio-v-dtd">
<h2>Ejercicio V DTD<a class="headerlink" href="#ejercicio-v-dtd" title="Enlace permanente a este encabezado">¶</a></h2>
<p>En un departamento se ha decidido la siguiente estructura para ficheros de datos que se tengan que mover de unos software a otros.</p>
<ul class="simple">
<li><p>La raíz debe ser el elemento <code class="docutils literal notranslate"><span class="pre">&lt;listacompras&gt;</span></code></p></li>
<li><p>Dentro de <code class="docutils literal notranslate"><span class="pre">&lt;listacompras&gt;</span></code> debe haber uno o más elementos <code class="docutils literal notranslate"><span class="pre">&lt;venta&gt;</span></code></p></li>
<li><p>Una <code class="docutils literal notranslate"><span class="pre">venta</span></code> puede llevar dentro uno de dos: <code class="docutils literal notranslate"><span class="pre">&lt;ventaacredito&gt;</span></code> o <code class="docutils literal notranslate"><span class="pre">&lt;ventainmediata&gt;</span></code></p></li>
<li><p>Un elemento <code class="docutils literal notranslate"><span class="pre">&lt;ventaacredito&gt;</span></code> consta de : un elemento <code class="docutils literal notranslate"><span class="pre">&lt;fechafinpago&gt;</span></code> que es optativo y un elemento <code class="docutils literal notranslate"><span class="pre">&lt;cantidad&gt;</span></code> que es obligatorio.</p></li>
<li><p>Un elemento <code class="docutils literal notranslate"><span class="pre">&lt;ventainmediata&gt;</span></code> lleva dentro dos cosas: un elemento <code class="docutils literal notranslate"><span class="pre">&lt;cantidad&gt;</span></code> que es obligatorio y un elemento <code class="docutils literal notranslate"><span class="pre">&lt;divisa&gt;</span></code> que también es obligatorio.</p></li>
</ul>
<section id="solucion-al-ejercicio-v">
<h3>Solución al ejercicio V<a class="headerlink" href="#solucion-al-ejercicio-v" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Puedes usar este ejemplo para hacer la validación:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listacompras&gt;</span>
    <span class="nt">&lt;venta&gt;</span>
        <span class="nt">&lt;ventaacredito&gt;</span>
            <span class="nt">&lt;fechafinpago&gt;</span>22-10-2021<span class="nt">&lt;/fechafinpago&gt;</span>
            <span class="nt">&lt;cantidad&gt;</span>21000<span class="nt">&lt;/cantidad&gt;</span>
        <span class="nt">&lt;/ventaacredito&gt;</span>
    <span class="nt">&lt;/venta&gt;</span>
    <span class="nt">&lt;venta&gt;</span>
        <span class="nt">&lt;ventainmediata&gt;</span>
            <span class="nt">&lt;cantidad&gt;</span>1800<span class="nt">&lt;/cantidad&gt;</span>
            <span class="nt">&lt;divisa&gt;</span>euros<span class="nt">&lt;/divisa&gt;</span>
        <span class="nt">&lt;/ventainmediata&gt;</span>
    <span class="nt">&lt;/venta&gt;</span>
    <span class="nt">&lt;venta&gt;</span>
        <span class="nt">&lt;ventaacredito&gt;</span>
            <span class="nt">&lt;cantidad&gt;</span>21000<span class="nt">&lt;/cantidad&gt;</span>
        <span class="nt">&lt;/ventaacredito&gt;</span>
    <span class="nt">&lt;/venta&gt;</span>
<span class="nt">&lt;/listacompras&gt;</span>
</pre></div>
</div>
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
Una posible solución sería:</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">listacompras</span>   <span class="o">(</span><span class="nt">venta</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">venta</span>          <span class="o">(</span><span class="nt">ventaacredito</span><span class="o">|</span><span class="nt">ventainmediata</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">ventaacredito</span>  <span class="o">(</span><span class="nt">fechafinpago</span><span class="o">?,</span> <span class="nt">cantidad</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">ventainmediata</span> <span class="o">(</span><span class="nt">cantidad</span><span class="o">,</span> <span class="nt">divisa</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">fechafinpago</span>   <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">cantidad</span>       <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">divisa</span>         <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="ejercicio-vi-dtd">
<h2>Ejercicio VI DTD<a class="headerlink" href="#ejercicio-vi-dtd" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Un mayorista de productos de librería desea tener un formato de almacenamiento de datos para reflejar la información de su inventario.</p>
<ul class="simple">
<li><p>El elemento raíz debe ser <code class="docutils literal notranslate"><span class="pre">&lt;inventario&gt;</span></code></p></li>
<li><p>Dentro de inventario pueden ir elementos <code class="docutils literal notranslate"><span class="pre">&lt;lapiz&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;cuaderno&gt;</span></code> o <code class="docutils literal notranslate"><span class="pre">&lt;boligrafo&gt;</span></code> repetidos y en cualquier orden.</p></li>
<li><p>Todo <code class="docutils literal notranslate"><span class="pre">&lt;lapiz&gt;</span></code> puede tener un elemento <code class="docutils literal notranslate"><span class="pre">&lt;dureza&gt;</span></code></p></li>
<li><p>Todo cuaderno debe llevar dos elementos: <code class="docutils literal notranslate"><span class="pre">&lt;numhojas&gt;</span></code> y <code class="docutils literal notranslate"><span class="pre">&lt;estilo&gt;</span></code></p></li>
<li><p>Todo boligrafo lleva un <code class="docutils literal notranslate"><span class="pre">&lt;precio&gt;</span></code> y puede o no llevar un elemento <code class="docutils literal notranslate"><span class="pre">&lt;color&gt;</span></code></p></li>
</ul>
<p>El siguiente fichero debería ser validado por la DTD:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;inventario&gt;</span>
    <span class="nt">&lt;lapiz&gt;&lt;/lapiz&gt;</span>
    <span class="nt">&lt;lapiz&gt;</span>
        <span class="nt">&lt;dureza&gt;</span>H2<span class="nt">&lt;/dureza&gt;</span>
    <span class="nt">&lt;/lapiz&gt;</span>
    <span class="nt">&lt;cuaderno&gt;</span>
        <span class="nt">&lt;numhojas&gt;</span>80<span class="nt">&lt;/numhojas&gt;</span>
        <span class="nt">&lt;estilo&gt;</span>2 rayas<span class="nt">&lt;/estilo&gt;</span>
    <span class="nt">&lt;/cuaderno&gt;</span>
    <span class="nt">&lt;boligrafo&gt;</span>
        <span class="nt">&lt;precio&gt;</span>0.80<span class="nt">&lt;/precio&gt;</span>
    <span class="nt">&lt;/boligrafo&gt;</span>
    <span class="nt">&lt;cuaderno&gt;</span>
        <span class="nt">&lt;numhojas&gt;</span>100<span class="nt">&lt;/numhojas&gt;</span>
        <span class="nt">&lt;estilo&gt;</span>Cuadriculado<span class="nt">&lt;/estilo&gt;</span>
    <span class="nt">&lt;/cuaderno&gt;</span>
    <span class="nt">&lt;boligrafo&gt;</span>
        <span class="nt">&lt;precio&gt;</span>0.80<span class="nt">&lt;/precio&gt;</span>
        <span class="nt">&lt;color&gt;</span>Rojo<span class="nt">&lt;/color&gt;</span>
    <span class="nt">&lt;/boligrafo&gt;</span>
<span class="nt">&lt;/inventario&gt;</span>
</pre></div>
</div>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">inventario</span> <span class="o">(</span><span class="nt">cuaderno</span><span class="o">|</span><span class="nt">lapiz</span><span class="o">|</span><span class="nt">boligrafo</span><span class="o">)+</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">cuaderno</span>   <span class="o">(</span><span class="nt">numhojas</span><span class="o">,</span><span class="nt">estilo</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">numhojas</span>   <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">estilo</span>     <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">lapiz</span>      <span class="o">(</span><span class="nt">dureza</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">dureza</span>     <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">boligrafo</span>  <span class="o">(</span><span class="nt">precio</span><span class="o">,</span> <span class="nt">color</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">precio</span>     <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">color</span>      <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-con-atributos">
<h2>Ejercicio (con atributos)<a class="headerlink" href="#ejercicio-con-atributos" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Unos programadores necesitan estructurar la información que intercambiarán los ficheros de sus aplicaciones para lo cual han determinado los requisitos siguientes.</p>
<ul class="simple">
<li><p>Los ficheros deben tener un elemento <code class="docutils literal notranslate"><span class="pre">&lt;listafacturas&gt;</span></code></p></li>
<li><p>Dentro de la lista debe haber una o más facturas.</p></li>
<li><p>Las facturas tienen un atributo <code class="docutils literal notranslate"><span class="pre">fecha</span></code> que es optativo.</p></li>
<li><p>Toda factura tiene un <code class="docutils literal notranslate"><span class="pre">emisor</span></code>, que es un elemento obligatorio y que debe tener un atributo <code class="docutils literal notranslate"><span class="pre">cif</span></code> que es obligatorio. Dentro de <code class="docutils literal notranslate"><span class="pre">emisor</span></code> debe haber un elemento <code class="docutils literal notranslate"><span class="pre">nombre</span></code>, que es obligatorio y puede o no haber un elemento <code class="docutils literal notranslate"><span class="pre">volumenventas</span></code>.</p></li>
<li><p>Toda factura debe tener un elemento <code class="docutils literal notranslate"><span class="pre">pagador</span></code>, el cual tiene exactamente la misma estructura que <code class="docutils literal notranslate"><span class="pre">emisor</span></code>.</p></li>
<li><p>Toda factura tiene un elemento <code class="docutils literal notranslate"><span class="pre">importe</span></code>.</p></li>
</ul>
<section id="solucion-ejercicio-con-atributos">
<h3>Solución ejercicio con atributos<a class="headerlink" href="#solucion-ejercicio-con-atributos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>La siguiente DTD refleja los requisitos indicados en el enunciado.</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">listafacturas</span> <span class="o">(</span><span class="nt">factura</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">factura</span> <span class="o">(</span><span class="nt">emisor</span><span class="o">,</span> <span class="nt">pagador</span><span class="o">,</span> <span class="nt">importe</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">factura</span> <span class="na">fecha</span> <span class="kc">CDATA</span> <span class="kc">#IMPLIED</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">emisor</span> <span class="o">(</span><span class="nt">nombre</span><span class="o">,</span> <span class="nt">volumenventas</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">nombre</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">emisor</span> <span class="na">cif</span> <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">volumenventas</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">pagador</span> <span class="o">(</span><span class="nt">nombre</span><span class="o">,</span> <span class="nt">volumenventas</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">pagador</span> <span class="na">cif</span> <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">importe</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>Y el XML siguiente refleja un posible documento. Puede comprobarse que es válido con respecto a la DTD.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE listafacturas SYSTEM &quot;ListaFacturas.dtd&quot;&gt;</span>
<span class="nt">&lt;listafacturas&gt;</span>
  <span class="nt">&lt;factura</span> <span class="na">fecha=</span><span class="s">&quot;11-2-2015&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;emisor</span> <span class="na">cif=</span><span class="s">&quot;123&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;nombre&gt;</span>ACME<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/emisor&gt;</span>
        <span class="nt">&lt;pagador</span> <span class="na">cif=</span><span class="s">&quot;234&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;nombre&gt;</span>ACME Inc<span class="nt">&lt;/nombre&gt;</span>
          <span class="nt">&lt;volumenventas&gt;</span>2000<span class="nt">&lt;/volumenventas&gt;</span>
        <span class="nt">&lt;/pagador&gt;</span>
        <span class="nt">&lt;importe&gt;</span>2500<span class="nt">&lt;/importe&gt;</span>
  <span class="nt">&lt;/factura&gt;</span>
<span class="nt">&lt;/listafacturas&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="ejercicio">
<h2>Ejercicio<a class="headerlink" href="#ejercicio" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Un instituto necesita registrar los cursos y alumnos que estudian en él y necesita una DTD para comprobar los documentos XML de los programas que utiliza:</p>
<ul class="simple">
<li><p>Tiene que haber un elemento raíz <code class="docutils literal notranslate"><span class="pre">listacursos</span></code>. Tiene que haber uno o más cursos.</p></li>
<li><p>Un curso tiene uno o más alumnos</p></li>
<li><p>Todo alumno tiene un DNI, un nombre y un apellido, puede que tenga segundo apellido o no.</p></li>
<li><p>Un alumno escoge una lista de asignaturas donde habrá una o más asignaturas. Toda asignatura tiene un nombre, un atributo código y un profesor.</p></li>
<li><p>Un profesor tiene un NRP (Número de Registro Personal), un nombre y un apellido (también puede tener o no un segundo apellido).</p></li>
</ul>
<section id="solucion-completa">
<h3>Solución completa<a class="headerlink" href="#solucion-completa" title="Enlace permanente a este encabezado">¶</a></h3>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!ELEMENT listacursos (curso)+&gt;</span>
<span class="cp">&lt;!ELEMENT curso (alumno)+&gt;</span>
<span class="cp">&lt;!ELEMENT alumno (dni, nombre,</span>
<span class="cp">                    ap1, ap2?, listaasignaturas)&gt;</span>

<span class="cp">&lt;!ELEMENT listaasignaturas (asignatura+)&gt;</span>
<span class="cp">&lt;!ELEMENT asignatura (nombre, profesor)&gt;</span>
<span class="cp">&lt;!ATTLIST asignatura codigo CDATA #REQUIRED&gt;</span>

<span class="cp">&lt;!ELEMENT profesor (nrp, nombre, ap1, ap2?)&gt;</span>

<span class="cp">&lt;!ELEMENT dni    (#PCDATA)&gt;</span>
<span class="cp">&lt;!ELEMENT nombre (#PCDATA)&gt;</span>
<span class="cp">&lt;!ELEMENT ap1    (#PCDATA)&gt;</span>
<span class="cp">&lt;!ELEMENT ap2    (#PCDATA)&gt;</span>
<span class="cp">&lt;!ELEMENT nrp    (#PCDATA)&gt;</span>
</pre></div>
</div>
<p>Un ejemplo de fichero válido:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listacursos&gt;</span>
    <span class="nt">&lt;curso&gt;</span>
        <span class="nt">&lt;alumno&gt;</span>
            <span class="nt">&lt;dni&gt;</span>44e<span class="nt">&lt;/dni&gt;</span>
            <span class="nt">&lt;nombre&gt;</span>Juan<span class="nt">&lt;/nombre&gt;</span>
            <span class="nt">&lt;ap1&gt;</span>Sanchez<span class="nt">&lt;/ap1&gt;</span>
            <span class="nt">&lt;listaasignaturas&gt;</span>
                <span class="nt">&lt;asignatura</span> <span class="na">codigo=</span><span class="s">&quot;LM1&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;nombre&gt;</span>Leng marcas<span class="nt">&lt;/nombre&gt;</span>
                    <span class="nt">&lt;profesor&gt;</span>
                        <span class="nt">&lt;nrp&gt;</span>8<span class="nt">&lt;/nrp&gt;</span>
                        <span class="nt">&lt;nombre&gt;</span>Oscar<span class="nt">&lt;/nombre&gt;</span>
                        <span class="nt">&lt;ap1&gt;</span>Gomez<span class="nt">&lt;/ap1&gt;</span>
                    <span class="nt">&lt;/profesor&gt;</span>
                <span class="nt">&lt;/asignatura&gt;</span>
            <span class="nt">&lt;/listaasignaturas&gt;</span>
        <span class="nt">&lt;/alumno&gt;</span>
    <span class="nt">&lt;/curso&gt;</span>
<span class="nt">&lt;/listacursos&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="otras-caracteristicas-de-xml">
<h2>Otras características de XML<a class="headerlink" href="#otras-caracteristicas-de-xml" title="Enlace permanente a este encabezado">¶</a></h2>
<section id="atributos">
<h3>Atributos<a class="headerlink" href="#atributos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Un atributo XML funciona exactamente igual que un atributo HTML, en concreto un atributo es un trozo de información que acompaña a la etiqueta, en lugar de ir dentro del elemento.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;pedido</span> <span class="na">codigo=</span><span class="s">&quot;20C&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>
                ...
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<p>En este caso, la etiqueta <code class="docutils literal notranslate"><span class="pre">pedido</span></code> tiene un atributo <code class="docutils literal notranslate"><span class="pre">codigo</span></code>.</p>
<p>¿Cuando debemos usar atributos y cuando debemos usar elementos? Resulta que el ejemplo anterior también se podría haber permitido hacerlo así:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>20C<span class="nt">&lt;/codigo&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>
                ...
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<p>Hay muchas discusiones sobre qué meter dentro de elemento o atributo. Sin embargo, los expertos coinciden en señalar que en caso de duda es mejor el segundo.</p>
<p>La definición de atributos se hace por medio de una directiva llamada <code class="docutils literal notranslate"><span class="pre">ATTLIST</span></code>. En concreto si quisieramos permitir un atributo <code class="docutils literal notranslate"><span class="pre">código</span></code> en el elemento <code class="docutils literal notranslate"><span class="pre">pedido</span></code> se haría algo así.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE pedido[</span>
<span class="cp">        &lt;!ELEMENT pedido (contenido)&gt;</span>
        <span class="cp">&lt;!ELEMENT contenido (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ATTLIST pedido codigo CDATA #REQUIRED&gt;</span>
]&gt;

<span class="nt">&lt;pedido</span> <span class="na">codigo=</span><span class="s">&quot;20C&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>Pedido de cosas<span class="nt">&lt;/contenido&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<p>En concreto este código pone que el elemento <code class="docutils literal notranslate"><span class="pre">pedido</span></code> tiene un atributo <code class="docutils literal notranslate"><span class="pre">código</span></code> con datos carácter dentro y que es obligatorio que esté presente (un atributo optativo en vez de <code class="docutils literal notranslate"><span class="pre">#REQUIRED</span></code> usará <code class="docutils literal notranslate"><span class="pre">#IMPLIED</span></code>)</p>
<p>Si probamos esto, también validará porque el atributo es <em>optativo</em></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE pedido[</span>
<span class="cp">        &lt;!ELEMENT pedido (contenido)&gt;</span>
        <span class="cp">&lt;!ELEMENT contenido (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ATTLIST pedido codigo CDATA #IMPLIED&gt;</span>
]&gt;

<span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>Pedido de cosas<span class="nt">&lt;/contenido&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
</section>
<section id="elementos-vacios">
<h3>Elementos vacíos<a class="headerlink" href="#elementos-vacios" title="Enlace permanente a este encabezado">¶</a></h3>
<p>En ocasiones, un elemento en especial puede interesarnos que vaya vacío porque simplemente no contiene mucha información de relevancia. Por ejemplo en HTML podemos encontrarnos esto:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>Texto texto...<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
</pre></div>
</div>
<p>Los elementos vacíos suelen utilizar para indicar pequeñas informaciones que no deseamos meter en atributos y que de todas formas tampoco son de demasiada relevancia.</p>
<p>Un elemento vacío se indica poniendo <code class="docutils literal notranslate"><span class="pre">EMPTY</span></code> en lugar de <code class="docutils literal notranslate"><span class="pre">#PCDATA</span></code></p>
<p>Por supuesto, estas dos formas de usar un atributo son válidas:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;pagado&gt;&lt;/pagado&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>...<span class="nt">&lt;/contenido&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;pagado/&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>...<span class="nt">&lt;/contenido&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<p>La definición completa sería así:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE pedido[</span>
<span class="cp">        &lt;!ELEMENT pedido (pagado?,contenido)&gt;</span>
        <span class="cp">&lt;!ELEMENT pagado EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT contenido (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ATTLIST pedido codigo CDATA #IMPLIED&gt;</span>
]&gt;

<span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;pagado/&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>Pedido de cosas<span class="nt">&lt;/contenido&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
</section>
<section id="alternativas">
<h3>Alternativas<a class="headerlink" href="#alternativas" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Hasta ahora hemos indicado elementos donde un elemento puede aparecer o puede no aparecer, pero ¿qué ocurre si deseamos obligar a que aparezca una posibilidad entre varias?</p>
<p>Por ejemplo, supongamos que en un nuestro ejemplo de pedidos deseamos indicar si el pedido se entregó en almacén o a domicilio. A la fuerza todo pedido se entrega de alguna manera, sin embargo queremos exigir que en los XML aparezca una de esas dos alternativas. Los elementos alternativos se indican con la barra vertical <code class="docutils literal notranslate"><span class="pre">almacen|domicilio</span></code></p>
<p>Una tentación sería hacer esto (que está <strong>mal</strong>):</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE pedido[</span>
<span class="cp">        &lt;!ELEMENT pedido (pagado?, contenido, almacen?,domicilio?)&gt;</span>
        <span class="cp">&lt;!ELEMENT pagado EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT contenido (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT almacen (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT domicilio (#PCDATA&gt;</span>
]&gt;
</pre></div>
</div>
<p>Está mal porque se permite esto:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;pagado/&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>Ordenadores<span class="nt">&lt;/contenido&gt;</span>
        <span class="nt">&lt;almacen&gt;</span>Entregado el 20-2-2011<span class="nt">&lt;/almacen&gt;</span>
        <span class="nt">&lt;domicilio&gt;</span>Entregado el 20-2011<span class="nt">&lt;/domicilio&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<p>La forma <strong>correcta</strong> es esta:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE pedido[</span>
<span class="cp">        &lt;!ELEMENT pedido (pagado?, contenido, (almacen|domicilio)?&gt;</span>
        <span class="cp">&lt;!ELEMENT pagado EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT contenido (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT almacen (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT domicilio (#PCDATA&gt;</span>
]&gt;
<span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>Ordenadores<span class="nt">&lt;/contenido&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="id1">
<h2>Ejercicio<a class="headerlink" href="#id1" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Un mayorista informático necesita especificar las reglas de los elementos permitidos en las aplicaciones que utiliza en sus empresas, para ello ha indicado los siguientes requisitos:</p>
<ul class="simple">
<li><p>Una entrega consta de uno o más lotes.</p></li>
<li><p>Un lote tiene uno o más palés</p></li>
<li><p>Todo palé tiene una serie de elementos: número de cajas, contenido y peso y forma de manipulación.</p></li>
<li><p>El contenido consta de una serie de elementos: nombre del componente, procedencia (puede aparecer 0, 1 o más países), número de serie del componente, peso del componente individual y unidad de peso que puede aparecer o no.</p></li>
</ul>
<section id="id2">
<h3>Solución<a class="headerlink" href="#id2" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Observa como en la siguiente DTD se pone <code class="docutils literal notranslate"><span class="pre">procedencia?</span></code> y dentro de ella <code class="docutils literal notranslate"><span class="pre">pais+</span></code>. Esto nos permite que si aparece la procedencia se debe especificar uno o más países. Sin embargo si no queremos que aparezca ningun pais, el XML <strong>no necesita contener un elemento vacío</strong>.</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">entrega</span> <span class="o">(</span><span class="nt">lote</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">lote</span> <span class="o">(</span><span class="nt">pale</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">pale</span> <span class="o">(</span><span class="nt">numcajas</span><span class="o">,</span> <span class="nt">contenido</span><span class="o">,</span> <span class="nt">peso</span><span class="o">,</span> <span class="nt">formamanipulacion</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">numcajas</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">peso</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">formamanipulacion</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">contenido</span> <span class="o">(</span><span class="nt">nombrecomponente</span><span class="o">,</span> <span class="nt">procedencia</span><span class="o">?,</span>
                        <span class="nt">numserie</span><span class="o">,</span> <span class="nt">peso</span><span class="o">,</span> <span class="nt">unidades</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">nombrecomponente</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">procedencia</span> <span class="o">(</span><span class="nt">pais</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">pais</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">numserie</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">unidades</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE entrega SYSTEM &quot;mayorista.dtd&quot;&gt;</span>
<span class="nt">&lt;entrega&gt;</span>
  <span class="nt">&lt;lote&gt;</span>
        <span class="nt">&lt;pale&gt;</span>
          <span class="nt">&lt;numcajas&gt;</span>3<span class="nt">&lt;/numcajas&gt;</span>
          <span class="nt">&lt;contenido&gt;</span>
                <span class="nt">&lt;nombrecomponente&gt;</span>Fuentes<span class="nt">&lt;/nombrecomponente&gt;</span>
                <span class="nt">&lt;numserie&gt;</span>3A<span class="nt">&lt;/numserie&gt;</span>
                <span class="nt">&lt;peso&gt;</span>2kg<span class="nt">&lt;/peso&gt;</span>
                <span class="nt">&lt;unidades&gt;</span>50<span class="nt">&lt;/unidades&gt;</span>
          <span class="nt">&lt;/contenido&gt;</span>
          <span class="nt">&lt;peso&gt;</span>100kg<span class="nt">&lt;/peso&gt;</span>
          <span class="nt">&lt;formamanipulacion&gt;</span>Manual<span class="nt">&lt;/formamanipulacion&gt;</span>
        <span class="nt">&lt;/pale&gt;</span>
  <span class="nt">&lt;/lote&gt;</span>
  <span class="nt">&lt;lote&gt;</span>
        <span class="nt">&lt;pale&gt;</span>
          <span class="nt">&lt;numcajas&gt;</span>2<span class="nt">&lt;/numcajas&gt;</span>
          <span class="nt">&lt;contenido&gt;</span>
                <span class="nt">&lt;nombrecomponente&gt;</span>CPUs<span class="nt">&lt;/nombrecomponente&gt;</span>
                <span class="nt">&lt;procedencia&gt;</span>
                  <span class="nt">&lt;pais&gt;</span>China<span class="nt">&lt;/pais&gt;</span>
                  <span class="nt">&lt;pais&gt;</span>Corea del Sur<span class="nt">&lt;/pais&gt;</span>
                <span class="nt">&lt;/procedencia&gt;</span>
                <span class="nt">&lt;numserie&gt;</span>5B<span class="nt">&lt;/numserie&gt;</span>
                <span class="nt">&lt;peso&gt;</span>100g<span class="nt">&lt;/peso&gt;</span>
                <span class="nt">&lt;unidades&gt;</span>1000<span class="nt">&lt;/unidades&gt;</span>
          <span class="nt">&lt;/contenido&gt;</span>
          <span class="nt">&lt;peso&gt;</span>100kg<span class="nt">&lt;/peso&gt;</span>
          <span class="nt">&lt;formamanipulacion&gt;</span>Manual<span class="nt">&lt;/formamanipulacion&gt;</span>
        <span class="nt">&lt;/pale&gt;</span>
  <span class="nt">&lt;/lote&gt;</span>
<span class="nt">&lt;/entrega&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="ejercicio-mayorista-de-libros">
<h2>Ejercicio: mayorista de libros<a class="headerlink" href="#ejercicio-mayorista-de-libros" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Se desea crear un formato de intercambio de datos para una empresa mayorista de libros con el fin de que sus distintos programas puedan manejar la información interna. El formato de archivo debe tener la siguiente estructura:</p>
<ul>
<li><p>El elemento raíz es «operaciones».</p></li>
<li><p>Dentro de «operaciones» hay uno o más elementos «operacion».</p></li>
<li><p>Una «operacion» puede ser «venta», «compra», o cualquier combinación y secuencia de ellas, pero debe haber al menos una.</p></li>
<li><p>Una venta tiene dentro un elemento «titulosvendidos». Dentro de «titulosvendidos» se almacenan estos datos:</p>
<blockquote>
<div><ul class="simple">
<li><p>Uno o más elementos «título».</p></li>
<li><p>La cantidad total de libros vendidos.</p></li>
<li><p>Puede haber un elemento «entregado» que indique si la entrega se ha realizado.</p></li>
<li><p>Debe haber un elemento importe con un atributo obligatorio llamado «moneda».</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Una compra tiene dentro un elemento «tituloscomprados». Dentro de él hay esto:</p>
<blockquote>
<div><ul class="simple">
<li><p>Uno o más elementos «titulo»</p></li>
<li><p>Un «proveedor».</p></li>
<li><p>Una fecha de compra, que debe desglosarse en elementos día, mes y año</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>El objetivo final debe ser validar un fichero como este:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;operaciones&gt;</span>
    <span class="nt">&lt;operacion&gt;</span>
        <span class="nt">&lt;venta&gt;</span>
            <span class="nt">&lt;titulosvendidos&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Don Quijote<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Rimas y leyendas<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;cantidadtotal&gt;</span>2000<span class="nt">&lt;/cantidadtotal&gt;</span>
                <span class="nt">&lt;importe</span> <span class="na">moneda=</span><span class="s">&quot;euros&quot;</span><span class="nt">&gt;</span>4400<span class="nt">&lt;/importe&gt;</span>
            <span class="nt">&lt;/titulosvendidos&gt;</span>
        <span class="nt">&lt;/venta&gt;</span>
        <span class="nt">&lt;venta&gt;</span>
            <span class="nt">&lt;titulosvendidos&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Rinconete y Cortadillo<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Sainetes<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;cantidadtotal&gt;</span>1000<span class="nt">&lt;/cantidadtotal&gt;</span>
                <span class="nt">&lt;entregado/&gt;</span>
                <span class="nt">&lt;importe</span> <span class="na">moneda=</span><span class="s">&quot;libras&quot;</span><span class="nt">&gt;</span>290<span class="nt">&lt;/importe&gt;</span>
            <span class="nt">&lt;/titulosvendidos&gt;</span>
        <span class="nt">&lt;/venta&gt;</span>
    <span class="nt">&lt;/operacion&gt;</span>
    <span class="nt">&lt;operacion&gt;</span>
        <span class="nt">&lt;compra&gt;</span>
            <span class="nt">&lt;tituloscomprados&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>De la Tierra a la Luna<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Barbarroja<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;proveedor&gt;</span>Editorial EDSA<span class="nt">&lt;/proveedor&gt;</span>
                <span class="nt">&lt;fechacompra&gt;</span>
                    <span class="nt">&lt;dia&gt;</span>10<span class="nt">&lt;/dia&gt;</span>
                    <span class="nt">&lt;mes&gt;</span>6<span class="nt">&lt;/mes&gt;</span>
                    <span class="nt">&lt;anio&gt;</span>2018<span class="nt">&lt;/anio&gt;</span>
                <span class="nt">&lt;/fechacompra&gt;</span>
            <span class="nt">&lt;/tituloscomprados&gt;</span>
        <span class="nt">&lt;/compra&gt;</span>
        <span class="nt">&lt;venta&gt;</span>
            <span class="nt">&lt;titulosvendidos&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Cinco semanas en globo<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Sainetes<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;cantidadtotal&gt;</span>700<span class="nt">&lt;/cantidadtotal&gt;</span>
                <span class="nt">&lt;entregado/&gt;</span>
                <span class="nt">&lt;importe</span> <span class="na">moneda=</span><span class="s">&quot;euros&quot;</span><span class="nt">&gt;</span>1490<span class="nt">&lt;/importe&gt;</span>
            <span class="nt">&lt;/titulosvendidos&gt;</span>
        <span class="nt">&lt;/venta&gt;</span>
        <span class="nt">&lt;compra&gt;</span>
            <span class="nt">&lt;tituloscomprados&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>De la Tierra a la Luna<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Barbarroja<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;proveedor&gt;</span>Editorial Recopila<span class="nt">&lt;/proveedor&gt;</span>
                <span class="nt">&lt;fechacompra&gt;</span>
                    <span class="nt">&lt;dia&gt;</span>2<span class="nt">&lt;/dia&gt;</span>
                    <span class="nt">&lt;mes&gt;</span>12<span class="nt">&lt;/mes&gt;</span>
                    <span class="nt">&lt;anio&gt;</span>2017<span class="nt">&lt;/anio&gt;</span>
                <span class="nt">&lt;/fechacompra&gt;</span>
            <span class="nt">&lt;/tituloscomprados&gt;</span>
        <span class="nt">&lt;/compra&gt;</span>
    <span class="nt">&lt;/operacion&gt;</span>
<span class="nt">&lt;/operaciones&gt;</span>
</pre></div>
</div>
<section id="solucion-al-mayorista-de-libros">
<h3>Solución al mayorista de libros<a class="headerlink" href="#solucion-al-mayorista-de-libros" title="Enlace permanente a este encabezado">¶</a></h3>
<p>La siguiente DTD valida el fichero arriba mostrado:</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!--El elemento raíz es operaciones y dentro de él hay uno o más elementos operación--&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">operaciones</span> <span class="o">(</span><span class="nt">operacion</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="c">&lt;!--Una operación puede ser ventas o compras, en cualquier orden y repetidas las veces que sea necesario--&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">operacion</span> <span class="o">(</span><span class="nt">venta</span><span class="o">|</span><span class="nt">compra</span><span class="o">)+</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">venta</span> <span class="o">(</span><span class="nt">titulosvendidos</span><span class="o">)</span><span class="k">&gt;</span>
<span class="c">&lt;!--Una venta tiene uno o más titulos, la cantidad de libros vendidos, puede haber un elemento entregado que indique si la entrega se ha realizado, y debe haber un elemento importe con un atributo obligatorio llamado moneda. --&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">titulosvendidos</span> <span class="o">(</span><span class="nt">titulo</span><span class="o">+,</span> <span class="nt">cantidadtotal</span><span class="o">,</span> <span class="nt">entregado</span><span class="o">?,</span> <span class="nt">importe</span><span class="o">)</span><span class="k">&gt;</span>
<span class="c">&lt;!--Antes de que se nos olvide, fabricamos el elemento importe y su atributo moneda--&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">importe</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">importe</span> <span class="na">moneda</span> <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
<span class="c">&lt;!--Fabricamos el titulo y la cantidad total--&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">titulo</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">cantidadtotal</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="c">&lt;!--El elemento entregado parece que es un vacío--&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">entregado</span> <span class="kc">EMPTY</span><span class="k">&gt;</span>
<span class="c">&lt;!--Una compra tiene:</span>

<span class="c">-Uno o más títulos comprados.</span>
<span class="c">-Nombre de proveedor.</span>
<span class="c">-Una fecha de compra, que debe desglosarse en elementos día, mes y año --&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">compra</span> <span class="o">(</span><span class="nt">tituloscomprados</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">tituloscomprados</span> <span class="o">(</span><span class="nt">titulo</span><span class="o">+,</span> <span class="nt">proveedor</span><span class="o">,</span> <span class="nt">fechacompra</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">proveedor</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="c">&lt;!--Desglosamos la fecha--&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">fechacompra</span> <span class="o">(</span><span class="nt">dia</span><span class="o">,</span> <span class="nt">mes</span><span class="o">,</span> <span class="nt">anio</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">dia</span>  <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">mes</span>  <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">anio</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="ejercicio-fabricante-de-tractores">
<h2>Ejercicio: fabricante de tractores<a class="headerlink" href="#ejercicio-fabricante-de-tractores" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Un fabricante de tractores desea unificar el formato XML de sus proveedores y para ello ha indicado que necesita que los archivos XML cumplan las siguientes restricciones:</p>
<ul class="simple">
<li><p>Un pedido consta de uno o más tractores.</p></li>
<li><p>Un tractor consta de uno o más componentes.</p></li>
<li><p>Un componente tiene los siguientes elementos: nombre del fabricante (atributo obligatorio), fecha de entrega  (si es posible, aunque puede que no aparezca, si aparece el dia es optativo, pero el mes y el año son obligatorios). También se necesita saber del componente si es frágil o no. También debe aparecer un elemento peso del componente y dicho elemento peso tiene un atributo unidad del peso (kilos o gramos), un elemento número de serie y puede que aparezca o no un elemento kmmaximos indicando que el componente debe sustituirse tras un cierto número de kilómetros.</p></li>
</ul>
<p>Un posible fichero de ejemplo que podría validar sería este:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;pedido&gt;</span>
    <span class="nt">&lt;tractor&gt;</span>
        <span class="nt">&lt;componente</span> <span class="na">nombrefabricante=</span><span class="s">&quot;Ebro&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;fechaentrega&gt;</span>
                <span class="nt">&lt;mes&gt;</span>2018<span class="nt">&lt;/mes&gt;</span> <span class="nt">&lt;anio&gt;</span>2018<span class="nt">&lt;/anio&gt;</span>
            <span class="nt">&lt;/fechaentrega&gt;</span>
            <span class="nt">&lt;fragil/&gt;</span>
            <span class="nt">&lt;peso</span> <span class="na">unidad=</span><span class="s">&quot;kg&quot;</span><span class="nt">&gt;</span>12<span class="nt">&lt;/peso&gt;</span>
            <span class="nt">&lt;numserie&gt;</span>00A<span class="nt">&lt;/numserie&gt;</span>
        <span class="nt">&lt;/componente&gt;</span>
        <span class="nt">&lt;componente</span> <span class="na">nombrefabricante=</span><span class="s">&quot;Avia&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;fechaentrega&gt;</span>
                <span class="nt">&lt;dia&gt;</span>12<span class="nt">&lt;/dia&gt;&lt;mes&gt;</span>1<span class="nt">&lt;/mes&gt;&lt;anio&gt;</span>2019<span class="nt">&lt;/anio&gt;</span>
            <span class="nt">&lt;/fechaentrega&gt;</span>
            <span class="nt">&lt;nofragil/&gt;</span>
            <span class="nt">&lt;peso</span> <span class="na">unidad=</span><span class="s">&quot;g&quot;</span><span class="nt">&gt;</span>1450<span class="nt">&lt;/peso&gt;</span>
            <span class="nt">&lt;numserie&gt;</span>00D<span class="nt">&lt;/numserie&gt;</span>
            <span class="nt">&lt;kmmaximos&gt;</span>25000<span class="nt">&lt;/kmmaximos&gt;</span>
        <span class="nt">&lt;/componente&gt;</span>
    <span class="nt">&lt;/tractor&gt;</span>
    <span class="nt">&lt;tractor&gt;</span>
        <span class="nt">&lt;componente</span> <span class="na">nombrefabricante=</span><span class="s">&quot;John Deere&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;fragil/&gt;</span>
            <span class="nt">&lt;peso</span> <span class="na">unidad=</span><span class="s">&quot;g&quot;</span><span class="nt">&gt;</span>770<span class="nt">&lt;/peso&gt;</span>
            <span class="nt">&lt;numserie&gt;</span>43Z<span class="nt">&lt;/numserie&gt;</span>
        <span class="nt">&lt;/componente&gt;</span>
    <span class="nt">&lt;/tractor&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<section id="solucion-dtd-fabricante-tractores">
<h3>Solución: DTD fabricante tractores<a class="headerlink" href="#solucion-dtd-fabricante-tractores" title="Enlace permanente a este encabezado">¶</a></h3>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">pedido</span>     <span class="o">(</span><span class="nt">tractor</span><span class="o">)+</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">tractor</span>    <span class="o">(</span><span class="nt">componente</span><span class="o">)+</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">componente</span> <span class="o">(</span><span class="nt">fechaentrega</span><span class="o">?,</span> <span class="o">(</span><span class="nt">fragil</span><span class="o">|</span><span class="nt">nofragil</span><span class="o">),</span>
                      <span class="nt">peso</span><span class="o">,</span> <span class="nt">numserie</span><span class="o">,</span> <span class="nt">kmmaximos</span><span class="o">?)</span><span class="k">&gt;</span>

<span class="k">&lt;!ELEMENT</span> <span class="nt">fechaentrega</span> <span class="o">(</span><span class="nt">dia</span><span class="o">?,</span> <span class="nt">mes</span><span class="o">,</span> <span class="nt">anio</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">dia</span>      <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">mes</span>      <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">anio</span>     <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">fragil</span>   <span class="kc">EMPTY</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">nofragil</span> <span class="kc">EMPTY</span> <span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">peso</span>     <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">peso</span> <span class="na">unidad</span> <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">numserie</span>  <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">kmmaximos</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">componente</span> <span class="na">nombrefabricante</span> <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="ejercicio-repeticiones-de-opciones">
<h2>Ejercicio: repeticiones de opciones<a class="headerlink" href="#ejercicio-repeticiones-de-opciones" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Se necesita un formato de archivo para intercambiar productos entre almacenes de productos de librería y se desea una DTD que incluya estas restricciones:</p>
<ul class="simple">
<li><p>Debe haber un elemento raíz pedido que puede constar de libros, cuadernos y/o lápices. Los tres elementos pueden aparecer repetidos y en cualquier orden. Tambien pueden aparecer por ejemplo 4 libros, 2 lapices y luego 4 lapices de nuevo.</p></li>
<li><p>Todo libro tiene un atributo obligatorio titulo.</p></li>
<li><p>Los elementos cuaderno tiene un atributo optativo num_hojas.</p></li>
<li><p>Todo elemento lápiz debe tener dentro un  elemento obligatorio número.</p></li>
</ul>
<p>La solución a la DTD:</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">pedido</span> <span class="o">(</span><span class="nt">libro</span><span class="o">|</span><span class="nt">cuaderno</span><span class="o">|</span><span class="nt">lapiz</span><span class="o">)+</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">libro</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">libro</span> <span class="na">titulo</span> <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">cuaderno</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">cuaderno</span> <span class="na">num_hojas</span> <span class="kc">CDATA</span> <span class="kc">#IMPLIED</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">lapiz</span> <span class="o">(</span><span class="nt">numero</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">numero</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE pedido SYSTEM &quot;libreria.dtd&quot;&gt;</span>
<span class="nt">&lt;pedido&gt;</span>
  <span class="nt">&lt;libro</span> <span class="na">titulo=</span><span class="s">&quot;Java 8&quot;</span><span class="nt">&gt;&lt;/libro&gt;</span>
  <span class="nt">&lt;cuaderno&gt;&lt;/cuaderno&gt;</span>
  <span class="nt">&lt;libro</span> <span class="na">titulo=</span><span class="s">&quot;HTML y CSS&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;libro</span> <span class="na">titulo=</span><span class="s">&quot;SQL para Dummies&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;cuaderno</span> <span class="na">num_hojas=</span><span class="s">&quot;150&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;lapiz&gt;</span>
        <span class="nt">&lt;numero&gt;</span>2H<span class="nt">&lt;/numero&gt;</span>
  <span class="nt">&lt;/lapiz&gt;</span>
  <span class="nt">&lt;cuaderno</span> <span class="na">num_hojas=</span><span class="s">&quot;250&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;cuaderno</span> <span class="na">num_hojas=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;lapiz&gt;</span>
        <span class="nt">&lt;numero&gt;</span>2B<span class="nt">&lt;/numero&gt;</span>
  <span class="nt">&lt;/lapiz&gt;</span>
  <span class="nt">&lt;lapiz&gt;</span>
        <span class="nt">&lt;numero&gt;</span>1HB<span class="nt">&lt;/numero&gt;</span>
  <span class="nt">&lt;/lapiz&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-multinacional">
<h2>Ejercicio: multinacional<a class="headerlink" href="#ejercicio-multinacional" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Una multinacional que opera en bolsa necesita un formato de intercambio de datos para que sus programas intercambien información sobre los mercados de acciones.</p>
<p>En general todo archivo constará de un listado de cosas como se detalla a continuación</p>
<ul class="simple">
<li><p>En el listado aparecen siempre uno o varios futuros, despues una o varias divisas, despues uno o varios bonos y una o varias letras.</p></li>
<li><p>Todos ellos tienen un atributo precio que es <strong>obligatorio</strong></p></li>
<li><p>Todos ellos tienen un elemento vacío que indica  de donde es el producto anterior: «Madrid», «Nueva York», «Frankfurt» o «Tokio».</p></li>
<li><p>Las divisas y los bonos tienen un atributo optativo que se usa para indicar si el producto ha sido estable en el pasado o no.</p></li>
<li><p>Un futuro es un valor esperado que tendrá un cierto producto en el futuro. Se debe incluir este producto en forma de elemento. También puede aparecer un elemento mercado que indique el país de procedencia del producto.</p></li>
<li><p>Todo bono tiene un elemento país_de_procedencia para saber a qué estado pertenece. Debe tener tres elementos extra llamados «valor_deseado», «valor_mínimo» y «valor_máximo» para saber los posibles precios.</p></li>
<li><p>Las divisas tienen siempre un nombre pueden incluir uno o más tipos de cambio para otras monedas.</p></li>
<li><p>Las letras tienen siempre un tipo de interés pagadero por un país emisor. El país emisor también debe existir y debe ser siempre de uno de los países cuyas capitales aparecen arriba (es decir «España», «EEUU», «Alemania» y «Japón»</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE listado [</span>
<span class="cp">        &lt;!ELEMENT listado (futuro+, divisa+, bono+, letra+)&gt;</span>
        <span class="cp">&lt;!ATTLIST futuro precio CDATA #REQUIRED&gt;</span>
        <span class="cp">&lt;!ATTLIST divisa precio CDATA #REQUIRED&gt;</span>
        <span class="cp">&lt;!ATTLIST bono precio CDATA #REQUIRED&gt;</span>
        <span class="cp">&lt;!ATTLIST letra precio CDATA #REQUIRED&gt;</span>
        <span class="cp">&lt;!ELEMENT ciudad_procedencia (madrid|nyork|frankfurt|tokio)&gt;</span>
        <span class="cp">&lt;!ELEMENT madrid EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT nyork EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT frankfurt EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT tokio EMPTY&gt;</span>
        <span class="cp">&lt;!ATTLIST divisa estable CDATA #IMPLIED&gt;</span>
        <span class="cp">&lt;!ATTLIST bono estable CDATA #IMPLIED&gt;</span>
        <span class="cp">&lt;!ELEMENT futuro (producto, mercado?, ciudad_procedencia)&gt;</span>
        <span class="cp">&lt;!ELEMENT producto (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT mercado (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT bono (pais_de_procedencia,valor_deseado,</span>
<span class="cp">                        valor_minimo, valor_maximo, ciudad_procedencia)&gt;</span>
        <span class="cp">&lt;!ELEMENT valor_deseado (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT valor_minimo (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT valor_maximo (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT pais_de_procedencia (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT divisa (nombre_divisa,</span>
<span class="cp">                        tipo_de_cambio+, ciudad_procedencia)&gt;</span>
        <span class="cp">&lt;!ELEMENT nombre_divisa (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT tipo_de_cambio (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT letra (tipo_de_interes, pais_emisor,ciudad_procedencia)&gt;</span>
        <span class="cp">&lt;!ELEMENT tipo_de_interes (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT pais_emisor (espania|eeuu|alemania|japon)&gt;</span>
        <span class="cp">&lt;!ELEMENT espania     EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT eeuu        EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT alemania    EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT japon       EMPTY&gt;</span>
]&gt;


<span class="nt">&lt;listado&gt;</span>
        <span class="nt">&lt;futuro</span> <span class="na">precio=</span><span class="s">&quot;11.28&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;producto&gt;</span>Cafe<span class="nt">&lt;/producto&gt;</span>
                <span class="nt">&lt;mercado&gt;</span>América Latina<span class="nt">&lt;/mercado&gt;</span>
                <span class="nt">&lt;ciudad_procedencia&gt;</span>
                        <span class="nt">&lt;frankfurt/&gt;</span>
                <span class="nt">&lt;/ciudad_procedencia&gt;</span>
        <span class="nt">&lt;/futuro&gt;</span>
        <span class="nt">&lt;divisa</span> <span class="na">precio=</span><span class="s">&quot;183&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;nombre_divisa&gt;</span>Libra esterlina<span class="nt">&lt;/nombre_divisa&gt;</span>
                <span class="nt">&lt;tipo_de_cambio&gt;</span>2.7:1 euros<span class="nt">&lt;/tipo_de_cambio&gt;</span>
                <span class="nt">&lt;tipo_de_cambio&gt;</span>1:0.87 dólares<span class="nt">&lt;/tipo_de_cambio&gt;</span>
                <span class="nt">&lt;ciudad_procedencia&gt;</span>
                        <span class="nt">&lt;madrid/&gt;</span>
                <span class="nt">&lt;/ciudad_procedencia&gt;</span>
        <span class="nt">&lt;/divisa&gt;</span>
        <span class="nt">&lt;bono</span> <span class="na">precio=</span><span class="s">&quot;10000&quot;</span> <span class="na">estable=</span><span class="s">&quot;si&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;pais_de_procedencia&gt;</span>
                        Islandia
                <span class="nt">&lt;/pais_de_procedencia&gt;</span>
                <span class="nt">&lt;valor_deseado&gt;</span>9980<span class="nt">&lt;/valor_deseado&gt;</span>
                <span class="nt">&lt;valor_minimo&gt;</span>9950<span class="nt">&lt;/valor_minimo&gt;</span>
                <span class="nt">&lt;valor_maximo&gt;</span>10020<span class="nt">&lt;/valor_maximo&gt;</span>
                <span class="nt">&lt;ciudad_procedencia&gt;</span>
                        <span class="nt">&lt;tokio/&gt;</span>
                <span class="nt">&lt;/ciudad_procedencia&gt;</span>
        <span class="nt">&lt;/bono&gt;</span>
        <span class="nt">&lt;letra</span> <span class="na">precio=</span><span class="s">&quot;45020&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;tipo_de_interes&gt;</span>4.54%<span class="nt">&lt;/tipo_de_interes&gt;</span>
                <span class="nt">&lt;pais_emisor&gt;</span>
                        <span class="nt">&lt;espania/&gt;</span>
                <span class="nt">&lt;/pais_emisor&gt;</span>
                <span class="nt">&lt;ciudad_procedencia&gt;</span>
                        <span class="nt">&lt;madrid/&gt;</span>
                <span class="nt">&lt;/ciudad_procedencia&gt;</span>
        <span class="nt">&lt;/letra&gt;</span>
<span class="nt">&lt;/listado&gt;</span>
</pre></div>
</div>
</section>
<section id="otros-ejercicios-dtd">
<h2>Otros ejercicios DTD<a class="headerlink" href="#otros-ejercicios-dtd" title="Enlace permanente a este encabezado">¶</a></h2>
<section id="inventario-de-piezas">
<h3>Inventario de piezas<a class="headerlink" href="#inventario-de-piezas" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se desea almacenar nombres de piezas y para ello se ha llegado a este acuerdo:</p>
<ol class="arabic">
<li><p>El elemento raíz se va a llamar «listapiezas».</p></li>
<li><p>Dentro de «listapiezas» va a haber uno o muchos elementos «pieza»</p></li>
<li><p>Dentro de «pieza» hay tres elementos:</p>
<blockquote>
<div><p>1.. Un elemento llamado «peso» que contiene datos
2. Un elemento llamado «nombre» que contiene datos
3. Un elemento llamado fabricante que contiene datos.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>El fabricante lleva un atributo llamado pais que indica el pais</p></li>
</ol>
</div></blockquote>
</div></blockquote>
</li>
</ol>
<p>Ejemplo de fichero válido:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listapiezas&gt;</span>
    <span class="nt">&lt;pieza&gt;</span>
        <span class="nt">&lt;peso&gt;</span>20<span class="nt">&lt;/peso&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Pistón<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;fabricante</span> <span class="na">pais=</span><span class="s">&quot;China&quot;</span><span class="nt">&gt;</span> Asia Electronics<span class="nt">&lt;/fabricante&gt;</span>
    <span class="nt">&lt;/pieza&gt;</span>
    <span class="nt">&lt;pieza&gt;</span>
        <span class="nt">&lt;peso&gt;</span>15<span class="nt">&lt;/peso&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Cilindro<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;fabricante</span> <span class="na">pais=</span><span class="s">&quot;Japón&quot;</span><span class="nt">&gt;</span>Toyota Motors<span class="nt">&lt;/fabricante&gt;</span>
    <span class="nt">&lt;/pieza&gt;</span>
<span class="nt">&lt;/listapiezas&gt;</span>
</pre></div>
</div>
<p>Ejemplo de fichero que debe dar errores</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listapiezas&gt;</span>
    <span class="nt">&lt;pieza&gt;</span>
        <span class="nt">&lt;peso&gt;</span>20<span class="nt">&lt;/peso&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Pistón<span class="nt">&lt;/nombre&gt;</span>
        <span class="cm">&lt;!--Aquí falta el país--&gt;</span>
        <span class="nt">&lt;fabricante&gt;</span> Asia Electronics<span class="nt">&lt;/fabricante&gt;</span>
    <span class="nt">&lt;/pieza&gt;</span>
    <span class="nt">&lt;pieza&gt;</span>
        <span class="nt">&lt;peso&gt;</span>15<span class="nt">&lt;/peso&gt;</span>
        <span class="cm">&lt;!--Aquí falta el nombre--&gt;</span>
        <span class="nt">&lt;fabricante</span> <span class="na">pais=</span><span class="s">&quot;Japón&quot;</span><span class="nt">&gt;</span>Toyota Motors<span class="nt">&lt;/fabricante&gt;</span>
    <span class="nt">&lt;/pieza&gt;</span>
<span class="nt">&lt;/listapiezas&gt;</span>
</pre></div>
</div>
<p>Una posible solución sería esta:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">dtd</span>
</pre></div>
</div>
<blockquote>
<div><p>&lt;!ELEMENT listapiezas   (pieza+)&gt;
&lt;!ELEMENT pieza         (peso, nombre,fabricante)&gt;
&lt;!ELEMENT peso          (#PCDATA)&gt;
&lt;!ELEMENT nombre        (#PCDATA)&gt;
&lt;!ELEMENT fabricante    (#PCDATA)&gt;
&lt;!ATTLIST fabricante pais CDATA #REQUIRED&gt;</p>
</div></blockquote>
</section>
<section id="almacen-de-repuestos">
<h3>Almacén de repuestos<a class="headerlink" href="#almacen-de-repuestos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Una empresa de repuestos desea almacenar en XML la información de su inventario:</p>
<ol class="arabic simple">
<li><p>El elemento raíz debe ser «repuestos»</p></li>
<li><p>Dentro de «repuestos» debe haber uno o más «repuesto».</p></li>
<li><dl class="simple">
<dt>Dentro de «repuesto» debe haber una de estas dos cosas: «tornillo» o «tuerca»</dt><dd><p>3.1 Tornillo: lleva siempre un atributo «peso». Lleva dentro un elemento llamado «descripcion»
3.2 Tuerca: puede llevar un atributo «peso». Lleva dentro siempre un elemento llamado «material»</p>
</dd>
</dl>
</li>
</ol>
<p>Ejemplo de fichero válido</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;repuestos&gt;</span>
    <span class="nt">&lt;repuesto&gt;</span>
        <span class="nt">&lt;tornillo</span> <span class="na">peso=</span><span class="s">&quot;5g&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;descripcion&gt;</span>Tornillo para ensamblajes metálicos<span class="nt">&lt;/descripcion&gt;</span>
        <span class="nt">&lt;/tornillo&gt;</span>
    <span class="nt">&lt;/repuesto&gt;</span>
    <span class="nt">&lt;repuesto&gt;</span>
        <span class="nt">&lt;tuerca&gt;</span>
            <span class="nt">&lt;material&gt;</span>Acero<span class="nt">&lt;/material&gt;</span>
        <span class="nt">&lt;/tuerca&gt;</span>
    <span class="nt">&lt;/repuesto&gt;</span>
    <span class="nt">&lt;repuesto&gt;</span>
        <span class="nt">&lt;tuerca</span> <span class="na">peso=</span><span class="s">&quot;12 mg&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;material&gt;</span>Aleación<span class="nt">&lt;/material&gt;</span>
        <span class="nt">&lt;/tuerca&gt;</span>
    <span class="nt">&lt;/repuesto&gt;</span>
<span class="nt">&lt;/repuestos&gt;</span>
</pre></div>
</div>
<p>Y una posible solución:</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">repuestos</span>   <span class="o">(</span><span class="nt">repuesto</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">repuesto</span>    <span class="o">(</span><span class="nt">tornillo</span><span class="o">|</span><span class="nt">tuerca</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">tornillo</span>    <span class="o">(</span><span class="nt">descripcion</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">descripcion</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">tuerca</span>      <span class="o">(</span><span class="nt">material</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">material</span>    <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">tornillo</span> <span class="na">peso</span>      <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">tuerca</span>   <span class="na">peso</span>      <span class="kc">CDATA</span> <span class="kc">#IMPLIED</span><span class="k">&gt;</span>
</pre></div>
</div>
</section>
<section id="suministros-medicos-dtd">
<h3>Suministros médicos (DTD)<a class="headerlink" href="#suministros-medicos-dtd" title="Enlace permanente a este encabezado">¶</a></h3>
<p>En un centro médico se desea almacenar la información sobre el inventario usando XML. Se ha llegado a un acuerdo para almacenar la información en este formato</p>
<ol class="arabic">
<li><p>El elemento raíz se llama «suministrosmedicos». Dentro de él hay lo siguiente:</p>
<blockquote>
<div><p>1.1 Primero hay uno o muchos elementos «antibiotico». Todo antibiotico lleva dentro un elemento «nombre». Puede llevar o no un elemento llamado «nombrecomercial».
1.2 Despues hay uno o muchos elementos «analgesico». El analgesico puede llevar dentro o no un elemento «fechadecaducidad» y despues siempre un elemento nombre. El analgesico siempre lleva un atributo llamado «pvp».
1.3 Despues puede haber 0 o muchos elementos «antitusivo». Todo antitusivo lleva dentro dos elementos QUE PUEDEN IR EN CUALQUIER ORDEN: elemento «tiporeceta» y el elemento «presentacion». La presentacion siempre lleva un atributo «dosisrecomendada»</p>
</div></blockquote>
</li>
</ol>
<p>A continuación se da un ejemplo de fichero:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;suministrosmedicos&gt;</span>
    <span class="nt">&lt;antibiotico&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Penicilina<span class="nt">&lt;/nombre&gt;</span>
    <span class="nt">&lt;/antibiotico&gt;</span>
    <span class="nt">&lt;antibiotico&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Penicilina<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;nombrecomercial&gt;</span>Zitromax<span class="nt">&lt;/nombrecomercial&gt;</span>
    <span class="nt">&lt;/antibiotico&gt;</span>
    <span class="nt">&lt;antibiotico&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Amoxicilina<span class="nt">&lt;/nombre&gt;</span>
    <span class="nt">&lt;/antibiotico&gt;</span>
    <span class="nt">&lt;analgesico</span> <span class="na">pvp=</span><span class="s">&quot;14.80 euros&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Paracetamol<span class="nt">&lt;/nombre&gt;</span>
    <span class="nt">&lt;/analgesico&gt;</span>
    <span class="nt">&lt;analgesico</span> <span class="na">pvp=</span><span class="s">&quot;14.80 euros&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;fechadecaducidad&gt;</span>15-02-2026<span class="nt">&lt;/fechadecaducidad&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Apiretal<span class="nt">&lt;/nombre&gt;</span>
    <span class="nt">&lt;/analgesico&gt;</span>
    <span class="nt">&lt;antitusivo&gt;</span>
        <span class="nt">&lt;tiporeceta&gt;</span>Innecesaria<span class="nt">&lt;/tiporeceta&gt;</span>
        <span class="nt">&lt;presentacion</span>  <span class="na">dosisrecomendada=</span><span class="s">&quot;1-1-1&quot;</span><span class="nt">&gt;</span>Jarabe<span class="nt">&lt;/presentacion&gt;</span>
    <span class="nt">&lt;/antitusivo&gt;</span>
    <span class="nt">&lt;antitusivo&gt;</span>
        <span class="nt">&lt;presentacion</span>  <span class="na">dosisrecomendada=</span><span class="s">&quot;1-1-1&quot;</span><span class="nt">&gt;</span>Jarabe<span class="nt">&lt;/presentacion&gt;</span>
        <span class="nt">&lt;tiporeceta&gt;</span>Atencion primaria<span class="nt">&lt;/tiporeceta&gt;</span>
    <span class="nt">&lt;/antitusivo&gt;</span>
    <span class="nt">&lt;antitusivo&gt;</span>
        <span class="nt">&lt;tiporeceta&gt;</span>Atencion primaria<span class="nt">&lt;/tiporeceta&gt;</span>
        <span class="nt">&lt;presentacion</span> <span class="na">dosisrecomendada=</span><span class="s">&quot;0-0-1&quot;</span><span class="nt">&gt;</span>Pastillas<span class="nt">&lt;/presentacion&gt;</span>
    <span class="nt">&lt;/antitusivo&gt;</span>
<span class="nt">&lt;/suministrosmedicos&gt;</span>
</pre></div>
</div>
<p>Y una posible solución:</p>
<div class="highlight-dtd notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">suministrosmedicos</span>  <span class="o">(</span><span class="nt">antibiotico</span><span class="o">+,</span> <span class="nt">analgesico</span><span class="o">+,</span> <span class="nt">antitusivo</span><span class="o">*)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">antibiotico</span>         <span class="o">(</span><span class="nt">nombre</span><span class="o">,</span> <span class="nt">nombrecomercial</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">nombre</span>              <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">nombrecomercial</span>     <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">analgesico</span>          <span class="o">(</span><span class="nt">fechadecaducidad</span><span class="o">?,</span> <span class="nt">nombre</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">fechadecaducidad</span>    <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">antitusivo</span>          <span class="o">(</span> <span class="o">(</span><span class="nt">tiporeceta</span><span class="o">,</span><span class="nt">presentacion</span><span class="o">)</span> <span class="o">|</span> <span class="o">(</span><span class="nt">presentacion</span><span class="o">,</span><span class="nt">tiporeceta</span><span class="o">)</span> <span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">tiporeceta</span>          <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">presentacion</span>        <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="c">&lt;!--Atributos--&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">analgesico</span>  <span class="na">pvp</span>  <span class="kc">CDATA</span>  <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">presentacion</span> <span class="na">dosisrecomendada</span> <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="id3">
<h2>Ejercicio<a class="headerlink" href="#id3" title="Enlace permanente a este encabezado">¶</a></h2>
<p>La Seguridad Social necesita un formato de intercambio unificado para distribuir la información personal de los afiliados.</p>
<ul>
<li><p>Todo archivo XML contiene un listado de uno o mas afiliados</p></li>
<li><p>Todo afiliado tiene los siguientes elementos:</p>
<blockquote>
<div><ul>
<li><p>DNI o NIE</p></li>
<li><p>Nombre</p></li>
<li><p>Apellidos</p></li>
<li><p>Situación laboral: que tiene que ser una y solo una de entre estas posibilidades: «en_paro», «en_activo», «jubilado», «edad_no_laboral»</p></li>
<li><p>Fecha de nacimiento: que se desglosa en los elementos obligatorios día, mes y anio.</p></li>
<li><p>Listado de bajas: que indica las situaciones de baja laboral del empleado. Dicho listado consta de una repetición de 0 o más bajas:</p>
<blockquote>
<div><ul class="simple">
<li><p>Una baja consta de tres elementos: causa (obligatoria), fecha de inicio (obligatorio) y fecha de final (optativa),</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Listado de prestaciones cobradas: consta de 0 o más elementos prestación, donde se indicará la cantidad percibida (obligatorio), la fecha de inicio (obligatorio) y la fecha de final (obligatorio)</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<section id="inventario-de-piezas-variante">
<h3>Inventario de piezas (variante)<a class="headerlink" href="#inventario-de-piezas-variante" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se desea almacenar nombres de piezas y para ello se ha llegado a este acuerdo:</p>
<ol class="arabic">
<li><p>El elemento raíz se va a llamar «listapiezas».</p></li>
<li><p>Dentro de «listapiezas» va a haber uno o muchos elementos «pieza»</p></li>
<li><p>Dentro de «pieza» hay tres elementos:</p>
<blockquote>
<div><ol class="arabic">
<li><p>Un elemento llamado «peso» que contiene datos. NO ES OBLIGATORIO QUE ESTÉ</p></li>
<li><p>Un elemento llamado «nombre» que contiene datos</p></li>
<li><p>Un elemento llamado fabricante que contiene datos.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>El fabricante PUEDE LLEVAR un atributo llamado pais que indica el pais.</p></li>
</ol>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</li>
</ol>
<p>Ejemplo de fichero válido</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listapiezas&gt;</span>
    <span class="nt">&lt;pieza&gt;</span>
        <span class="cm">&lt;!--No hay peso, pero no debe importar, debe darse como bueno--&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Pistón<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;fabricante</span> <span class="na">pais=</span><span class="s">&quot;China&quot;</span><span class="nt">&gt;</span> Asia Electronics<span class="nt">&lt;/fabricante&gt;</span>
    <span class="nt">&lt;/pieza&gt;</span>
    <span class="nt">&lt;pieza&gt;</span>
        <span class="nt">&lt;peso&gt;</span>15<span class="nt">&lt;/peso&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Cilindro<span class="nt">&lt;/nombre&gt;</span>
        <span class="cm">&lt;!--No hay atributo pais, pero no debe pasar nada--&gt;</span>
        <span class="nt">&lt;fabricante&gt;</span>Toyota Motors<span class="nt">&lt;/fabricante&gt;</span>
    <span class="nt">&lt;/pieza&gt;</span>
<span class="nt">&lt;/listapiezas&gt;</span>
</pre></div>
</div>
<p>Ejemplo de fichero que debe dar errores</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listapiezas&gt;</span>
    <span class="nt">&lt;pieza&gt;</span>
        <span class="nt">&lt;peso&gt;</span>20<span class="nt">&lt;/peso&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Pistón<span class="nt">&lt;/nombre&gt;</span>
        <span class="cm">&lt;!--Aquí falta el fabricante--&gt;</span>
    <span class="nt">&lt;/pieza&gt;</span>
    <span class="nt">&lt;pieza&gt;</span>
        <span class="nt">&lt;peso&gt;</span>15<span class="nt">&lt;/peso&gt;</span>
        <span class="cm">&lt;!--Aquí falta el nombre--&gt;</span>
        <span class="nt">&lt;fabricante</span> <span class="na">pais=</span><span class="s">&quot;Japón&quot;</span><span class="nt">&gt;</span>Toyota Motors<span class="nt">&lt;/fabricante&gt;</span>
    <span class="nt">&lt;/pieza&gt;</span>
<span class="nt">&lt;/listapiezas&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="esquemas-xml">
<h2>Esquemas XML<a class="headerlink" href="#esquemas-xml" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Los esquemas XML son un mecanismo radicalmente distinto de crear reglas para validar ficheros XML. Se caracterizan por:</p>
<ul class="simple">
<li><p>Estar escritos en XML. Por lo tanto, las mismas bibliotecas que permiten procesar ficheros XML de datos permitirían procesar ficheros XML de reglas.</p></li>
<li><p>Son mucho más potentes: ofrecen soporte a tipos de datos con comprobación de si el contenido de una etiqueta es de tipo <code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">date</span></code> o de otros tipos. También se permite añadir restricciones como indicar valores mínimo y máximo para un número o determinar el patrón que debe seguir una cadena válida</p></li>
<li><p>Ofrecen la posibilidad de usar <em>espacios de nombres</em>. Los espacios de nombres son similares a los paquetes Java: permiten a personas distintas el definir etiquetas con el mismo nombre pudiendo luego distinguir etiquetas iguales en función del espacio de nombres que importemos.</p></li>
</ul>
<section id="un-ejemplo">
<h3>Un ejemplo<a class="headerlink" href="#un-ejemplo" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Supongamos que deseamos tener ficheros XML con un solo elemento llamado <code class="docutils literal notranslate"><span class="pre">&lt;cantidad&gt;</span></code> que debe tener dentro un número.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad&gt;</span>20<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
<p>Un posible esquema sería el siguiente:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:integer&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>¿Qué contiene este fichero?</p>
<ol class="arabic simple">
<li><p>En primer lugar se indica que este fichero va a usar unas etiquetas ya definidas en un espacio de nombres (o XML Namespace, de ahí <code class="docutils literal notranslate"><span class="pre">xmlns</span></code>). Esa definición se hace en el espacio de nombres que aparece en la URL. Nuestro validador no descargará nada, esa URL es oficial y todos los validadores la conocen. Las etiquetas de ese espacio de nombres van a usar un prefijo que en este caso será <code class="docutils literal notranslate"><span class="pre">xsd</span></code>. Nótese que el prefijo puede ser como queramos (podría ser «abcd» o «zztop»), pero la costumbre es usar <code class="docutils literal notranslate"><span class="pre">xsd</span></code>.</p></li>
<li><p>Se indica que habrá un solo elemento y que el tipo de ese elemento es <code class="docutils literal notranslate"><span class="pre">&lt;xsd:integer&gt;</span></code>. Es decir, un entero básico.</p></li>
</ol>
<p>Si probamos el fichero de esquema con el fichero de datos que hemos indicado veremos que efectivamente el fichero XML de datos es válido. Sin embargo, si en lugar de una cantidad incluyésemos una cadena, veríamos que el fichero <strong>no se validaría</strong></p>
</section>
<section id="tipos-de-datos-basicos">
<h3>Tipos de datos básicos<a class="headerlink" href="#tipos-de-datos-basicos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Podemos usar los siguientes tipos de datos:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:byte</span></code>: entero de 8 bits.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:short</span></code>: entero de 16 bits</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:int</span></code>: número entero de 32 bits.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:long</span></code>: entero de 64 bits.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:integer</span></code>: número entero sin límite de capacidad.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:unsignedByte</span></code>: entero de 8 bits sin signo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:unsignedShort</span></code>: entero de 16 bits sin signo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:unsignedInt</span></code>: entero de 32 bits sin signo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:unsignedLong</span></code>: entero de 64 bits sin signo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:string</span></code>: cadena de caracteres en la que los espacios en blanco se respetan.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:normalizedString</span></code>: cadena de caracteres en la que los espacios en blanco no se respetan y se reemplazarán secuencias largas de espacios o fines de línea por un solo espacio.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:date</span></code>: permite almacenar fechas que deben ir <strong>obligatoriamente</strong> en formato AAAA-MM-DD (4 digitos para el año, seguidos de un guión, seguido de dos dígitos para el mes, seguidos de un guión, seguidos de dos dígitos para el día del mes)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:time</span></code>: para almacenar horas en formato HH:MM:SS.C</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:datetime</span></code>: mezcla la fecha y la hora separando ambos campos con una T mayúscula. Esto permitiría almacenar <code class="docutils literal notranslate"><span class="pre">2020-09-22T10:40:22.6</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:duration</span></code>. Para indicar períodos. Se debe empezar con «P» y luego indicar el número de años, meses, días, minutos o segundos. Por ejemplo «P1Y4M21DT8H» indica un período de 1 año, 4 meses, 21 días y 8 horas. Se aceptan períodos negativos poniendo -P en lugar de P.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:boolean</span></code>: acepta solo valores «true» y «false».</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:anyURI</span></code>: acepta URIs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsd:anyType</span></code>: es como la clase <code class="docutils literal notranslate"><span class="pre">Object</span></code> en Java. Será el tipo del cual heredaremos cuando no vayamos a usar ningún tipo especial como tipo padre.</p></li>
</ul>
<p>La figura siguiente (tomada de la web del W3C) ilustra todos los tipos así como sus relaciones de herencia:</p>
<figure class="align-center" id="id6" style="width: 50%">
<img alt="_images/tipos_xml_schema.png" src="_images/tipos_xml_schema.png" />
<figcaption>
<p><span class="caption-text">Tipos en los XML Schemas</span><a class="headerlink" href="#id6" title="Enlace permanente a esta imagen">¶</a></p>
</figcaption>
</figure>
</section>
<section id="derivaciones">
<h3>Derivaciones<a class="headerlink" href="#derivaciones" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Prácticamente en cualquier esquema XML crearemos tipos nuevos (por establecer un símil es como si programásemos clases Java). Todos nuestros tipos tienen que heredar de otros tipos pero a la hora de «heredar» tenemos más posibilidades que en Java (dondo solo tenemos el «extends»). En concreto podemos heredar de 4 formas:</p>
<ol class="arabic simple">
<li><p>Poniendo restricciones (<code class="docutils literal notranslate"><span class="pre">restriction</span></code>). Consiste en tomar un tipo y crear otro nuevo en el que no se puede poner cualquier valor.</p></li>
<li><p>Extendiendo un tipo (<code class="docutils literal notranslate"><span class="pre">extension</span></code>). Se toma un tipo y se crea uno nuevo añadiendo cosas a los posibles valores que pueda tomar el tipo inicial.</p></li>
<li><p>Haciendo listas (<code class="docutils literal notranslate"><span class="pre">lists</span></code>). Es como crear vectores en Java.</p></li>
<li><p>Juntando otros tipos para crear tipos complejos (<code class="docutils literal notranslate"><span class="pre">union</span></code>). Es como crear clases Java en las que añadimos atributos de tipo <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">String</span></code>, etc…</p></li>
</ol>
<p>En general, las dos derivaciones más usadas con diferencia son las restricciones y las extensiones, que se comentan por separado en los puntos siguientes.</p>
</section>
<section id="tipos-simples-y-complejos">
<h3>Tipos simples y complejos<a class="headerlink" href="#tipos-simples-y-complejos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Todo elemento de un esquema debe ser de uno de estos dos tipos.</p>
<ul>
<li><p>Un elemento es de tipo simple si no permite dentro ni elementos hijo ni atributos.</p></li>
<li><p>Un elemento es tipo complejo si permite tener dentro otras cosas (que veremos en seguida). Un tipo complejo puede a su vez tener contenido simple o contenido complejo:</p>
<blockquote>
<div><ul class="simple">
<li><p>Los que son de contenido simple no permiten tener dentro elementos hijo pero sí permiten atributos.</p></li>
<li><p>Los que son de contenido complejo sí permiten tener dentro elementos hijo y atributos.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>El diagrama siguiente refleja como funciona la estructuración de tipos de los XML Schema.</p>
<figure class="align-center" id="id7" style="width: 50%">
<img alt="_images/Esquema-tipos.png" src="_images/Esquema-tipos.png" />
<figcaption>
<p><span class="caption-text">Tipos en los XML Schemas</span><a class="headerlink" href="#id7" title="Enlace permanente a esta imagen">¶</a></p>
</figcaption>
</figure>
<p>Así, por ejemplo un tipo simple que no lleve ninguna restricción se puede indicar con el campo <code class="docutils literal notranslate"><span class="pre">type</span></code> de un <code class="docutils literal notranslate"><span class="pre">element</span></code> como hacíamos antes:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:integer&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Sin embargo, si queremos indicar alguna restricción adicional ya no podremos usar el atributo <code class="docutils literal notranslate"><span class="pre">type</span></code>. Deberemos reescribir nuestro esquema así:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;xsd:simpleType&gt;</span>
    Aquí irán las restricciones, que hemos omitido por ahora.
   <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-edad-de-los-trabajadores">
<h3>Ejercicio:edad de los trabajadores<a class="headerlink" href="#ejercicio-edad-de-los-trabajadores" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se desea crear un esquema que permita validar la edad de un trabajador, que debe tener un valor entero de entre 16 y 65.</p>
<p>Por ejemplo, este XML debería validarse:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;edad&gt;</span>28<span class="nt">&lt;/edad&gt;</span>
</pre></div>
</div>
<p>Pero este no debería validarse:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;edad&gt;</span>-3<span class="nt">&lt;/edad&gt;</span>
</pre></div>
</div>
<p>La solución podría ser algo así:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
 <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;edad&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoEdad&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoEdad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:integer&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minInclusive</span> <span class="na">value=</span><span class="s">&quot;16&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:maxInclusive</span> <span class="na">value=</span><span class="s">&quot;65&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-peso-de-productos">
<h3>Ejercicio: peso de productos<a class="headerlink" href="#ejercicio-peso-de-productos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se desea crear un esquema que permita validar un elemento peso, que puede tener un valor de entre 0 y 1000 pero aceptando valores con decimales, como por ejemplo 28.88</p>
<p>Una posible solución sería:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:minInclusive</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xsd:maxInclusive</span> <span class="na">value=</span><span class="s">&quot;1000&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-pagos-validados">
<h3>Ejercicio: pagos validados<a class="headerlink" href="#ejercicio-pagos-validados" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Crear un esquema que permita validar un elemento <code class="docutils literal notranslate"><span class="pre">pago</span></code> en el cual puede haber cantidades enteras de entre 0 y 3000 euros.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
    <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;pago&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoPago&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPago&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:integer&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:minInclusive</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xsd:maxInclusive</span> <span class="na">value=</span><span class="s">&quot;3000&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-validacion-de-dnis">
<h3>Ejercicio: validación de DNIs<a class="headerlink" href="#ejercicio-validacion-de-dnis" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Crear un esquema que permita validar un único elemento <code class="docutils literal notranslate"><span class="pre">dni</span></code> que valide el patrón de 7-8 cifras + letra que suelen tener los DNI en España:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
    <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;dni&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoDNI&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoDNI&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[0-9]{7,8}[A-Z]&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="uniendo-la-herencia-y-el-sistema-de-tipos">
<h3>Uniendo la herencia y el sistema de tipos<a class="headerlink" href="#uniendo-la-herencia-y-el-sistema-de-tipos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Llegados a este punto ocurre lo siguiente:</p>
<ul class="simple">
<li><p>Por un lado tenemos que especificar si nuestros tipos serán simples o complejos (los cuales a su vez pueden ser complejos con contenido simple o complejos con contenido complejo).</p></li>
<li><p>Por otro lado se puede hacer herencia ampliando cosas (extensión) o reduciendo cosas (restricciones a los valores).</p></li>
</ul>
<p>Se deduce por tanto que no podemos aplicar todas las «herencias» a todos los tipos:</p>
<ol class="arabic simple">
<li><p>Los tipos simples no pueden tener atributos ni subelementos, por lo tanto <strong>les podremos aplicar restricciones pero nunca la extensión</strong>.</p></li>
<li><p>Los tipos complejos (independientemente del tipo de contenido) sí pueden tener otras cosas dentro por lo que <strong>les podremos aplicar tanto restricciones como extensiones</strong>.</p></li>
</ol>
</section>
<section id="restricciones">
<h3>Restricciones<a class="headerlink" href="#restricciones" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Como se ha dicho anteriormente la forma más común de trabajar es crear tipos que en unos casos aplicarán modificaciones en los tipos ya sea añadiendo cosas o restringiendo posibilidades. En este apartado se verá como aplicar restricciones.</p>
<p><strong>Si queremos aplicar restricciones para un tipo simple las posibles restricciones son:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">minInclusive</span></code> para indicar el menor valor numérico permitido.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxInclusive</span></code> para indicar el mayor valor numérico permitido.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minExclusive</span></code> para indicar el menor valor numérico que ya no estaría permitido.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxExclusive</span></code> para indicar el mayor valor numérico que ya no estaría permitido.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">totalDigits</span></code> para indicar cuantas posibles cifras se permiten.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fractionDigits</span></code> para indicar cuantas posibles cifras decimales se permiten.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">length</span></code> para indicar la longitud exacta de una cadena.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minLength</span></code> para indicar la longitud mínima de una cadena.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxLength</span></code> para indicar la longitud máxima de una cadena.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enumeration</span></code> para indicar los valores aceptados por una cadena.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pattern</span></code> para indicar la estructura aceptada por una cadena.</p></li>
</ul>
<p><strong>Si queremos aplicar restricciones para un tipo complejo con contenido las posibles restricciones son las mismas de antes, pero además podemos añadir el elemento &lt;attribute&gt; así como las siguientes.</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sequence</span></code> para indicar una secuencia de elementos</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">choice</span></code> para indicar que se debe elegir un elemento de entre los que aparecen.</p></li>
</ul>
</section>
<section id="id4">
<h3>Atributos<a class="headerlink" href="#id4" title="Enlace permanente a este encabezado">¶</a></h3>
<p>En primer lugar es muy importante recordar que <strong>si queremos que un elemento tenga atributos entonces ya no
se puede considerar que sea de tipo simple. Se debe usar FORZOSAMENTE un complexType</strong>. Por otro lado en los XML Schema todos los atributos <strong>son siempre opcionales, si queremos hacerlos obligatorios habrá que añadir un «required».</strong></p>
<p>Un atributo se define de la siguiente manera:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;fechanacimiento&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:date&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Esto define un atributo llamado <code class="docutils literal notranslate"><span class="pre">nombre</span></code> que aceptará solo fechas como valores válidos y que además es obligatorio poner siempre.</p>
</section>
</section>
<section id="ejercicios-de-xml-schemas">
<h2>Ejercicios de XML Schemas<a class="headerlink" href="#ejercicios-de-xml-schemas" title="Enlace permanente a este encabezado">¶</a></h2>
<section id="cantidades-limitades">
<h3>Cantidades limitades<a class="headerlink" href="#cantidades-limitades" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Crear un esquema que permita verificar algo como lo siguiente:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad&gt;</span>20<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
<p>Se necesita que la cantidad tenga solo valores aceptables entre -30 y +30.</p>
</section>
<section id="solucion-a-las-cantidades-limitadas">
<h3>Solución a las cantidades limitadas<a class="headerlink" href="#solucion-a-las-cantidades-limitadas" title="Enlace permanente a este encabezado">¶</a></h3>
<p>La primera pregunta que debemos hacernos es ¿necesitamos crear un tipo simple o uno complejo?. Dado que nuestro único elemento no tiene subelementos ni atributos dentro podemos afirmar que solo necesitamos un tipo simple.</p>
<p>Como aparentemente nuestro tipo necesita usar solo valores numéricos y además son muy pequeños nos vamos a limitar a usar un <code class="docutils literal notranslate"><span class="pre">short</span></code>. Sobre ese <code class="docutils literal notranslate"><span class="pre">short</span></code> pondremos una restriccion que permita indicar los valores mínimo y máximo.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xs:schema</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:simpleType&gt;</span>
            <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:short&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xs:minInclusive</span> <span class="na">value=</span><span class="s">&quot;-30&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xs:maxInclusive</span> <span class="na">value=</span><span class="s">&quot;30&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xs:restriction&gt;</span>
        <span class="nt">&lt;/xs:simpleType&gt;</span>
    <span class="nt">&lt;/xs:element&gt;</span>
<span class="nt">&lt;/xs:schema&gt;</span>
</pre></div>
</div>
<p>Este esquema dice que el elemento raíz debe ser <code class="docutils literal notranslate"><span class="pre">cantidad</span></code>. Luego indica que es un tipo simple y dentro de él indica que se va a establecer una restricción teniendo en mente que se va a «heredar» del tipo <code class="docutils literal notranslate"><span class="pre">short</span></code>. En concreto se van a poner dos restricciones, una que el valor mínimo debe ser -30 y otra que el valor máximo debe ser 30.</p>
<p>Existe una alternativa más recomendable, que es separar los elementos de los tipos. De esa manera, se pueden «reutilizar» las definiciones de tipos.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xs:schema</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCantidades&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/xs:element&gt;</span>
    <span class="nt">&lt;xs:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCantidades&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:short&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xs:minInclusive</span> <span class="na">value=</span><span class="s">&quot;-30&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xs:maxInclusive</span> <span class="na">value=</span><span class="s">&quot;30&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xs:restriction&gt;</span>
        <span class="nt">&lt;/xs:simpleType&gt;</span>
<span class="nt">&lt;/xs:schema&gt;</span>
</pre></div>
</div>
<p>Obsérvese que hemos puesto el tipo por separado y le hemos dado el nombre <code class="docutils literal notranslate"><span class="pre">tipoCantidades</span></code>. El elemento raíz tiene su nombre y su tipo en la misma línea.</p>
</section>
<section id="cantidades-limitadas-con-atributo-divisa">
<h3>Cantidades limitadas con atributo divisa<a class="headerlink" href="#cantidades-limitadas-con-atributo-divisa" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se desea crear un esquema para validar XML en los que haya un solo elemento raíz llamado cantidad en el que se debe poner siempre un atributo «divisa» que indique en qué moneda está una cierta cantidad. El atributo divisa siempre será una cadena y la cantidad siempre será un tipo numérico que acepte decimales (por ejemplo <code class="docutils literal notranslate"><span class="pre">float</span></code>). El esquema debe validar los archivos siguientes:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad</span> <span class="na">divisa=</span><span class="s">&quot;euro&quot;</span><span class="nt">&gt;</span>20<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad</span> <span class="na">divisa=</span><span class="s">&quot;dolar&quot;</span><span class="nt">&gt;</span>18.32<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
<p>Pero no debe validar ninguno de los siguientes:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad&gt;</span>20<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad</span> <span class="na">divisa=</span><span class="s">&quot;dolar&quot;</span><span class="nt">&gt;</span>abc<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
</section>
<section id="solucion-a-las-cantidades-limitadas-con-atributo-divisa">
<h3>Solución a las cantidades limitadas con atributo divisa<a class="headerlink" href="#solucion-a-las-cantidades-limitadas-con-atributo-divisa" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Crearemos un tipo llamado «tipoCantidad». Dicho tipo <em>ya no puede ser un simpleType ya que necesitamos que haya atributos</em>. Como no necesitamos que tenga dentro subelementos entonces este <code class="docutils literal notranslate"><span class="pre">complexType</span></code> llevará dentro un <code class="docutils literal notranslate"><span class="pre">simpleContent</span></code> (y no un <code class="docutils literal notranslate"><span class="pre">complexContent</span></code>).</p>
<p>Aparte de eso, como queremos «ampliar» un elemento para que acepte tener dentro un atributo obligatorio «cantidad» usaremos una <code class="docutils literal notranslate"><span class="pre">&lt;extension&gt;</span></code>. Así, el posible esquema sería este:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCantidad&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoCantidad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:float&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;divisa&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="cantidades-limitadas-con-atributo-divisa-con-solo-ciertos-valores">
<h3>Cantidades limitadas con atributo divisa con solo ciertos valores<a class="headerlink" href="#cantidades-limitadas-con-atributo-divisa-con-solo-ciertos-valores" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Queremos ampliar el ejercicio anterior para evitar que ocurran errores como el siguiente:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad</span> <span class="na">divisa=</span><span class="s">&quot;aaaa&quot;</span><span class="nt">&gt;</span>18.32<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
<p>Vamos a indicar que el atributo solo puede tomar tres posibles valores: «euros», «dolares» y «yenes».</p>
</section>
<section id="solucion-al-atributo-con-solo-ciertos-valores">
<h3>Solución al atributo con solo ciertos valores<a class="headerlink" href="#solucion-al-atributo-con-solo-ciertos-valores" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Ahora tendremos que crear dos tipos. Uno para el elemento <code class="docutils literal notranslate"><span class="pre">cantidad</span></code> y otro para el atributo <code class="docutils literal notranslate"><span class="pre">divisa</span></code>. Llamaremos a estos tipos <code class="docutils literal notranslate"><span class="pre">tipoCantidad</span></code> y <code class="docutils literal notranslate"><span class="pre">tipoDivisa</span></code>.</p>
<p>La solución comentada puede encontrarse a continuación. Como puede verse, hemos includo comentarios. Pueden insertarse etiquetas <code class="docutils literal notranslate"><span class="pre">annotation</span></code> que permiten incluir anotaciones de diversos tipos, siendo la más interesante la etiqueta <code class="docutils literal notranslate"><span class="pre">documentation</span></code> que nos permite incluir comentarios.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCantidad&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:annotation&gt;</span>
        <span class="nt">&lt;xsd:documentation&gt;</span>
        A continuación creamos el tipo cantidad
        <span class="nt">&lt;/xsd:documentation&gt;</span>
    <span class="nt">&lt;/xsd:annotation&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoCantidad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:annotation&gt;</span>
            <span class="nt">&lt;xsd:documentation&gt;</span>
            Como solo va a llevar atributos debemos
            usar un simpleContent
            <span class="nt">&lt;/xsd:documentation&gt;</span>
        <span class="nt">&lt;/xsd:annotation&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:annotation&gt;</span>
                <span class="nt">&lt;xsd:documentation&gt;</span>
                Como queremos &quot;ampliar&quot; un tipo/clase
                para que lleve atributos usaremos
                una extension
                <span class="nt">&lt;/xsd:documentation&gt;</span>
            <span class="nt">&lt;/xsd:annotation&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:float&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;divisa&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoDivisa&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:annotation&gt;</span>
        <span class="nt">&lt;xsd:documentation&gt;</span>
        Ahora tenemos que fabricar el &quot;tipoDivisa&quot; que indica
        los posibles valores válidos para una divisa. Estas
        posibilidades se crean con una &quot;enumeration&quot;. Nuestro
        tipo es un &quot;string&quot; y como vamos a restringir los posibles
        valores usaremos &quot;restriction&quot;
        <span class="nt">&lt;/xsd:documentation&gt;</span>
    <span class="nt">&lt;/xsd:annotation&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoDivisa&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;euros&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;dolares&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;yenes&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-codigos-y-sedes">
<h3>Ejercicio: codigos y sedes<a class="headerlink" href="#ejercicio-codigos-y-sedes" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se necesita tener un esquema que valide un fichero en el que hay un solo elemento llamado <code class="docutils literal notranslate"><span class="pre">codigo</span></code></p>
<ul class="simple">
<li><p>Dentro de código hay una cadena con una estructura rígida: 2 letras mayúsculas, seguidas de 2 cifras, seguidas a su vez de 3 letras.</p></li>
<li><p>El elemento <code class="docutils literal notranslate"><span class="pre">código</span></code> debe llevar un atributo <code class="docutils literal notranslate"><span class="pre">sede</span></code> que será de tipo cadena.</p></li>
</ul>
</section>
<section id="solucion-a-los-codigos-y-sedes">
<h3>Solución a los códigos y sedes<a class="headerlink" href="#solucion-a-los-codigos-y-sedes" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se nos piden dos cosas:</p>
<ol class="arabic simple">
<li><p>Restringir un tipo básico, en este caso el <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p>Extender una etiqueta para que tenga un atributo.</p></li>
</ol>
<p>Como no se puede hacer a la vez, deberemos dar dos pasos. Primero crearemos un tipo con la restricción y despues crearemos un segundo tipo con la extensión.</p>
<p><strong>Cuando haya conflictos, siempre debemos crear primero la restricción y luego la extensión</strong></p>
<p>Así, creamos primero esto:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;codigo&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCodigoRestringido&quot;</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigoRestringido&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
           <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[A-Z]{2}[0-9]{2}[A-Z]{3}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Y despues lo ampliamos para que se convierta en esto:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;codigo&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigoRestringido&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[A-Z]{2}[0-9]{2}[A-Z]{3}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>

    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;tipoCodigoRestringido&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;sede&quot;</span>
                               <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span>
                               <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-productos-con-atributos">
<h3>Ejercicio: productos con atributos<a class="headerlink" href="#ejercicio-productos-con-atributos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se desea crear un esquema que permita validar un elemento raíz llamado <code class="docutils literal notranslate"><span class="pre">producto</span></code> de tipo <code class="docutils literal notranslate"><span class="pre">xsd:string</span></code>. El producto tiene dos atributos:</p>
<ul class="simple">
<li><p>Un atributo se llamará <code class="docutils literal notranslate"><span class="pre">cantidad</span></code> y es obligatorio. Debe aceptar solo enteros positivos.</p></li>
<li><p>También habrá un atributo llamado <code class="docutils literal notranslate"><span class="pre">unidad</span></code> que solo acepta los <code class="docutils literal notranslate"><span class="pre">xsd:string</span></code> «cajas» y «pales».</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
    <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;producto&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoProducto&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoProducto&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:simpleContent&gt;</span>
      <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span>
              <span class="na">type=</span><span class="s">&quot;xsd:unsignedInt&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;unidad&quot;</span>
              <span class="na">type=</span><span class="s">&quot;tipoUnidad&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/xsd:extension&gt;</span>
    <span class="nt">&lt;/xsd:simpleContent&gt;</span>
  <span class="nt">&lt;/xsd:complexType&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoUnidad&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;caja&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;pale&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-clientes-con-informacion-adicional">
<h3>Ejercicio: clientes con información adicional<a class="headerlink" href="#ejercicio-clientes-con-informacion-adicional" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se desea crear un esquema XML que permita validar un elemento llamado <code class="docutils literal notranslate"><span class="pre">cliente</span></code> que puede almacenar un <code class="docutils literal notranslate"><span class="pre">xsd:string</span></code>. El cliente contiene:</p>
<ul class="simple">
<li><p>Un atributo obligatorio llamado <code class="docutils literal notranslate"><span class="pre">codigo</span></code> que contiene el código del cliente, que siempre consta de tres letras mayúsculas de tres números.</p></li>
<li><p>Un atributo optativo llamado <code class="docutils literal notranslate"><span class="pre">habitual</span></code> que se usará para saber si es un cliente habitual o no. Acepta valores «true» y «false».</p></li>
<li><p>Un atributo optativo llamado <code class="docutils literal notranslate"><span class="pre">cantidad</span></code> que indica su compra. Es un entero con valores de entre 0 y 1000.</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;cliente</span> <span class="na">codigo=</span><span class="s">&quot;AAA222&quot;</span> <span class="na">habitual=</span><span class="s">&quot;true&quot;</span> <span class="na">cantidad=</span><span class="s">&quot;1000&quot;</span><span class="nt">&gt;</span>
    Pepe Pérez
<span class="nt">&lt;/cliente&gt;</span>
</pre></div>
</div>
</section>
<section id="lista-de-clientes-como-xml-schemas">
<h3>Lista de clientes como XML Schemas<a class="headerlink" href="#lista-de-clientes-como-xml-schemas" title="Enlace permanente a este encabezado">¶</a></h3>
<p>En este apartado volveremos a ver un problema que ya resolvíamos con DTD: supongamos que en nuestros ficheros deseamos indicar que el elemento raíz es <code class="docutils literal notranslate"><span class="pre">&lt;listaclientes&gt;</span></code>. Dentro de <code class="docutils literal notranslate"><span class="pre">&lt;listaclientes&gt;</span></code> deseamos permitir uno o más elementos <code class="docutils literal notranslate"><span class="pre">&lt;cliente&gt;</span></code>. Dentro de <code class="docutils literal notranslate"><span class="pre">&lt;cliente&gt;</span></code> todos deberán tener <code class="docutils literal notranslate"><span class="pre">&lt;cif&gt;</span></code> y <code class="docutils literal notranslate"><span class="pre">&lt;nombre&gt;</span></code> y en ese orden. Dentro de <code class="docutils literal notranslate"><span class="pre">&lt;cliente&gt;</span></code> puede aparecer o no un elemento <code class="docutils literal notranslate"><span class="pre">&lt;diasentrega&gt;</span></code> para indicar que ese cliente exige un máximo de plazo. Como no todo el mundo usa plazos el <code class="docutils literal notranslate"><span class="pre">&lt;diasentrega&gt;</span></code> es optativo.</p>
<p>Vayamos paso a paso. Primero decimos como se llama el elemento raíz y de qué tipo es:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaclientes&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Ahora queda definir el tipo <code class="docutils literal notranslate"><span class="pre">tipoListaClientes</span></code>. Este tipo va a contener un elemento (por lo que ya sabemos que es un <code class="docutils literal notranslate"><span class="pre">complexType</span></code> con <code class="docutils literal notranslate"><span class="pre">complexContent</span></code> dentro), y en concreto queremos que sea un solo elemento llamado <code class="docutils literal notranslate"><span class="pre">cliente</span></code>, es decir <strong>queremos imponer una restricción</strong>. Aunque queramos un solo elemento tendremos que indicar una restricción. Como queremos permitir que el elemento pueda aparecer muchas veces utilizaremos un <code class="docutils literal notranslate"><span class="pre">maxOccurs</span></code> con el valor <code class="docutils literal notranslate"><span class="pre">unbounded</span></code>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaclientes&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cliente&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCliente&quot;</span>
                <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Definamos ahora el tipo <code class="docutils literal notranslate"><span class="pre">tipoCliente</span></code>. Dicho tipo <strong>necesita tener subelementos dentro</strong> así que evidentemente va a ser de tipo complejo. La pregunta es ¿es «tipo complejo con contenido simple» o «tipo complejo con contenido complejo»?. Si lo hiciéramos de «tipo complejo con contenido simple» podríamos tener atributos pero no subelementos, así que forzosamente tendrá que ser de un «tipo complejo con contenido complejo». Igual que antes impondremos una restricciones que es permitir solo que aparezcan ciertos elementos en cierto orden. El elemento <code class="docutils literal notranslate"><span class="pre">plazo</span></code> lo haremos optativo.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaclientes&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cliente&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCliente&quot;</span>
                    <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoCliente&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cif&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;nombre&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;plazo&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span>
                    <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Si ahora probamos este XML veremos que el fichero se valida perfectamente a pesar de que es evidente que tiene errores. Es lógico, dado que no hemos aprovechado a fondo el sistema de tipos de XML para evitar que nadie suministre datos incorrectos en un XML. Dicha mejora la dejaremos para el siguiente ejercicio.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
    <span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;cif&gt;</span>dd<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>20<span class="nt">&lt;/nombre&gt;</span>
    <span class="nt">&lt;/cliente&gt;</span>
    <span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;cif&gt;</span>dd<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>20<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;plazo&gt;</span>ABCD<span class="nt">&lt;/plazo&gt;</span>
    <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
</section>
<section id="ampliacion-del-esquema-para-clientes">
<h3>Ampliación del esquema para clientes<a class="headerlink" href="#ampliacion-del-esquema-para-clientes" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Ahora ampliaremos el XML Schema del fichero anterior para que nadie suministre información incorrecta.</p>
<p>En concreto tenemos tres datos:</p>
<ol class="arabic simple">
<li><p>El CIF, que vamos a presuponer que siempre tiene 8 cifras y al final una letra mayúsculas. Si alguna empresa tiene 7 cifras deberá incluir un 0 extra.</p></li>
<li><p>El nombre, que puede ser una cadena cualquiera.</p></li>
<li><p>El plazo, que debería ser un número positivo válido.</p></li>
</ol>
<p>Ahora, el fichero anterior no debería ser validado por el validador, pero sí debería serlo un fichero como este.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
    <span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;cif&gt;</span>01234567D<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Juan Sanchez<span class="nt">&lt;/nombre&gt;</span>
    <span class="nt">&lt;/cliente&gt;</span>
    <span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;cif&gt;</span>05676554A<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Pedro Diaz<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;plazo&gt;</span>45<span class="nt">&lt;/plazo&gt;</span>
    <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>La solución a los tres problemas indicados antes sería la siguiente:</p>
<ol class="arabic simple">
<li><p>El nombre puede ser una cadena cualquiera, por lo que tendrá que seguir siendo de tipo <code class="docutils literal notranslate"><span class="pre">xsd:string</span></code>. Eso significa que si alguien introdujese un número en el nombre el fichero seguiría validándose. Por desgracia dicho problema no se puede resolver.</p></li>
<li><p>El plazo debería ser un número. Le asignaremos un tipo <code class="docutils literal notranslate"><span class="pre">xsd:unsignedInt</span></code>.</p></li>
<li><p>El CIF es más complejo. Deberemos crear un tipo nuevo y establecer una restricción a los posibles valores que puede tomar.</p></li>
</ol>
<p>Así, una posible solución sería esta:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaclientes&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cliente&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCliente&quot;</span>
                        <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>

    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoCliente&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cif&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCif&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;nombre&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;plazo&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:unsignedInt&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCif&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[0-9]{8}[A-Z]&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPlazo&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:unsignedInt&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-lista-de-codigos">
<h3>Ejercicio: lista de códigos<a class="headerlink" href="#ejercicio-lista-de-codigos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se nos pide crear un esquema que permita validar un fichero como el siguiente:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listacodigos&gt;</span>
  <span class="nt">&lt;codigo&gt;</span>AAA2DD<span class="nt">&lt;/codigo&gt;</span>
  <span class="nt">&lt;codigo&gt;</span>BBB2EE<span class="nt">&lt;/codigo&gt;</span>
  <span class="nt">&lt;codigo&gt;</span>BBB2EE<span class="nt">&lt;/codigo&gt;</span>
<span class="nt">&lt;/listacodigos&gt;</span>
</pre></div>
</div>
<p>En concreto, todo código tiene la estructura siguiente:</p>
<ol class="arabic simple">
<li><p>Primero van tres mayúsculas</p></li>
<li><p>Despues va exactamente un digito.</p></li>
<li><p>Por último hay exactamente dos mayúsculas.</p></li>
</ol>
<p>Un posible esquema XML sería el siguiente (obsérvese como usamos <code class="docutils literal notranslate"><span class="pre">maxOccurs</span></code> para indicar que el elemento puede repetirse un máximo de «infitas veces»:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
    <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listacodigos&quot;</span>
               <span class="na">type=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
      <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:sequence&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;codigo&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;tipoCodigo&quot;</span>
                       <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:sequence&gt;</span>
      <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
  <span class="nt">&lt;/xsd:complexType&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[A-Z]{3}[0-9][A-Z]{2}&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-otra-lista-de-clientes">
<h3>Ejercicio: otra lista de clientes<a class="headerlink" href="#ejercicio-otra-lista-de-clientes" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Ahora se nos pide crear un esquema que permita validar un fichero como el siguiente, en el que hay una lista de clientes y el nombre es optativo, aunque los apellidos son obligatorios:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
  <span class="nt">&lt;cliente&gt;</span>
    <span class="nt">&lt;nombre&gt;</span>Juan<span class="nt">&lt;/nombre&gt;</span>
    <span class="nt">&lt;apellidos&gt;</span>Sanchez<span class="nt">&lt;/apellidos&gt;</span>
  <span class="nt">&lt;/cliente&gt;</span>
  <span class="nt">&lt;cliente&gt;</span>
    <span class="nt">&lt;nombre&gt;</span>Jose<span class="nt">&lt;/nombre&gt;</span>
    <span class="nt">&lt;apellidos&gt;</span>Diaz<span class="nt">&lt;/apellidos&gt;</span>
  <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>La solución puede ser algo así:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
  <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaclientes&quot;</span>
               <span class="na">type=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
      <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:sequence&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cliente&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;tipoCliente&quot;</span>
                       <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:sequence&gt;</span>
      <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
  <span class="nt">&lt;/xsd:complexType&gt;</span>

  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoCliente&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
      <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:sequence&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;nombre&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span>
                       <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;apellidos&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:sequence&gt;</span>
      <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:complexContent&gt;</span>
  <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-lista-de-alumnos">
<h3>Ejercicio: lista de alumnos<a class="headerlink" href="#ejercicio-lista-de-alumnos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se desea construir un esquema para validar listas de alumnos en las que:</p>
<ul class="simple">
<li><p>La raíz es <code class="docutils literal notranslate"><span class="pre">listaalumnos</span></code>.</p></li>
<li><p>Dentro de ella hay uno o más <code class="docutils literal notranslate"><span class="pre">alumno</span></code>. Todo <code class="docutils literal notranslate"><span class="pre">alumno</span></code> tiene siempre un atributo DNI que es obligatorio y que tiene una estructura formada por 7 u 8 cifras seguidas de una mayúscula.</p></li>
<li><p>Todo <code class="docutils literal notranslate"><span class="pre">alumno</span></code> tiene un elemento <code class="docutils literal notranslate"><span class="pre">nombre</span></code> y un <code class="docutils literal notranslate"><span class="pre">ap1</span></code> obligatorios.</p></li>
<li><p>Todo <code class="docutils literal notranslate"><span class="pre">alumno</span></code> puede tener despues del <code class="docutils literal notranslate"><span class="pre">ap1</span></code> un elemento <code class="docutils literal notranslate"><span class="pre">ap2</span></code> y uno <code class="docutils literal notranslate"><span class="pre">edad</span></code>, ambos son optativos.</p></li>
<li><p>El elemento <code class="docutils literal notranslate"><span class="pre">edad</span></code> debe ser entero y positivo.</p></li>
</ul>
<p>(Gracias a Jesús VB por corregir una errata)</p>
<p>Un ejemplo de fichero:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaalumnos&gt;</span>
    <span class="cm">&lt;!--DNI atributo obligatorio--&gt;</span>
    <span class="nt">&lt;alumno</span> <span class="na">dni=</span><span class="s">&quot;5667545Z&quot;</span><span class="nt">&gt;</span>
        <span class="cm">&lt;!--Nombre y ap1 obligatorios--&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Jose<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;ap1&gt;</span>Sanchez<span class="nt">&lt;/ap1&gt;</span>
    <span class="nt">&lt;/alumno&gt;</span>
    <span class="nt">&lt;alumno</span> <span class="na">dni=</span><span class="s">&quot;5778221D&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Andres<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;ap1&gt;</span>Ruiz<span class="nt">&lt;/ap1&gt;</span>
        <span class="cm">&lt;!--Ap2 y edad son optativos--&gt;</span>
        <span class="nt">&lt;ap2&gt;</span>Ruiz<span class="nt">&lt;/ap2&gt;</span>
        <span class="cm">&lt;!--La edad debe ser positiva--&gt;</span>
        <span class="nt">&lt;edad&gt;</span>25<span class="nt">&lt;/edad&gt;</span>
    <span class="nt">&lt;/alumno&gt;</span>
<span class="nt">&lt;/listaalumnos&gt;</span>
</pre></div>
</div>
<p>Y a continuación una posible solución:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaalumnos&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoListaAlumnos&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoListaAlumnos&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;alumno&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoAlumno&quot;</span>
                                 <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoAlumno&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;nombre&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;ap1&quot;</span>
                                <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;ap2&quot;</span>
                                <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span>
                                <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;edad&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;xsd:positiveInteger&quot;</span>
                                 <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;dni&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoDNI&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoDNI&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[0-9]{7,8}[A-Z]&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>

<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-lista-de-articulos-con-atributos-optativos">
<h3>Ejercicio: lista de articulos (con atributos optativos)<a class="headerlink" href="#ejercicio-lista-de-articulos-con-atributos-optativos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Supongamos el fichero siguiente con las reglas que se explicitan en los comentarios:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaproductos&gt;</span>
    <span class="nt">&lt;articulo&gt;</span>
        <span class="cm">&lt;!--Estructura 2 letras,2 cifras--&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>CD12<span class="nt">&lt;/codigo&gt;</span>
        <span class="cm">&lt;!--Descripcion es optativo y su atributo autor tb--&gt;</span>
        <span class="nt">&lt;descripcion</span> <span class="na">autor=</span><span class="s">&quot;Pepe&quot;</span><span class="nt">&gt;</span>Monitor<span class="nt">&lt;/descripcion&gt;</span>
    <span class="nt">&lt;/articulo&gt;</span>
    <span class="nt">&lt;articulo&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>CA12<span class="nt">&lt;/codigo&gt;</span>
    <span class="nt">&lt;/articulo&gt;</span>
    <span class="nt">&lt;articulo&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>AA99<span class="nt">&lt;/codigo&gt;</span>
        <span class="nt">&lt;descripcion&gt;</span>Teclado<span class="nt">&lt;/descripcion&gt;</span>
    <span class="nt">&lt;/articulo&gt;</span>
<span class="nt">&lt;/listaproductos&gt;</span>
</pre></div>
</div>
<p>A continuación se muestra una solución con un esquema que valida ficheros como el indicado:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaproductos&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoListaProductos&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoListaProductos&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;articulo&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoArticulo&quot;</span>
                                 <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span> <span class="cm">&lt;!--Fin de listaarticulos--&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoArticulo&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;codigo&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;descripcion&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoDescripcion&quot;</span>
                                 <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span> <span class="cm">&lt;!--Fin de  articulo--&gt;</span>

    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[A-Z]{2}[0-9]{2}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span> <span class="cm">&lt;!--Fin de codigo--&gt;</span>

    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoDescripcion&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;autor&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-lista-de-componentes-un-enfoque-distinto">
<h3>Ejercicio: lista de componentes (un enfoque distinto)<a class="headerlink" href="#ejercicio-lista-de-componentes-un-enfoque-distinto" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Dado un archivo como el siguiente en el cual aparecen
las reglas incluidas como comentarios, crear el esquema que
valide la estructura de tales ficheros:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listacomponentes&gt;</span>
    <span class="cm">&lt;!--Obligatoria fecha entrega--&gt;</span>
    <span class="nt">&lt;componente</span> <span class="na">entrega=</span><span class="s">&quot;2018-03-15&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;fabricante&gt;</span>
            <span class="cm">&lt;!--Posibles fabricantes FAB1, FAB2 y FAB3--&gt;</span>
            <span class="nt">&lt;nombre&gt;</span>FAB1<span class="nt">&lt;/nombre&gt;</span>
            <span class="cm">&lt;!--Calificacion es un string y es optativa--&gt;</span>
            <span class="nt">&lt;calificacion&gt;</span>Positiva<span class="nt">&lt;/calificacion&gt;</span>
        <span class="nt">&lt;/fabricante&gt;</span>
        <span class="cm">&lt;!--Atributo unidad es cadena. Dentro de peso</span>
<span class="cm">        solo puede haber numeros con decimales y mayores de 0--&gt;</span>
        <span class="nt">&lt;peso</span> <span class="na">unidad=</span><span class="s">&quot;kg&quot;</span><span class="nt">&gt;</span>40.5<span class="nt">&lt;/peso&gt;</span>
    <span class="nt">&lt;/componente&gt;</span>
    <span class="nt">&lt;componente</span> <span class="na">entrega=</span><span class="s">&quot;2018-12-31&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;fabricante&gt;</span>
            <span class="nt">&lt;nombre&gt;</span>FAB2<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/fabricante&gt;</span>
        <span class="nt">&lt;peso</span> <span class="na">unidad=</span><span class="s">&quot;miligramos&quot;</span><span class="nt">&gt;</span>260.5<span class="nt">&lt;/peso&gt;</span>
    <span class="nt">&lt;/componente&gt;</span>
<span class="nt">&lt;/listacomponentes&gt;</span>
</pre></div>
</div>
<p>Ahora en lugar de ir definiendo tipos empezando por el elemento raíz vamos a ir definiendo primero los tipos de los elementos más básicos que encontremos, e iremos construyendo los tipos más complejos a partir de los tipos fáciles que ya hayamos construido. Como veremos despues, el resultado va a ser el mismo.</p>
<p>La solución:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>n<span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoNombre&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;FAB1&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;FAB2&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;FAB3&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="cm">&lt;!--Tipo auxiliar, el atributo lo incluimos despues--&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPesoRestringido&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:float&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minExclusive</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>

    <span class="cm">&lt;!--En este tipo peso incluimos ya el atributo--&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;tipoPesoRestringido&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;unidad&quot;</span>
                               <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>

    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoFabricante&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;nombre&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoNombre&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;calificacion&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span>
                                 <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoComponente&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:sequence&gt;</span>
            <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;fabricante&quot;</span>
                         <span class="na">type=</span><span class="s">&quot;tipoFabricante&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:sequence&gt;</span>
        <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;entrega&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:date&quot;</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;/xsd:complexType&gt;</span>

    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoListaComponentes&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:sequence&gt;</span>
            <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;componente&quot;</span>
                         <span class="na">type=</span><span class="s">&quot;tipoComponente&quot;</span>
                         <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:sequence&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>

    <span class="cm">&lt;!--Aunque el elemento aparezca al final,</span>
<span class="cm">    no pasa nada--&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listacomponentes&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoListaComponentes&quot;</span><span class="nt">/&gt;</span>

<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-listas-con-choice">
<h3>Ejercicio: listas con choice<a class="headerlink" href="#ejercicio-listas-con-choice" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se pide elaborar un esquema que valide un fichero con las restricciones siguientes:</p>
<ul class="simple">
<li><p>El elemento raíz es <code class="docutils literal notranslate"><span class="pre">articulos</span></code>. Dicho elemento raíz debe llevar siempre un atributo <code class="docutils literal notranslate"><span class="pre">fechaGeneración</span></code>.</p></li>
<li><p>Dentro de la raíz puede haber uno o varios de cualquiera de los siguientes elementos: <code class="docutils literal notranslate"><span class="pre">monitor</span></code>, <code class="docutils literal notranslate"><span class="pre">teclado</span></code> o <code class="docutils literal notranslate"><span class="pre">raton</span></code>. Cualquiera de los tres elementos puede llevar un atributo <code class="docutils literal notranslate"><span class="pre">codigo</span></code> que tiene siempre la estructura «tres letras, guión, tres letras, guión, tres cifras». Además, cualquiera de los tres debe llevar dentro y en primer lugar un elemento <code class="docutils literal notranslate"><span class="pre">descripción</span></code> que contiene texto.</p></li>
<li><p>Un monitor debe llevar (aparte de la descripción que va en primer lugar) un elemento <code class="docutils literal notranslate"><span class="pre">resolución</span></code> que a su vez debe llevar dentro dos elementos y en este orden <code class="docutils literal notranslate"><span class="pre">ancho</span></code> y <code class="docutils literal notranslate"><span class="pre">alto</span></code>. Tanto <code class="docutils literal notranslate"><span class="pre">ancho</span></code>, como <code class="docutils literal notranslate"><span class="pre">alto</span></code> deben llevar siempre dentro un entero positivo.</p></li>
<li><p>Un <code class="docutils literal notranslate"><span class="pre">ratón</span></code> debe llevar (aparte de la descripción que va en primer lugar) un elemento <code class="docutils literal notranslate"><span class="pre">peso</span></code> que siempre lleva dentro un entero positivo. Además, el <code class="docutils literal notranslate"><span class="pre">peso</span></code> lleva siempre dentro un atributo <code class="docutils literal notranslate"><span class="pre">unidad</span></code> que solo puede valer «g» o «cg».</p></li>
</ul>
<p>En el fichero siguiente se muestra un ejemplo</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--Obligatorio el tener fechaGeneracion--&gt;</span>
<span class="nt">&lt;articulos</span> <span class="na">fechageneracion=</span><span class="s">&quot;2018-03-01&quot;</span><span class="nt">&gt;</span>
    <span class="cm">&lt;!--El atributo codigo es optativo siempre--&gt;</span>
    <span class="nt">&lt;monitor</span> <span class="na">codigo=</span><span class="s">&quot;AAA-DDD-222&quot;</span><span class="nt">&gt;</span>
        <span class="cm">&lt;!--Descripcion obligatoria--&gt;</span>
        <span class="nt">&lt;descripcion&gt;</span>Monitor de x pulgadas...<span class="nt">&lt;/descripcion&gt;</span>
        <span class="nt">&lt;resolucion&gt;</span>
            <span class="nt">&lt;ancho&gt;</span>1920<span class="nt">&lt;/ancho&gt;</span>
            <span class="nt">&lt;alto&gt;</span>1400<span class="nt">&lt;/alto&gt;</span>
        <span class="nt">&lt;/resolucion&gt;</span>
    <span class="nt">&lt;/monitor&gt;</span>
    <span class="nt">&lt;raton&gt;</span>
        <span class="cm">&lt;!--Descripcion obligatoria--&gt;</span>
        <span class="nt">&lt;descripcion&gt;</span>Raton ergonomico...<span class="nt">&lt;/descripcion&gt;</span>
        <span class="cm">&lt;!--La unidad es g o cg--&gt;</span>
        <span class="nt">&lt;peso</span> <span class="na">unidad=</span><span class="s">&quot;g&quot;</span><span class="nt">&gt;</span>100<span class="nt">&lt;/peso&gt;</span>
    <span class="nt">&lt;/raton&gt;</span>
    <span class="nt">&lt;teclado</span> <span class="na">codigo=</span><span class="s">&quot;DDD-XXX-111&quot;</span><span class="nt">&gt;</span>
        <span class="cm">&lt;!---Descripcion obligatoria--&gt;</span>
        <span class="nt">&lt;descripcion&gt;</span>Teclado estándar<span class="nt">&lt;/descripcion&gt;</span>
    <span class="nt">&lt;/teclado&gt;</span>
    <span class="nt">&lt;monitor</span> <span class="na">codigo=</span><span class="s">&quot;CCC-GGG-666&quot;</span><span class="nt">&gt;</span>
        <span class="cm">&lt;!--Descripcion obligatoria--&gt;</span>
        <span class="nt">&lt;descripcion&gt;</span>Monitor de x pulgadas...<span class="nt">&lt;/descripcion&gt;</span>
        <span class="nt">&lt;resolucion&gt;</span>
            <span class="nt">&lt;ancho&gt;</span>1400<span class="nt">&lt;/ancho&gt;</span>
            <span class="nt">&lt;alto&gt;</span>1000<span class="nt">&lt;/alto&gt;</span>
        <span class="nt">&lt;/resolucion&gt;</span>
    <span class="nt">&lt;/monitor&gt;</span>
<span class="nt">&lt;/articulos&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-listas-de-productos">
<h3>Ejercicio: listas de productos<a class="headerlink" href="#ejercicio-listas-de-productos" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Se pide validar correctamente algo como esto:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listaproductos&gt;</span>
  <span class="nt">&lt;producto</span> <span class="na">codigo=</span><span class="s">&quot;DX-22&quot;</span><span class="nt">&gt;</span><span class="cm">&lt;!--Codigo obligatorio--&gt;</span>
    <span class="nt">&lt;descripcion&gt;</span>Ordenador<span class="nt">&lt;/descripcion&gt;</span><span class="cm">&lt;!--Optativa--&gt;</span>
    <span class="nt">&lt;peso&gt;</span>23.44<span class="nt">&lt;/peso&gt;</span><span class="cm">&lt;!--Positivo con decimales--&gt;</span>
  <span class="nt">&lt;/producto&gt;</span>
  <span class="nt">&lt;producto</span> <span class="na">codigo=</span><span class="s">&quot;CX-124&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;peso&gt;</span>17.50<span class="nt">&lt;/peso&gt;</span>
  <span class="nt">&lt;/producto&gt;</span>
  <span class="nt">&lt;producto</span> <span class="na">codigo=</span><span class="s">&quot;CX-124&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;peso&gt;</span>17.50<span class="nt">&lt;/peso&gt;</span>
  <span class="nt">&lt;/producto&gt;</span>
<span class="nt">&lt;/listaproductos&gt;</span>
</pre></div>
</div>
<p>Las reglas son:</p>
<ol class="arabic simple">
<li><p>Una lista de productos puede tener dentro muchos productos.</p></li>
<li><p>Todo producto tiene un «codigo» cuya estructura <em>dos mayúsculas seguidas de un guión seguido de dos o tres cifras</em></p></li>
<li><p>Todo producto <em>puede tener (optativo)</em> un elemento descripción que es de tipo texto.</p></li>
<li><p>Todo producto <strong>debe tener</strong> un elemento peso que debe aceptar decimales pero que nunca puede ser negativo, es decir su valor mínimo es 0</p></li>
</ol>
<p>La solución se muestra a continuación:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
  <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaproductos&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
      <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:sequence&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;producto&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;tipoProducto&quot;</span>
                       <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:sequence&gt;</span>
      <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
  <span class="nt">&lt;/xsd:complexType&gt;</span>
  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoProducto&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
      <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:sequence&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;descripcion&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span>
                       <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>

        <span class="nt">&lt;/xsd:sequence&gt;</span>
        <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;codigo&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;tipoCodigo&quot;</span>
                       <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
  <span class="nt">&lt;/xsd:complexType&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:minInclusive</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[A-Z]{2}-[0-9]{2,3}&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-validacion-de-componentes">
<h3>Ejercicio: validación de componentes<a class="headerlink" href="#ejercicio-validacion-de-componentes" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Validar un fichero como este:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;listacomponentes&gt;</span>
  <span class="nt">&lt;componente&gt;</span>
    <span class="nt">&lt;tarjetagrafica&gt;</span>
      <span class="nt">&lt;memoria&gt;</span>2GB<span class="nt">&lt;/memoria&gt;</span>
      <span class="nt">&lt;precio</span> <span class="na">moneda=</span><span class="s">&quot;euros&quot;</span><span class="nt">&gt;</span>190<span class="nt">&lt;/precio&gt;</span>
    <span class="nt">&lt;/tarjetagrafica&gt;</span>
  <span class="nt">&lt;/componente&gt;</span>
  <span class="nt">&lt;componente</span> <span class="na">codigo=</span><span class="s">&quot;123456&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;monitor&gt;</span>
      <span class="nt">&lt;tamanio&gt;</span>14<span class="nt">&lt;/tamanio&gt;</span>
      <span class="nt">&lt;precio</span> <span class="na">moneda=</span><span class="s">&quot;euros&quot;</span><span class="nt">&gt;</span>99.49<span class="nt">&lt;/precio&gt;</span>
    <span class="nt">&lt;/monitor&gt;</span>
  <span class="nt">&lt;/componente&gt;</span>
<span class="nt">&lt;/listacomponentes&gt;</span>
</pre></div>
</div>
<p>Las reglas son las siguientes:</p>
<ol class="arabic simple">
<li><p>El elemento raíz se llama <code class="docutils literal notranslate"><span class="pre">listacomponentes</span></code>.</p></li>
<li><p>Dentro de él puede haber uno o más elementos <code class="docutils literal notranslate"><span class="pre">componente</span></code></p></li>
<li><p>Un componente puede ser una <code class="docutils literal notranslate"><span class="pre">tarjetagrafica</span></code> o un <code class="docutils literal notranslate"><span class="pre">monitor</span></code>.</p></li>
<li><p>Un componente puede tener un atributo llamado <code class="docutils literal notranslate"><span class="pre">codigo</span></code> cuya estructura es siempre un dígito de 6 cifras.</p></li>
<li><p>Una tarjeta gráfica siempre tiene dos elementos llamados <code class="docutils literal notranslate"><span class="pre">memoria</span></code> y <code class="docutils literal notranslate"><span class="pre">precio</span></code>.</p></li>
<li><p>La memoria siempre es una cifra seguido de GB o TB.</p></li>
<li><p>El tamaño del monitor siempre es un entero positivo.</p></li>
<li><p>El precio siempre es una cantidad positiva con decimales. El precio siempre lleva un atributo <code class="docutils literal notranslate"><span class="pre">moneda</span></code> que solo puede valer «euros» o «dolares» y que se utiliza para saber en qué moneda está el precio.</p></li>
</ol>
<p>La solución se muestra a continuación:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listacomponentes&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;componente&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoComponente&quot;</span>
                                 <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoComponente&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:choice&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;tarjetagrafica&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoTarjeta&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;monitor&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoMonitor&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:choice&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;codigo&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[1-9][0-9]{5}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoTarjeta&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;memoria&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoMemoria&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;precio&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoPrecio&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoMemoria&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[0-9]+[GT]B&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="cm">&lt;!--Aqui definimos un precio con restriccion del cual</span>
<span class="cm">    heredaremos despues para añadir el atributo a</span>
<span class="cm">    la cantidad--&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPrecioRestringido&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minInclusive</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="cm">&lt;!--Aqui heredamos del tipo anterior y añadimos</span>
<span class="cm">    el atributo--&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoPrecio&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;tipoPrecioRestringido&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;moneda&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoMoneda&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>


    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoMoneda&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;euros&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;dolares&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoMonitor&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;tamanio&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:integer&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;precio&quot;</span>  <span class="na">type=</span><span class="s">&quot;tipoPrecio&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-inventario">
<h3>Ejercicio: inventario<a class="headerlink" href="#ejercicio-inventario" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Varios administradores necesitan intercambiar información sobre inventario de material de oficina. Para ello, han llegado a un acuerdo sobre lo que se permite en un fichero XML de inventario. La idea básica es permitir ficheros como este:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;inventario&gt;</span>
    <span class="nt">&lt;objeto&gt;</span>
        <span class="nt">&lt;mesa&gt;</span>
            <span class="nt">&lt;peso&gt;</span>4.55<span class="nt">&lt;/peso&gt;</span>
            <span class="nt">&lt;superficie</span> <span class="na">unidad=</span><span class="s">&quot;cm2&quot;</span><span class="nt">&gt;</span>100<span class="nt">&lt;/superficie&gt;</span>
        <span class="nt">&lt;/mesa&gt;</span>
    <span class="nt">&lt;/objeto&gt;</span>
    <span class="nt">&lt;objeto&gt;</span>
        <span class="nt">&lt;silla&gt;</span>
            <span class="nt">&lt;peso&gt;</span>3.50<span class="nt">&lt;/peso&gt;</span>
        <span class="nt">&lt;/silla&gt;</span>
    <span class="nt">&lt;/objeto&gt;</span>
<span class="nt">&lt;/inventario&gt;</span>
</pre></div>
</div>
<p>Las reglas concretas son estas:</p>
<ol class="arabic simple">
<li><p>Dentro de <code class="docutils literal notranslate"><span class="pre">&lt;objeto&gt;</span></code> puede haber uno de estos dos elementos hijo: un elemento <code class="docutils literal notranslate"><span class="pre">&lt;mesa&gt;</span></code> o un elemento <code class="docutils literal notranslate"><span class="pre">&lt;silla&gt;</span></code>.</p></li>
<li><p>Toda mesa tiene un elemento hijo <code class="docutils literal notranslate"><span class="pre">&lt;peso&gt;</span></code>. El peso siempre es un decimal positivo con dos cifras decimales.</p></li>
<li><p>Toda mesa tiene una <code class="docutils literal notranslate"><span class="pre">&lt;superficie&gt;</span></code>. La superficie es un <code class="docutils literal notranslate"><span class="pre">unsignedInt</span></code>. La superficie siempre tiene un atributo que puede ser solo una de estas dos cadenas: <code class="docutils literal notranslate"><span class="pre">m2</span></code> o <code class="docutils literal notranslate"><span class="pre">cm2</span></code>.</p></li>
<li><p>Toda silla tiene siempre un <code class="docutils literal notranslate"><span class="pre">&lt;peso&gt;</span></code> y las reglas de ese peso son exactamente las mismas que las reglas de <code class="docutils literal notranslate"><span class="pre">&lt;peso&gt;</span></code> del elemento <code class="docutils literal notranslate"><span class="pre">&lt;mesa&gt;</span></code></p></li>
</ol>
<p>La solución podría descomponerse de la forma siguiente:</p>
<p>Resolvamos primero el problema de crear un tipo para el elemento <code class="docutils literal notranslate"><span class="pre">&lt;peso&gt;</span></code>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;&lt;/xsd:element&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minInclusive</span>  <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:fractionDigits</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Ahora resolvamos el problema del elemento <code class="docutils literal notranslate"><span class="pre">&lt;silla&gt;</span></code>. Para resolverlo, podemos aprovechar el tipo <code class="docutils literal notranslate"><span class="pre">tipoPeso</span></code> que acabamos de crear:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;silla&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoSilla&quot;</span><span class="nt">&gt;&lt;/xsd:element&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minInclusive</span>  <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:fractionDigits</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSilla&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                             <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Ahora resolveremos el problema de la superficie:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;superficie&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoSuperficie&quot;</span><span class="nt">&gt;&lt;/xsd:element&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minInclusive</span>  <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:fractionDigits</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSilla&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                             <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSuperficie&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:unsignedInt&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;unidad&quot;</span>
                           <span class="na">type=</span><span class="s">&quot;tipoUnidad&quot;</span>
                           <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoUnidad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;m2&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;cm2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Y apoyándonos en eso haremos la mesa:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;mesa&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoMesa&quot;</span><span class="nt">&gt;&lt;/xsd:element&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minInclusive</span>  <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:fractionDigits</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSilla&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                             <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSuperficie&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:unsignedInt&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;unidad&quot;</span>
                           <span class="na">type=</span><span class="s">&quot;tipoUnidad&quot;</span>
                           <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoUnidad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;m2&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;cm2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoMesa&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;superficie&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoSuperficie&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Y ya solo queda indicar que un inventario es una lista de objetos (pondremos el <code class="docutils literal notranslate"><span class="pre">maxOccurs</span></code> a <code class="docutils literal notranslate"><span class="pre">unbounded</span></code>) e indicaremos que un objeto puede ser una elección (<code class="docutils literal notranslate"><span class="pre">&lt;xsd:choice&gt;</span></code>) entre dos tipos de objetos.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;inventario&quot;</span>
             <span class="na">type=</span><span class="s">&quot;tipoInventario&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:minInclusive</span>  <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xsd:fractionDigits</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
<span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSilla&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                         <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:sequence&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSuperficie&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:simpleContent&gt;</span>
        <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:unsignedInt&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;unidad&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;tipoUnidad&quot;</span>
                       <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:extension&gt;</span>
    <span class="nt">&lt;/xsd:simpleContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoUnidad&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;m2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;cm2&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
<span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoMesa&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                             <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;superficie&quot;</span>
                             <span class="na">type=</span><span class="s">&quot;tipoSuperficie&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:sequence&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoInventario&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;objeto&quot;</span>
                             <span class="na">type=</span><span class="s">&quot;tipoObjeto&quot;</span>
                             <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:sequence&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoObjeto&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:choice&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;mesa&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoMesa&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;silla&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoSilla&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:choice&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="ejercicio-xml-schemas-tipo-examen-i">
<h2>Ejercicio XML Schemas tipo examen (I)<a class="headerlink" href="#ejercicio-xml-schemas-tipo-examen-i" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Se necesita crear un esquema que controle la correcta sintaxis de ficheros con este estilo:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;productosfinancieros&gt;</span>
    <span class="nt">&lt;producto&gt;</span>
        <span class="nt">&lt;bono&gt;</span>
            <span class="nt">&lt;valoractual</span> <span class="na">moneda=</span><span class="s">&quot;yenes&quot;</span><span class="nt">&gt;</span>2.212<span class="nt">&lt;/valoractual&gt;</span>
            <span class="nt">&lt;beneficio&gt;</span>-2.83<span class="nt">&lt;/beneficio&gt;</span>
        <span class="nt">&lt;/bono&gt;</span>
    <span class="nt">&lt;/producto&gt;</span>
    <span class="nt">&lt;producto&gt;</span>
        <span class="nt">&lt;futuro&gt;</span>
            <span class="nt">&lt;elemento</span> <span class="na">idioma=</span><span class="s">&quot;espanol&quot;</span><span class="nt">&gt;</span>Petroleo<span class="nt">&lt;/elemento&gt;</span>
            <span class="nt">&lt;beneficio&gt;</span>-3.83<span class="nt">&lt;/beneficio&gt;</span>
        <span class="nt">&lt;/futuro&gt;</span>
    <span class="nt">&lt;/producto&gt;</span>
    <span class="nt">&lt;producto&gt;</span>
        <span class="nt">&lt;acciones&gt;</span>
            <span class="nt">&lt;empresa</span> <span class="na">pais=</span><span class="s">&quot;usa&quot;</span><span class="nt">&gt;</span>ENRON<span class="nt">&lt;/empresa&gt;</span>
            <span class="nt">&lt;beneficio&gt;</span>2.91<span class="nt">&lt;/beneficio&gt;</span>
        <span class="nt">&lt;/acciones&gt;</span>
    <span class="nt">&lt;/producto&gt;</span>
<span class="nt">&lt;/productosfinancieros&gt;</span>
</pre></div>
</div>
<p>Las reglas concretas son las siguientes:</p>
<ol class="arabic simple">
<li><p>El elemento raíz es <code class="docutils literal notranslate"><span class="pre">&lt;productosfinancieros&gt;</span></code>. Dentro de él debe haber uno o más elementos <code class="docutils literal notranslate"><span class="pre">&lt;producto&gt;</span></code>.</p></li>
<li><p>Un <code class="docutils literal notranslate"><span class="pre">&lt;producto&gt;</span></code> puede ser de tres tipos: <code class="docutils literal notranslate"><span class="pre">&lt;bono&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;futuro&gt;</span></code> y <code class="docutils literal notranslate"><span class="pre">&lt;acciones&gt;</span></code>.</p></li>
<li><p>Todos los productos tienen siempre un elemento hijo llamado <code class="docutils literal notranslate"><span class="pre">&lt;beneficio&gt;</span></code> que puede ser un número con dos decimales (puede ser positivo o negativo).</p></li>
<li><p>Todo <code class="docutils literal notranslate"><span class="pre">&lt;bono&gt;</span></code> puede tener dentro un elemento llamado <code class="docutils literal notranslate"><span class="pre">&lt;valoractual&gt;</span></code> que contiene un valor decimal que puede ser positivo o negativo y tener o no decimales. El elemento <code class="docutils literal notranslate"><span class="pre">&lt;valoractual&gt;</span></code> deberá llevar dentro un atributo llamado <code class="docutils literal notranslate"><span class="pre">moneda</span></code> que solo puede tomar los valores <code class="docutils literal notranslate"><span class="pre">dolares</span></code>, <code class="docutils literal notranslate"><span class="pre">euros</span></code> o <code class="docutils literal notranslate"><span class="pre">yenes</span></code>.</p></li>
<li><p>Todo <code class="docutils literal notranslate"><span class="pre">&lt;futuro&gt;</span></code> tiene un hijo llamado <code class="docutils literal notranslate"><span class="pre">&lt;elemento&gt;</span></code> que puede contener dentro cadenas de cualquier tipo. Para saber en qué idioma está la cadena se usa un atributo llamado <code class="docutils literal notranslate"><span class="pre">idioma</span></code> que indica el idioma en el que está escrita la cadena.</p></li>
<li><p>Las acciones siempre tienen un elemento <code class="docutils literal notranslate"><span class="pre">&lt;empresa&gt;</span></code> que indica el nombre de la empresa y un atributo llamado <code class="docutils literal notranslate"><span class="pre">país</span></code> que indica de donde es la empresa. De momento queremos limitarnos a los países <code class="docutils literal notranslate"><span class="pre">usa</span></code>, <code class="docutils literal notranslate"><span class="pre">alemania</span></code>, <code class="docutils literal notranslate"><span class="pre">japon</span></code> y <code class="docutils literal notranslate"><span class="pre">espana</span></code>.</p></li>
</ol>
<p>Recuérdese que siempre que no nos digan nada, se supone que un elemento o atributo es <strong>obligatorio</strong>. Si algo es optativo nos dirán «puede tener dentro», «puede contener», «puede aparecer», etc…</p>
<p>Una posible solución sería esta:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;productosfinancieros&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoProductosFinancieros&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoProductosFinancieros&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;producto&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoProducto&quot;</span>
                                 <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoProducto&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:choice&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;bono&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoBono&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;futuro&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoFuturo&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;acciones&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoAcciones&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:choice&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoBono&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;valoractual&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoValorActual&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;beneficio&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoBeneficio&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoValorActual&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;moneda&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoMoneda&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoMoneda&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;dolares&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;euros&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;yenes&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoBeneficio&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:fractionDigits</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoFuturo&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;elemento&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoElemento&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;beneficio&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoBeneficio&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="cm">&lt;!--No nos dicen nada sobre los posibles idiomas,</span>
<span class="cm">    así que podemos asumir que el idioma será una cadena cualquiera--&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoElemento&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;idioma&quot;</span>
                               <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoAcciones&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;empresa&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoEmpresa&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;beneficio&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoBeneficio&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoEmpresa&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;pais&quot;</span>
                               <span class="na">type=</span><span class="s">&quot;tipoPais&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPais&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;alemania&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;japon&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;espania&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;usa&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-xml-schemas-tipo-examen-ii">
<h2>Ejercicio XML Schemas tipo examen (II)<a class="headerlink" href="#ejercicio-xml-schemas-tipo-examen-ii" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Crear una DTD que permita validar un fichero como el siguiente:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;inventario&gt;</span>
    <span class="nt">&lt;objeto</span> <span class="na">codigo=</span><span class="s">&quot;MM2809&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mesa&gt;</span>
            <span class="nt">&lt;tipo&gt;</span>Oficina<span class="nt">&lt;/tipo&gt;</span>
            <span class="nt">&lt;localizacion&gt;</span>B09<span class="nt">&lt;/localizacion&gt;</span>
        <span class="nt">&lt;/mesa&gt;</span>
    <span class="nt">&lt;/objeto&gt;</span>
    <span class="nt">&lt;objeto&gt;</span>
        <span class="nt">&lt;ordenador&gt;</span>
            <span class="nt">&lt;procesador</span> <span class="na">fabricante=</span><span class="s">&quot;Intel&quot;</span><span class="nt">&gt;</span>
                i3
            <span class="nt">&lt;/procesador&gt;</span>
            <span class="nt">&lt;memoria</span> <span class="na">unidad=</span><span class="s">&quot;GB&quot;</span><span class="nt">&gt;</span>2<span class="nt">&lt;/memoria&gt;</span>
            <span class="nt">&lt;discoduro&gt;</span>520<span class="nt">&lt;/discoduro&gt;</span>
        <span class="nt">&lt;/ordenador&gt;</span>
    <span class="nt">&lt;/objeto&gt;</span>
<span class="nt">&lt;/inventario&gt;</span>
</pre></div>
</div>
<p>Las reglas son las siguientes:</p>
<ul class="simple">
<li><p>El elemento raíz es <code class="docutils literal notranslate"><span class="pre">&lt;inventario&gt;</span></code>.</p></li>
<li><p>Dentro de <code class="docutils literal notranslate"><span class="pre">&lt;inventario&gt;</span></code> debe haber un elemento <code class="docutils literal notranslate"><span class="pre">&lt;objeto&gt;</span></code> que lleva dentro una <code class="docutils literal notranslate"><span class="pre">&lt;mesa&gt;</span></code> o un <code class="docutils literal notranslate"><span class="pre">&lt;ordenador&gt;</span></code>. Todo <code class="docutils literal notranslate"><span class="pre">&lt;objeto&gt;</span></code> puede llevar un código que consta de dos letras y cuatro dígitos. Las letras podrían ser tanto mayúsculas como minúsculas.</p></li>
<li><p>Dentro de mesa puede haber (o no) un primer elemento <code class="docutils literal notranslate"><span class="pre">&lt;tipo&gt;</span></code>. Despues debe haber un elemento <code class="docutils literal notranslate"><span class="pre">&lt;localizacion&gt;</span></code>.</p></li>
<li><p>Dentro de ordenador puede haber 3 elementos optativos pero que de aparecer lo hacen en el siguiente orden.</p></li>
<li><p>Primero un elemento <code class="docutils literal notranslate"><span class="pre">&lt;procesador&gt;</span></code> que puede llevar un atributo <code class="docutils literal notranslate"><span class="pre">fabricante</span></code>.</p></li>
<li><p>Despues un elemento <code class="docutils literal notranslate"><span class="pre">&lt;memoria&gt;</span></code> que debe llevar obligatoriamente un atributo <code class="docutils literal notranslate"><span class="pre">unidad</span></code>.</p></li>
<li><p>Despues un elemento <code class="docutils literal notranslate"><span class="pre">&lt;discoduro&gt;</span></code>.</p></li>
</ul>
<p>Una posible solución sería esta:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xs:schema</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;inventario&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoInventario&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoInventario&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:sequence&gt;</span>
            <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;objeto&quot;</span> 
                        <span class="na">type=</span><span class="s">&quot;tipoObjeto&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xs:sequence&gt;</span>        
    <span class="nt">&lt;/xs:complexType&gt;</span> <span class="cm">&lt;!--Fin del tipoInventario--&gt;</span>
    <span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoObjeto&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:choice&gt;</span>
            <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;mesa&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoMesa&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;ordenador&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoOrdenador&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xs:choice&gt;</span>
        <span class="nt">&lt;xs:attribute</span> <span class="na">name=</span><span class="s">&quot;codigo&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xs:complexType&gt;</span>
    <span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoMesa&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:sequence&gt;</span>
            <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;tipo&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;localizacion&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xs:sequence&gt;</span>
    <span class="nt">&lt;/xs:complexType&gt;</span>
    <span class="nt">&lt;xs:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xs:pattern</span> <span class="na">value=</span><span class="s">&quot;[a-zA-Z]{2}[0-9]{4}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xs:restriction&gt;</span>
    <span class="nt">&lt;/xs:simpleType&gt;</span>
    <span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoOrdenador&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:complexContent&gt;</span>
            <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xs:sequence&gt;</span>
                    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;procesador&quot;</span> 
                                <span class="na">type=</span><span class="s">&quot;tipoProcesador&quot;</span> 
                                <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;memoria&quot;</span>
                                <span class="na">type=</span><span class="s">&quot;tipoMemoria&quot;</span>
                                <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;discoduro&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:nonNegativeInteger&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xs:sequence&gt;</span>
            <span class="nt">&lt;/xs:restriction&gt;</span>
        <span class="nt">&lt;/xs:complexContent&gt;</span>
    <span class="nt">&lt;/xs:complexType&gt;</span>

    <span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoProcesador&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:simpleContent&gt;</span>
            <span class="nt">&lt;xs:extension</span> <span class="na">base=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xs:attribute</span> <span class="na">name=</span><span class="s">&quot;fabricante&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xs:extension&gt;</span>
        <span class="nt">&lt;/xs:simpleContent&gt;</span>
    <span class="nt">&lt;/xs:complexType&gt;</span>
    <span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoMemoria&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:simpleContent&gt;</span>
            <span class="nt">&lt;xs:extension</span> <span class="na">base=</span><span class="s">&quot;xs:float&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xs:attribute</span> <span class="na">name=</span><span class="s">&quot;unidad&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xs:extension&gt;</span>
        <span class="nt">&lt;/xs:simpleContent&gt;</span>
    <span class="nt">&lt;/xs:complexType&gt;</span>
<span class="nt">&lt;/xs:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-xml-schemas-tipo-examen-iii">
<h2>Ejercicio XML Schemas tipo examen (III)<a class="headerlink" href="#ejercicio-xml-schemas-tipo-examen-iii" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Un distribuidor de alimentación necesita un fichero XML que almacene la información sobre pedidos recibidos y entregados que esté regido por un esquema XML que contemple las restricciones siguientes:</p>
<ul class="simple">
<li><p>El elemento raíz se llama <code class="docutils literal notranslate"><span class="pre">portes</span></code>.</p></li>
<li><p>Dentro de <code class="docutils literal notranslate"><span class="pre">portes</span></code>, puede haber uno o más de los elementos <code class="docutils literal notranslate"><span class="pre">recepcion</span></code> y <code class="docutils literal notranslate"><span class="pre">entrega</span></code>. Su orden puede ser aleatorio y el número de repeticiones también.</p></li>
<li><p>Un <code class="docutils literal notranslate"><span class="pre">recepcion</span></code> lleva dentro tres elementos: un elemento <code class="docutils literal notranslate"><span class="pre">producto</span></code>, un elemento <code class="docutils literal notranslate"><span class="pre">cantidad</span></code> y un elemento <code class="docutils literal notranslate"><span class="pre">codigoreceptor</span></code>.</p></li>
<li><p>El <code class="docutils literal notranslate"><span class="pre">producto</span></code> es obligatorio y lleva dentro texto.</p></li>
<li><p>El elemento <code class="docutils literal notranslate"><span class="pre">cantidad</span></code> (obligatorio) lleva dentro un número con decimales pero que debe ser siempre positivo.</p></li>
<li><p>El <code class="docutils literal notranslate"><span class="pre">codigoreceptor</span></code> lleva dentro un texto con la estructura: 3 cifras, guión, 3 letras (mayúsculas o minúsculas). Este elemento <code class="docutils literal notranslate"><span class="pre">codigoreceptor</span></code> es optativo.</p></li>
<li><p>Una <code class="docutils literal notranslate"><span class="pre">entrega</span></code> tiene siempre un atributo <code class="docutils literal notranslate"><span class="pre">receptor</span></code> que lleva dentro un texto. Aparte de eso, una <code class="docutils literal notranslate"><span class="pre">entrega</span></code> tiene siempre un elemento <code class="docutils literal notranslate"><span class="pre">transportista</span></code> que solo puede valer <code class="docutils literal notranslate"><span class="pre">T1</span></code>, <code class="docutils literal notranslate"><span class="pre">T2</span></code> o <code class="docutils literal notranslate"><span class="pre">T3</span></code>. Despues de el elemento <code class="docutils literal notranslate"><span class="pre">transportista</span></code>  hay siempre un elemento <code class="docutils literal notranslate"><span class="pre">distancia</span></code> . La <code class="docutils literal notranslate"><span class="pre">distancia</span></code> es un numero mayor de 0. Es necesario que la <code class="docutils literal notranslate"><span class="pre">distancia</span></code>  tenga un atributo <code class="docutils literal notranslate"><span class="pre">unidad</span></code> que indica la unidad en forma de cadena. Además una <code class="docutils literal notranslate"><span class="pre">entrega</span></code> lleva un atributo <code class="docutils literal notranslate"><span class="pre">coste</span></code> que siempre es un entero mayor de 0.</p></li>
</ul>
<p>A continuación se muestra un fichero de ejemplo</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;portes&gt;</span>
    <span class="nt">&lt;recepcion&gt;</span>
        <span class="nt">&lt;producto&gt;</span>Fruta<span class="nt">&lt;/producto&gt;</span>
        <span class="nt">&lt;cantidad&gt;</span>125.5<span class="nt">&lt;/cantidad&gt;</span>
        <span class="nt">&lt;codigoreceptor&gt;</span>333-AZT<span class="nt">&lt;/codigoreceptor&gt;</span>
    <span class="nt">&lt;/recepcion&gt;</span>
    <span class="nt">&lt;entrega</span> <span class="na">receptor=</span><span class="s">&quot;Mercados SL&quot;</span> <span class="na">coste=</span><span class="s">&quot;1321&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;transportista&gt;</span>T2<span class="nt">&lt;/transportista&gt;</span>
        <span class="nt">&lt;distancia</span> <span class="na">unidad=</span><span class="s">&quot;millas&quot;</span><span class="nt">&gt;</span>468<span class="nt">&lt;/distancia&gt;</span>
    <span class="nt">&lt;/entrega&gt;</span>
    <span class="nt">&lt;recepcion&gt;</span>
        <span class="nt">&lt;producto&gt;</span>Verdura<span class="nt">&lt;/producto&gt;</span>
        <span class="nt">&lt;cantidad&gt;</span>250<span class="nt">&lt;/cantidad&gt;</span>
        <span class="cm">&lt;!--El codigo de receptor no se usó aquí--&gt;</span>
    <span class="nt">&lt;/recepcion&gt;</span>
<span class="nt">&lt;/portes&gt;</span>
</pre></div>
</div>
<p>Una posible solución sería esta:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xs:schema</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;portes&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoPortes&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoPortes&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:choice</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;recepcion&quot;</span>
                        <span class="na">type=</span><span class="s">&quot;tipoRecepcion&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;entrega&quot;</span>
                        <span class="na">type=</span><span class="s">&quot;tipoEntrega&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xs:choice&gt;</span>
    <span class="nt">&lt;/xs:complexType&gt;</span>
    <span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoRecepcion&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:sequence&gt;</span>
            <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;producto&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCantidad&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;codigoreceptor&quot;</span>
                        <span class="na">type=</span><span class="s">&quot;tipoCodigoReceptor&quot;</span>
                        <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xs:sequence&gt;</span>
    <span class="nt">&lt;/xs:complexType&gt;</span>
    <span class="nt">&lt;xs:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCantidad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:float&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xs:minInclusive</span> <span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xs:restriction&gt;</span>
    <span class="nt">&lt;/xs:simpleType&gt;</span>
    <span class="nt">&lt;xs:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigoReceptor&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xs:pattern</span> <span class="na">value=</span><span class="s">&quot;[0-9]{3}-[A-Za-z]{3}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xs:restriction&gt;</span>
    <span class="nt">&lt;/xs:simpleType&gt;</span>
    <span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoEntrega&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:complexContent&gt;</span>
            <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xs:sequence&gt;</span>
                    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;transportista&quot;</span>
                                <span class="na">type=</span><span class="s">&quot;tipoTransportista&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;distancia&quot;</span>
                                <span class="na">type=</span><span class="s">&quot;tipoDistancia&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xs:sequence&gt;</span>
                <span class="nt">&lt;xs:attribute</span> <span class="na">name=</span><span class="s">&quot;receptor&quot;</span> 
                              <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span>
                              <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xs:attribute</span> <span class="na">name=</span><span class="s">&quot;coste&quot;</span>    
                              <span class="na">type=</span><span class="s">&quot;xs:nonNegativeInteger&quot;</span>
                              <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xs:restriction&gt;</span>
        <span class="nt">&lt;/xs:complexContent&gt;</span>
    <span class="nt">&lt;/xs:complexType&gt;</span>
    <span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoDistancia&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:simpleContent&gt;</span>
            <span class="nt">&lt;xs:extension</span> <span class="na">base=</span><span class="s">&quot;xs:nonNegativeInteger&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xs:attribute</span> <span class="na">name=</span><span class="s">&quot;unidad&quot;</span> 
                              <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span>
                              <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xs:extension&gt;</span>
        <span class="nt">&lt;/xs:simpleContent&gt;</span>
    <span class="nt">&lt;/xs:complexType&gt;</span>
    <span class="nt">&lt;xs:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoTransportista&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">&quot;T1&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">&quot;T2&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">&quot;T3&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xs:restriction&gt;</span>
    <span class="nt">&lt;/xs:simpleType&gt;</span>

<span class="nt">&lt;/xs:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-xml-schemas-tipo-examen-iv">
<h2>Ejercicio XML Schemas tipo examen (IV)<a class="headerlink" href="#ejercicio-xml-schemas-tipo-examen-iv" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Se propone el siguiente archivo de datos para una biblioteca:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--Dentro de inventario hay uno o muchos libros--&gt;</span>
<span class="nt">&lt;inventario&gt;</span>
    <span class="cm">&lt;!--Dentro de libro, SIEMPRE hay un elemento</span>
<span class="cm">        titulo y un elemento autor--&gt;</span>
    <span class="nt">&lt;libro&gt;</span>
        <span class="cm">&lt;!--Todos los titulos tienen un atributo idioma--&gt;</span>
        <span class="nt">&lt;titulo</span> <span class="na">idioma=</span><span class="s">&quot;ES&quot;</span><span class="nt">&gt;</span>Don Quijote de la Mancha<span class="nt">&lt;/titulo&gt;</span>
        <span class="nt">&lt;autor&gt;</span>Miguel de Cervantes<span class="nt">&lt;/autor&gt;</span>
    <span class="nt">&lt;/libro&gt;</span>
    <span class="nt">&lt;libro&gt;</span>
        <span class="nt">&lt;titulo</span> <span class="na">idioma=</span><span class="s">&quot;EN&quot;</span><span class="nt">&gt;</span>Hamlet<span class="nt">&lt;/titulo&gt;</span>
        <span class="nt">&lt;autor&gt;</span>William Shakespeare<span class="nt">&lt;/autor&gt;</span>
    <span class="nt">&lt;/libro&gt;</span>
<span class="nt">&lt;/inventario&gt;</span>
</pre></div>
</div>
<p>Se desea un XML Schema que pueda hacer cumplir estas reglas. Una posible solución sería esta.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--Solución--&gt;</span>

<span class="p">&lt;</span><span class="nt">xsd:schema</span>
<span class="na">xmlns:xsd</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">xsd:element</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;inventario&quot;</span>
            <span class="na">type</span><span class="o">=</span><span class="s">&quot;tipoInventario&quot;</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">xsd:complexType</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;tipoInventario&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">xsd:complexContent</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">xsd:restriction</span> <span class="na">base</span><span class="o">=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">xsd:sequence</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">xsd:element</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;libro&quot;</span>
                <span class="na">type</span><span class="o">=</span><span class="s">&quot;tipoLibro&quot;</span>
                <span class="na">minOccurs</span><span class="o">=</span><span class="s">&quot;1&quot;</span>
                <span class="na">maxOccurs</span><span class="o">=</span><span class="s">&quot;unbounded&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">xsd:sequence</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">xsd:restriction</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">xsd:complexContent</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">xsd:complexType</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">xsd:complexType</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;tipoLibro&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">xsd:complexContent</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">xsd:restriction</span> <span class="na">base</span><span class="o">=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">xsd:sequence</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">xsd:element</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;titulo&quot;</span>
                <span class="na">type</span><span class="o">=</span><span class="s">&quot;tipoTitulo&quot;</span><span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">xsd:element</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;autor&quot;</span>
                <span class="na">type</span><span class="o">=</span><span class="s">&quot;xsd:string&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">xsd:sequence</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">xsd:restriction</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">xsd:complexContent</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">xsd:complexType</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">xsd:complexType</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;tipoTitulo&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">xsd:simpleContent</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">xsd:extension</span> <span class="na">base</span><span class="o">=</span><span class="s">&quot;xsd:string&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">xsd:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;idioma&quot;</span>
                    <span class="na">type</span><span class="o">=</span><span class="s">&quot;xsd:string&quot;</span>
                    <span class="na">use</span><span class="o">=</span><span class="s">&quot;required&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">xsd:extension</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">xsd:simpleContent</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">xsd:complexType</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">xsd:schema</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-xml-schemas-tipo-examen-v">
<h2>Ejercicio XML Schemas tipo examen (V)<a class="headerlink" href="#ejercicio-xml-schemas-tipo-examen-v" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Se propone el siguiente fichero para el inventario de una empresa.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--Dentro de listaarticulos hay entre 2 y 6 articulos--&gt;</span>
<span class="nt">&lt;listaarticulos&gt;</span>
    <span class="cm">&lt;!--Todo articulo lleva un código, a veces una descripción</span>
<span class="cm">    y siempre un peso--&gt;</span>
    <span class="nt">&lt;articulo&gt;</span>
        <span class="cm">&lt;!--El código siempre es 3 cifras y dos minúsculas--&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>719cf<span class="nt">&lt;/codigo&gt;</span>
        <span class="cm">&lt;!--La descripción siempre lleva un atributo</span>
<span class="cm">            idioma que solo puede ser ES, EN o FR--&gt;</span>
        <span class="nt">&lt;descripcion</span> <span class="na">idioma=</span><span class="s">&quot;ES&quot;</span><span class="nt">&gt;</span>Libro electrónico<span class="nt">&lt;/descripcion&gt;</span>
        <span class="cm">&lt;!--El peso siempre está entre 50 y 1500--&gt;</span>
        <span class="nt">&lt;peso&gt;</span>640<span class="nt">&lt;/peso&gt;</span>
    <span class="nt">&lt;/articulo&gt;</span>
    <span class="nt">&lt;articulo&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>904ps<span class="nt">&lt;/codigo&gt;</span>
        <span class="nt">&lt;peso&gt;</span>1499<span class="nt">&lt;/peso&gt;</span>
    <span class="nt">&lt;/articulo&gt;</span>

<span class="nt">&lt;/listaarticulos&gt;</span>
</pre></div>
</div>
<p>Una posible solución sería esta:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
<span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>

<span class="cm">&lt;!--Recordad que este elemento</span>
<span class="cm">    lo ponemos siempre con &quot;autocierre&quot;</span>
<span class="cm">    por brevedad--&gt;</span>
<span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaarticulos&quot;</span>
            <span class="na">type=</span><span class="s">&quot;tipoListaArticulos&quot;</span><span class="nt">/&gt;</span>
<span class="cm">&lt;!--Esto explica como funciona el elemento</span>
<span class="cm">    &quot;listaarticulos&quot;--&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoListaArticulos&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;articulo&quot;</span>
                    <span class="na">type=</span><span class="s">&quot;tipoArticulo&quot;</span>
                    <span class="na">minOccurs=</span><span class="s">&quot;2&quot;</span>
                    <span class="na">maxOccurs=</span><span class="s">&quot;7&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:sequence&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="cm">&lt;!--Esto explica como funciona</span>
<span class="cm">    la etiqueta &quot;articulo&quot;--&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoArticulo&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;codigo&quot;</span>
                    <span class="na">type=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;descripcion&quot;</span>
                    <span class="na">type=</span><span class="s">&quot;tipoDescripcion&quot;</span>
                    <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                    <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:sequence&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="cm">&lt;!--Esto explica como funciona la</span>
<span class="cm">    etiqueta &quot;codigo&quot;--&gt;</span>
<span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[0-9]{3}[a-z]{2}&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
<span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="cm">&lt;!--Desarrollamos el funcionamiento de la</span>
<span class="cm">    etiqueta &quot;descripcion&quot;--&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoDescripcion&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:simpleContent&gt;</span>
        <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;idioma&quot;</span>
                    <span class="na">type=</span><span class="s">&quot;tipoIdioma&quot;</span>
                    <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:extension&gt;</span>
    <span class="nt">&lt;/xsd:simpleContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="cm">&lt;!--Esto desarrolla el idioma de la descripción--&gt;</span>
<span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoIdioma&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;ES&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;FR&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;EN&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
<span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:float&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:minInclusive</span> <span class="na">value=</span><span class="s">&quot;50&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xsd:maxInclusive</span> <span class="na">value=</span><span class="s">&quot;1500&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
<span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="id5">
<h2>Ejercicio XML Schemas tipo examen (V)<a class="headerlink" href="#id5" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Un puerto necesita controlar las entradas y salidas de los muelles y para ello va a usar un fichero XML con unas reglas como estas.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--El elemento raíz es movimientos y siempre lleva un atributo</span>
<span class="cm">    fecha--&gt;</span>
<span class="nt">&lt;movimientos</span> <span class="na">fecha=</span><span class="s">&quot;2022-03-01&quot;</span><span class="nt">&gt;</span>
    <span class="cm">&lt;!--Dentro de movimiento hay infinitos elementos &quot;entrada&quot; o</span>
<span class="cm">        &quot;salida&quot; que pueden repetirse y/o ir en cualquier orden--&gt;</span>
    <span class="nt">&lt;entrada&gt;</span>
        <span class="cm">&lt;!--El codigo de barco siempre lleva un atributo &quot;país&quot;</span>
<span class="cm">            que contiene cadenas. El codigo de barco siempre es</span>
<span class="cm">            una B seguida un número de entre 4 y 6 cifras--&gt;</span>
        <span class="nt">&lt;codigobarco</span> <span class="na">país=</span><span class="s">&quot;Panamá&quot;</span><span class="nt">&gt;</span>B0143<span class="nt">&lt;/codigobarco&gt;</span>
        <span class="cm">&lt;!--Siempre hay un elemento origen que acepta cadenas--&gt;</span>
        <span class="nt">&lt;origen&gt;</span>Atenas<span class="nt">&lt;/origen&gt;</span>
        <span class="cm">&lt;!--Puede haber 0 o muchos elementos &quot;pasa_por&quot; y que</span>
<span class="cm">        lleva dentro cadenas--&gt;</span>
        <span class="nt">&lt;pasa_por&gt;</span>Algeciras<span class="nt">&lt;/pasa_por&gt;</span>
        <span class="nt">&lt;pasa_por&gt;</span>Oporto<span class="nt">&lt;/pasa_por&gt;</span>
        <span class="cm">&lt;!--Siempre hay un destino que lleva dentro cadenas--&gt;</span>
        <span class="nt">&lt;destino&gt;</span>Amberes<span class="nt">&lt;/destino&gt;</span>
    <span class="nt">&lt;/entrada&gt;</span>
    <span class="cm">&lt;!--La salida siempre lleva un codigo que puede ser &quot;01&quot;,</span>
<span class="cm">        &quot;49&quot; o &quot;DESC&quot;--&gt;</span>
    <span class="nt">&lt;salida</span> <span class="na">codigo=</span><span class="s">&quot;01&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;codigobarco&gt;</span>B0143<span class="nt">&lt;/codigobarco&gt;</span>
        <span class="cm">&lt;!--Puede llevar o no un elemento VACÍO llamado</span>
<span class="cm">            &quot;tasaspagadas&quot;--&gt;</span>
        <span class="nt">&lt;tasaspagadas/&gt;</span>
    <span class="nt">&lt;/salida&gt;</span>
<span class="nt">&lt;/movimientos&gt;</span>
</pre></div>
</div>
<p>Una posible solución sería esta:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
<span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>

<span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;movimientos&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoMovimientos&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoMovimientos&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:choice</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;entrada&quot;</span>
                            <span class="na">type=</span><span class="s">&quot;tipoEntrada&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;salida&quot;</span>
                            <span class="na">type=</span><span class="s">&quot;tipoSalida&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:choice&gt;</span>
            <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;fecha&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:date&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>

<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSalida&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;codigobarco&quot;</span>
                            <span class="na">type=</span><span class="s">&quot;tipoCodigoBarco&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;tasaspagadas&quot;</span>
                            <span class="na">type=</span><span class="s">&quot;tipoVacio&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;codigo&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCodigo&quot;</span>
                            <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>

<span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;01&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;49&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;DESC&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
<span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoVacio&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:length</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
<span class="nt">&lt;/xsd:simpleType&gt;</span>

<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoEntrada&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;codigobarco&quot;</span>
                                <span class="na">type=</span><span class="s">&quot;tipoCodigoBarco&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;origen&quot;</span>  <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;pasa_por&quot;</span>
                                <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span>
                                <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span>
                                <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;destino&quot;</span>  <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:sequence&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>

<span class="cm">&lt;!-- Explicamos como es la cadena B1040 --&gt;</span>
<span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCadenaBarco&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;B[0-9]{4,6}&quot;</span><span class="nt">&gt;&lt;/xsd:pattern&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
<span class="nt">&lt;/xsd:simpleType&gt;</span>

<span class="cm">&lt;!--Y ahora heredamos de ella y le añadimos el atributo--&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigoBarco&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:simpleContent&gt;</span>
        <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;tipoCadenaBarco&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;pais&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span>
                            <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:extension&gt;</span>
    <span class="nt">&lt;/xsd:simpleContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</section>
<section id="ejercicio-xml-schemas-tipo-examen-vi">
<h2>Ejercicio XML Schemas tipo examen (VI)<a class="headerlink" href="#ejercicio-xml-schemas-tipo-examen-vi" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Se desea construir un esquema para verificar ficheros como el siguiente. Las reglas que se supone deben cumplir los datos se han adjuntado como comentarios en el propio fichero:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--Construir un XML Schema que controle que los ficheros de datos</span>
<span class="cm">    de un administrador de redes verifiquen esta estructura--&gt;</span>

<span class="nt">&lt;nodos&gt;</span>
    <span class="cm">&lt;!--Puede aparecer cualquiera de estos hijos en cualquier orden</span>
<span class="cm">        y repetido las veces que sea necesario--&gt;</span>
    <span class="nt">&lt;router&gt;</span>
        <span class="cm">&lt;!--Un router PUEDE tener una dirección IP</span>
<span class="cm">            que tiene la estructura típica de una IP--&gt;</span>
        <span class="nt">&lt;direccionip&gt;</span>192.168.1.10<span class="nt">&lt;/direccionip&gt;</span>
        <span class="cm">&lt;!--Despues de la dirección IP viene solo uno de estos</span>
<span class="cm">            dos elementos &lt;gestionado/&gt; o &lt;nogestionado/&gt;--&gt;</span>
        <span class="nt">&lt;gestionado/&gt;</span>
    <span class="nt">&lt;/router&gt;</span>
    <span class="cm">&lt;!--Toda impresora lleva un modelo que solo puede ser &quot;laser&quot;,</span>
<span class="cm">        &quot;tinta&quot; o &quot;termica&quot;.--&gt;</span>
        <span class="cm">&lt;!--Dentro solo puede haber HP, Epson o Kyocera--&gt;</span>
    <span class="nt">&lt;impresora</span> <span class="na">modelo=</span><span class="s">&quot;laser&quot;</span><span class="nt">&gt;</span>Epson<span class="nt">&lt;/impresora&gt;</span>
    <span class="nt">&lt;ordenador&gt;</span>
        <span class="cm">&lt;!--Todo ordenador lleva un elemento</span>
<span class="cm">            sistema operativo que solo puede ser</span>
<span class="cm">            Windows, MacOS o Linux. Siempre hay</span>
<span class="cm">            un atributo &quot;fechainstalacion&quot; que</span>
<span class="cm">            indica la fecha--&gt;</span>
        <span class="nt">&lt;sistemaoperativo</span> <span class="na">fechainstalacion=</span><span class="s">&quot;2022-01-02&quot;</span><span class="nt">&gt;</span>Windows<span class="nt">&lt;/sistemaoperativo&gt;</span>
    <span class="nt">&lt;/ordenador&gt;</span>
<span class="nt">&lt;/nodos&gt;</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Apuntes de Lenguajes de Marcas</a></h1>








<h3>Navegación</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tema1.html">Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="tema2.html">HTML5</a></li>
<li class="toctree-l1"><a class="reference internal" href="tema3.html">CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="tema4.html">Javascript</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">XML</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduccion">Introducción</a></li>
<li class="toctree-l2"><a class="reference internal" href="#un-ejemplo-sencillo">Un ejemplo sencillo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#construccion-de-xml">Construcción de XML</a></li>
<li class="toctree-l2"><a class="reference internal" href="#validez">Validez</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gramaticas">Gramáticas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sintaxis-dtd">Sintaxis DTD</a></li>
<li class="toctree-l3"><a class="reference internal" href="#combinaciones-de-cuantificadores-y-listas-de-opciones">Combinaciones de cuantificadores y listas de opciones</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejemplo-de-dtd-productos">Ejemplo de DTD (productos)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-i-dtd">Ejercicio I (DTD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-ii-dtd">Ejercicio II (DTD)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solucion">Solución</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-iii">Ejercicio III</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solucion-al-ejercicio-iii">Solución al ejercicio III</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-iv">Ejercicio IV</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solucion-al-ejercicio-iv">Solución al ejercicio IV</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-v-dtd">Ejercicio V DTD</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solucion-al-ejercicio-v">Solución al ejercicio V</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-vi-dtd">Ejercicio VI DTD</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-con-atributos">Ejercicio (con atributos)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solucion-ejercicio-con-atributos">Solución ejercicio con atributos</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio">Ejercicio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solucion-completa">Solución completa</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#otras-caracteristicas-de-xml">Otras características de XML</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#atributos">Atributos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#elementos-vacios">Elementos vacíos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alternativas">Alternativas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Ejercicio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Solución</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-mayorista-de-libros">Ejercicio: mayorista de libros</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solucion-al-mayorista-de-libros">Solución al mayorista de libros</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-fabricante-de-tractores">Ejercicio: fabricante de tractores</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solucion-dtd-fabricante-tractores">Solución: DTD fabricante tractores</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-repeticiones-de-opciones">Ejercicio: repeticiones de opciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-multinacional">Ejercicio: multinacional</a></li>
<li class="toctree-l2"><a class="reference internal" href="#otros-ejercicios-dtd">Otros ejercicios DTD</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#inventario-de-piezas">Inventario de piezas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#almacen-de-repuestos">Almacén de repuestos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#suministros-medicos-dtd">Suministros médicos (DTD)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id3">Ejercicio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#inventario-de-piezas-variante">Inventario de piezas (variante)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#esquemas-xml">Esquemas XML</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#un-ejemplo">Un ejemplo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tipos-de-datos-basicos">Tipos de datos básicos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#derivaciones">Derivaciones</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tipos-simples-y-complejos">Tipos simples y complejos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-edad-de-los-trabajadores">Ejercicio:edad de los trabajadores</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-peso-de-productos">Ejercicio: peso de productos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-pagos-validados">Ejercicio: pagos validados</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-validacion-de-dnis">Ejercicio: validación de DNIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uniendo-la-herencia-y-el-sistema-de-tipos">Uniendo la herencia y el sistema de tipos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#restricciones">Restricciones</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Atributos</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicios-de-xml-schemas">Ejercicios de XML Schemas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cantidades-limitades">Cantidades limitades</a></li>
<li class="toctree-l3"><a class="reference internal" href="#solucion-a-las-cantidades-limitadas">Solución a las cantidades limitadas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cantidades-limitadas-con-atributo-divisa">Cantidades limitadas con atributo divisa</a></li>
<li class="toctree-l3"><a class="reference internal" href="#solucion-a-las-cantidades-limitadas-con-atributo-divisa">Solución a las cantidades limitadas con atributo divisa</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cantidades-limitadas-con-atributo-divisa-con-solo-ciertos-valores">Cantidades limitadas con atributo divisa con solo ciertos valores</a></li>
<li class="toctree-l3"><a class="reference internal" href="#solucion-al-atributo-con-solo-ciertos-valores">Solución al atributo con solo ciertos valores</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-codigos-y-sedes">Ejercicio: codigos y sedes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#solucion-a-los-codigos-y-sedes">Solución a los códigos y sedes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-productos-con-atributos">Ejercicio: productos con atributos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-clientes-con-informacion-adicional">Ejercicio: clientes con información adicional</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lista-de-clientes-como-xml-schemas">Lista de clientes como XML Schemas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ampliacion-del-esquema-para-clientes">Ampliación del esquema para clientes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-lista-de-codigos">Ejercicio: lista de códigos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-otra-lista-de-clientes">Ejercicio: otra lista de clientes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-lista-de-alumnos">Ejercicio: lista de alumnos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-lista-de-articulos-con-atributos-optativos">Ejercicio: lista de articulos (con atributos optativos)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-lista-de-componentes-un-enfoque-distinto">Ejercicio: lista de componentes (un enfoque distinto)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-listas-con-choice">Ejercicio: listas con choice</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-listas-de-productos">Ejercicio: listas de productos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-validacion-de-componentes">Ejercicio: validación de componentes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ejercicio-inventario">Ejercicio: inventario</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-xml-schemas-tipo-examen-i">Ejercicio XML Schemas tipo examen (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-xml-schemas-tipo-examen-ii">Ejercicio XML Schemas tipo examen (II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-xml-schemas-tipo-examen-iii">Ejercicio XML Schemas tipo examen (III)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-xml-schemas-tipo-examen-iv">Ejercicio XML Schemas tipo examen (IV)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-xml-schemas-tipo-examen-v">Ejercicio XML Schemas tipo examen (V)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">Ejercicio XML Schemas tipo examen (V)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ejercicio-xml-schemas-tipo-examen-vi">Ejercicio XML Schemas tipo examen (VI)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tema6.html">Recuperación de información</a></li>
<li class="toctree-l1"><a class="reference internal" href="tema7.html">Sindicación y transformación de contenidos</a></li>
<li class="toctree-l1"><a class="reference internal" href="tema8.html">Sistemas de gestión de información</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejercicios/html/anexo_tablas.html">Anexo: ejercicios sobre tablas</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejercicios/formularios/anexo_formularios.html">Anexo: ejercicios sobre formularios</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejercicios/esquemas/ejercicios_dtd.html">Anexo: Ejercicios DTDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejercicios/esquemas/ejercicios_dtd.html#lista-de-productos">Lista de productos</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejercicios/grids/anexo.html">Anexo: ejercicios sobre «grids»</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejercicios/xslt/anexo_ejercicios_xslt.html">Anexo: ejercicios sobre XSLT</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejercicios/xpath/anexo_ejercicios_xpath.html">Anexo: Ejercicios de XPath</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejercicios/xquery/anexo_ejercicios_xquery.html">Anexo: Ejercicios de XQuery</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="tema4.html" title="capítulo anterior">Javascript</a></li>
      <li>Next: <a href="tema6.html" title="próximo capítulo">Recuperación de información</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Oscar Gomez.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/tema5.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>